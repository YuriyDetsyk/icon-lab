{"version":3,"sources":["webpack:///src/app/core/guards/auth.guard.ts","webpack:///src/app/core/guards/admin.guard.ts","webpack:///src/app/modules/admin/admin-home/admin-home.component.ts","webpack:///src/app/modules/admin/admin-home/admin-home.component.html","webpack:///src/app/modules/admin/admin.component.ts","webpack:///src/app/modules/admin/admin.component.html","webpack:///src/app/core/services/notification.service.ts","webpack:///src/app/modules/admin/background-management/background-management.component.html","webpack:///src/app/modules/admin/background-management/background-management.component.ts","webpack:///src/app/modules/admin/bg-bulk-upload/bg-bulk-upload.component.html","webpack:///src/app/modules/admin/bg-bulk-upload/bg-bulk-upload.component.ts","webpack:///src/app/modules/admin/category-management/category-management.component.html","webpack:///src/app/modules/admin/category-management/category-management.component.ts","webpack:///src/app/modules/admin/icon-management/icon-management.component.html","webpack:///src/app/modules/admin/icon-management/icon-management.component.ts","webpack:///src/app/modules/admin/icons-bulk-upload/icons-bulk-upload.component.html","webpack:///src/app/modules/admin/admin-routing.module.ts","webpack:///src/app/modules/admin/icons-bulk-upload/icons-bulk-upload.component.ts","webpack:///src/app/modules/admin/admin.module.ts"],"names":["AuthGuard","authService","router","_","state","sessionData","this","getSessionData","existingToken","getToken","of","verifyToken","pipe","map","data","redirect","url","catchError","navigate","queryParams","redirectUrl","AdminGuard","authGuard","route","canActivate","isAuthorized","user","isAdmin","AdminHomeComponent","AdminComponent","adminTabs","id","IconManagement","title","IconsBulkUpload","CategoryManagement","BackgroundManagement","BgBulkUpload","TabId","username","tabId","tab","find","t","logout","subscribe","toWebsite","onTabChange","NotificationService","DEFAULT_DURATION","notifications$","BehaviorSubject","asObservable","notification","createdAt","Date","next","value","setTimeout","filter","n","getTime","duration","BackgroundManagementComponent","backgroundService","notificationService","fb","clipboardService","loading","form","backgrounds$","fetchBackgrounds","notificationsChanged","isDeleting","deleteBackgroundControl","control","required","destroyed$","Subject","COMPONENT_TITLE","controls","complete","backgroundFieldControl","invalid","background","setValue","deleteBackground","mergeMap","tap","backgrounds","localDelete","addNotification","name","reset","finalize","copy","body","getBackgrounds","sortAlphaNumeric","createForm","clear","forEach","i","group","tags","updatedAt","merge","get","valueChanges","val","split","tag","trim","length","takeUntil","updateValueAndValidity","valid","debounceTime","DEFAULT_DEBOUNCE_TIME","distinctUntilChanged","x","y","key","Object","keys","oldVal","newVal","Array","isArray","isEqual","changes","forkJoin","patchBackground","updatedBackground","localUpdate","updatedBackgroundFull","item","push","clonedBackgrounds","index","findIndex","backgroundId","controlIndex","c","removeAt","action","BgBulkUploadComponent","domSanitizer","filePreviews","Map","from","selectedFiles","event","target","files","selectedFilesArray","file","set","Promise","resolve","reject","reader","FileReader","onload","bypassSecurityTrustUrl","result","onerror","e","readAsDataURL","formData","FormData","append","uploadBackgrounds","throwError","addUploadNotification","filesEl","nativeElement","qty","selectFiles","CategoryManagementComponent","categoryService","categories$","fetchCategories","isAddingCategory","newCategoryForm","description","deleteCategoryControl","categoryFieldControl","addCategory","category","deleteCategory","getCategories","categories","patchCategory","updatedCategory","updatedCategoryFull","IconManagementComponent","iconService","icons$","fetchIcons","IconType","iconTypes","entries","deleteIconControl","type","Raster","Vector","icon","some","cat","iconControl","updatedIcon","obs$","hasCategory","deleteIconCategory","addIconCategory","iconFieldControl","deleteIcon","icons","getIcons","isPremium","patchIcon","updatedIconFull","clonedIcons","iconId","routes","path","component","children","IconsBulkUploadComponent","uploadIcons","iconsQty","AdminRoutingModule","forChild","AdminModule"],"mappings":"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","file":"x","sourcesContent":["import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { AuthService } from '../services/auth.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthGuard implements CanActivate {\n  constructor(private readonly authService: AuthService, private readonly router: Router) {}\n\n  public canActivate(_: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n    const sessionData = this.authService.getSessionData();\n    const existingToken = this.authService.getToken();\n\n    if (!sessionData) {\n      if (!existingToken) {\n        return of(false).pipe(map(() => this.redirect(state.url)));\n      }\n\n      return this.authService.verifyToken().pipe(\n        map((data) => {\n          if (!data) {\n            return this.redirect(state.url);\n          } else {\n            return true;\n          }\n        }),\n        catchError(() => of(this.redirect(state.url)))\n      );\n    } else {\n      return of(true);\n    }\n  }\n\n  private redirect(url: string) {\n    this.router.navigate(['login'], { queryParams: { redirectUrl: url } });\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { AuthService } from '../services/auth.service';\nimport { AuthGuard } from './auth.guard';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AdminGuard implements CanActivate {\n  constructor(\n    private readonly authService: AuthService,\n    private readonly router: Router,\n    private readonly authGuard: AuthGuard\n  ) {}\n\n  public canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n    const isAuthorized$ = this.authGuard.canActivate(route, state);\n    return isAuthorized$.pipe(\n      map((isAuthorized) => {\n        if (!isAuthorized) {\n          return this.redirect(state.url);\n        }\n\n        const res = this.authService.getSessionData()?.user?.isAdmin;\n        if (!res) {\n          return this.redirect(state.url);\n        } else {\n          return true;\n        }\n      }),\n      catchError(() => of(this.redirect(state.url)))\n    );\n  }\n  private redirect(url: string) {\n    this.router.navigate(['login'], { queryParams: { redirectUrl: url } });\n    return false;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'bd-admin-home',\n  templateUrl: './admin-home.component.html',\n  styleUrls: ['./admin-home.component.scss'],\n})\nexport class AdminHomeComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit(): void {}\n}\n","<div class=\"d-flex justify-content-center align-items-center my-5\">\n  <h5>Please select a tool above</h5>\n</div>","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { AuthService } from '../../core/services/auth.service';\nimport { TabId } from '../../models/enums/tab-id';\nimport { NavTab } from '../../models/interfaces/nav-tab';\n\n@Component({\n  selector: 'bd-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.scss'],\n})\nexport class AdminComponent {\n  public adminTabs: NavTab[] = [\n    {\n      id: TabId.IconManagement,\n      title: 'Icon Management',\n      url: '/admin/icons',\n    },\n    {\n      id: TabId.IconsBulkUpload,\n      title: 'Icons Bulk Upload',\n      url: '/admin/icons/upload',\n    },\n    {\n      id: TabId.CategoryManagement,\n      title: 'Category Management',\n      url: '/admin/categories',\n    },\n    {\n      id: TabId.BackgroundManagement,\n      title: 'Background Management',\n      url: '/admin/backgrounds',\n    },\n    {\n      id: TabId.BgBulkUpload,\n      title: 'Backgrounds Bulk Upload',\n      url: '/admin/backgrounds/upload',\n    },\n  ];\n  // public activeTabId: TabId;\n  public TabId = TabId;\n  public get username() {\n    return this.authService.username || 'ADMIN';\n  }\n\n  constructor(private readonly authService: AuthService, private readonly router: Router) {}\n\n  public onTabChange(tabId: TabId) {\n    const tab = this.adminTabs.find((t) => t.id === tabId);\n    this.router.navigate([tab.url]);\n  }\n\n  public toWebsite() {\n    this.router.navigate(['']);\n  }\n\n  public logout() {\n    this.authService.logout().subscribe();\n  }\n}\n","<div class=\"position-fixed w-100 header-wrapper\">\n  <div class=\"d-flex justify-content-end align-items-center p-2 border-bottom\">\n    <a class=\"mr-auto app-logo\"\n       routerLink=\"\"></a>\n    <h5 class=\"m-0 mr-3\">Welcome, {{ username }}</h5>\n    <button class=\"btn btn-primary mr-3\"\n            (click)=\"toWebsite()\">Go to Website</button>\n    <button class=\"btn btn-primary\"\n            (click)=\"logout()\">Logout</button>\n  </div>\n\n  <bd-tabs [tabs]=\"adminTabs\"\n           [snap]=\"'bottom'\"\n           (tabChange)=\"onTabChange($event)\"\n           class=\"pt-3\"></bd-tabs>\n</div>\n\n<div class=\"d-flex flex-column content-wrapper\">\n  <router-outlet></router-outlet>\n</div>","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { Notification } from '../../models/interfaces/notification';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NotificationService {\n  public readonly DEFAULT_DURATION = 4000;\n  public get notificationsChanged() {\n    return this.notifications$.asObservable();\n  }\n  private notifications$ = new BehaviorSubject<Notification[]>([]);\n\n  public addNotification(notification: Notification) {\n    if (!notification.createdAt) {\n      notification.createdAt = new Date();\n    }\n\n    this.notifications$.next([...this.notifications$.value, notification]);\n\n    setTimeout(\n      () =>\n        this.notifications$.next(\n          this.notifications$.value.filter((n) => n.createdAt.getTime() !== notification.createdAt.getTime())\n        ),\n      notification.duration || this.DEFAULT_DURATION\n    );\n  }\n}\n","<ng-container *ngIf=\"(backgrounds$ | async)?.length && !loading\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Background</th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Tags <span>(split with \",\")</span></th>\n        <th scope=\"col\">URL</th>\n        <th scope=\"col\">Created At</th>\n        <th scope=\"col\">Updated At</th>\n        <th scope=\"col\"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let background of backgroundForms; let i = index\">\n        <tr [formGroup]=\"background\">\n          <td scope=\"row\"\n              class=\"cell-id\"\n              (click)=\"copyId(background.get('id').value)\"><small title=\"Click to copy\">{{ background.get('id').value }}</small></td>\n          <td><img class=\"background-preview\"\n                 [src]=\"background.get('url').value\"></td>\n          <td class=\"cell-name\">\n            <bd-text-input formControlName=\"name\"\n                           [cssClass]=\"getInputCss(background.get('name'))\"></bd-text-input>\n          </td>\n          <td>\n            <textarea formControlName=\"tags\"></textarea>\n          </td>\n          <td>\n            <bd-text-input formControlName=\"url\"\n                           [cssClass]=\"getInputCss(background.get('url'))\"></bd-text-input>\n          </td>\n          <td><small>{{ background.get('createdAt').value | date:'short'}}</small></td>\n          <td><small>{{ (background.get('updatedAt').value | date:'short') || '-' }}</small></td>\n          <td class=\"cell-delete\">\n            <button class=\"btn btn-danger btn-icon icon-cross\"\n                    (click)=\"openDeleteModal(background.value)\"></button>\n          </td>\n        </tr>\n      </ng-container>\n    </tbody>\n  </table>\n</ng-container>\n\n<span *ngIf=\"loading\"\n      class=\"spinner\"></span>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>\n\n<bd-modal *ngIf=\"isDeleting\"\n          modalTitle=\"Delete existing background\"\n          (closed)=\"isDeleting = false\"\n          (saved)=\"deleteBackground()\">\n  <div class=\"container\">\n    <p>Are you sure you want to delete background \"{{deleteBackgroundControl.value.name}}\"?</p>\n  </div>\n</bd-modal>\n","import { Component, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ClipboardService } from 'ngx-clipboard';\nimport { forkJoin, merge, of, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, finalize, map, mergeMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { BackgroundService } from '../../../core/services/background.service';\nimport { NotificationService } from '../../../core/services/notification.service';\nimport { BackgroundDto } from '../../../models/dto/background-dto';\nimport { ArrayHelper } from '../../../shared/helpers/array.helper';\nimport { DataHelper } from '../../../shared/helpers/data.helper';\nimport { TextHelper } from '../../../shared/helpers/text.helper';\n\n@Component({\n  selector: 'bd-background-management',\n  templateUrl: './background-management.component.html',\n  styleUrls: ['./background-management.component.scss'],\n})\nexport class BackgroundManagementComponent implements OnDestroy {\n  public loading = false;\n  public form = new FormArray([]);\n  public backgrounds$ = this.fetchBackgrounds();\n  public notifications$ = this.notificationService.notificationsChanged;\n  public get backgroundForms() {\n    return this.form.controls as FormGroup[];\n  }\n  public isDeleting = false;\n  public deleteBackgroundControl = this.fb.control([null, Validators.required]);\n  private destroyed$ = new Subject<void>();\n  private readonly COMPONENT_TITLE = 'Background Management';\n\n  constructor(\n    private readonly backgroundService: BackgroundService,\n    private readonly notificationService: NotificationService,\n    private readonly fb: FormBuilder,\n    private readonly clipboardService: ClipboardService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public getInputCss(backgroundFieldControl: AbstractControl) {\n    const cssClass = 'w-100 text-small';\n    return backgroundFieldControl.invalid ? `${cssClass} is-invalid` : cssClass;\n  }\n\n  public openDeleteModal(background: BackgroundDto) {\n    this.deleteBackgroundControl.setValue(background);\n    this.isDeleting = true;\n  }\n\n  public deleteBackground() {\n    this.loading = true;\n    this.backgroundService\n      .deleteBackground(this.deleteBackgroundControl.value.id)\n      .pipe(\n        mergeMap(() => this.backgrounds$),\n        tap((backgrounds) => {\n          this.localDelete(this.deleteBackgroundControl.value.id, backgrounds);\n          this.addNotification({ name: this.deleteBackgroundControl.value.name }, 'deleted');\n          this.deleteBackgroundControl.reset();\n        }),\n        finalize(() => (this.loading = false))\n      )\n      .subscribe();\n\n    this.isDeleting = false;\n  }\n\n  public copyId(id: string) {\n    this.clipboardService.copy(id);\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Id '${id}' has been copied to clipboard.`,\n    });\n  }\n\n  private fetchBackgrounds() {\n    this.loading = true;\n\n    return this.backgroundService.getBackgrounds(true).pipe(\n      map((backgrounds) => ArrayHelper.sortAlphaNumeric(backgrounds, 'name')),\n      tap((backgrounds) => this.createForm(backgrounds)),\n      finalize(() => (this.loading = false))\n    );\n  }\n\n  private createForm(backgrounds: BackgroundDto[]) {\n    this.form.clear();\n\n    backgrounds.forEach((i) => {\n      const group = this.fb.group({\n        id: [i.id, Validators.required],\n        name: [i.name, Validators.required],\n        tags: [i.tags],\n        url: [i.url, Validators.required],\n        createdAt: [i.createdAt, Validators.required],\n        updatedAt: [i.updatedAt],\n      });\n      merge(\n        group.get('name').valueChanges.pipe(map((val) => ({ name: val }))),\n        group.get('tags').valueChanges.pipe(\n          map((val) => ({\n            tags: val\n              .split(',')\n              .map((tag: string) => tag.trim())\n              .filter((tag: string) => !!tag.length),\n          }))\n        ),\n        group.get('url').valueChanges.pipe(map((val) => ({ url: val })))\n      )\n        .pipe(\n          takeUntil(this.destroyed$),\n          filter(() => {\n            group.updateValueAndValidity();\n            return group.valid;\n          }),\n          debounceTime(TextHelper.DEFAULT_DEBOUNCE_TIME),\n          distinctUntilChanged((x, y) => {\n            const key = Object.keys(y)[0];\n            const oldVal = (x as any)[key];\n            const newVal = (y as any)[key];\n            const isArray = Array.isArray(oldVal);\n            return isArray ? DataHelper.isEqual(oldVal, newVal) : oldVal === newVal;\n          }),\n          map((changes) => ({ id: i.id, ...changes } as Partial<BackgroundDto>)),\n          mergeMap((background) => forkJoin([of(background), this.backgroundService.patchBackground(background)])),\n          tap(([updatedBackground]) => {\n            this.localUpdate(updatedBackground, backgrounds);\n            const updatedBackgroundFull = backgrounds.find((item) => item.id === updatedBackground.id);\n            if (updatedBackgroundFull) {\n              this.addNotification({ ...updatedBackgroundFull, ...updatedBackground }, 'updated');\n            }\n          })\n        )\n        .subscribe();\n\n      this.form.push(group);\n    });\n  }\n\n  private localUpdate(updatedBackground: Partial<BackgroundDto>, backgrounds: BackgroundDto[]) {\n    const clonedBackgrounds = [...backgrounds];\n    const index = clonedBackgrounds.findIndex((background) => background.id === updatedBackground.id);\n    clonedBackgrounds[index] = { ...clonedBackgrounds[index], ...updatedBackground };\n    this.backgrounds$ = of(clonedBackgrounds);\n  }\n\n  private localDelete(backgroundId: string, backgrounds: BackgroundDto[]) {\n    this.backgrounds$ = of([...backgrounds.filter((background) => background.id !== backgroundId)]).pipe(\n      tap(() => {\n        const controlIndex = this.form.controls.findIndex((c) => c.value.id === backgroundId);\n        if (controlIndex) {\n          this.form.removeAt(controlIndex);\n        }\n      })\n    );\n  }\n\n  private addNotification(background: Partial<BackgroundDto>, action: 'updated' | 'deleted') {\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Background '${background.name}' has been ${action}.`,\n    });\n  }\n}\n","<div class=\"d-flex flex-column\">\n  <input class=\"d-none\"\n         type=\"file\"\n         multiple\n         accept=\"image/*\"\n         #files\n         (change)=\"selectFiles($event)\" />\n  <button class=\"btn btn-menu btn-icon mb-2 icon-collection\"\n          (click)=\"files.click()\">Select Files</button>\n\n  <ng-container *ngIf=\"selectedFilesArray?.length && !loading\">\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">#</th>\n          <th scope=\"col\">File Name</th>\n          <th scope=\"col\">File Size</th>\n          <th scope=\"col\">Preview</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let file of selectedFilesArray; let i = index; trackBy: trackFn\">\n          <th scope=\"row\">{{ i + 1 }}</th>\n          <td>{{ file.name }}</td>\n          <td>{{ file.size | formatBytes }}</td>\n          <td class=\"text-center\"><img class=\"icon-preview\"\n                 [src]=\"filePreviews.get(file.name) | async\" /></td>\n        </tr>\n      </tbody>\n    </table>\n\n    <button class=\"btn\"\n            (click)=\"uploadBackgrounds()\">Upload Backgrounds</button>\n  </ng-container>\n\n  <span *ngIf=\"loading\"\n        class=\"spinner\"></span>\n</div>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>\n","import { Component, ElementRef, OnDestroy, ViewChild } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Subject, throwError } from 'rxjs';\nimport { catchError, finalize, tap } from 'rxjs/operators';\nimport { BackgroundService } from '../../../core/services/background.service';\n\nimport { NotificationService } from '../../../core/services/notification.service';\n\n@Component({\n  selector: 'bd-bg-bulk-upload',\n  templateUrl: './bg-bulk-upload.component.html',\n  styleUrls: ['./bg-bulk-upload.component.scss'],\n})\nexport class BgBulkUploadComponent implements OnDestroy {\n  @ViewChild('files') public filesEl: ElementRef<HTMLInputElement>;\n  public selectedFiles: FileList;\n  public filePreviews = new Map<string, Promise<string>>();\n  public get selectedFilesArray(): File[] {\n    return Array.from(this.selectedFiles || []);\n  }\n  public loading = false;\n  public notifications$ = this.notificationService.notificationsChanged;\n  private destroyed$ = new Subject<void>();\n\n  constructor(\n    private readonly backgroundService: BackgroundService,\n    private readonly domSanitizer: DomSanitizer,\n    private readonly notificationService: NotificationService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public selectFiles(event: any) {\n    this.selectedFiles = event.target.files || [];\n\n    this.selectedFilesArray.forEach((file) => {\n      this.filePreviews.set(\n        file.name,\n        new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            resolve(this.domSanitizer.bypassSecurityTrustUrl(reader.result as string) as string);\n          };\n          reader.onerror = (e) => {\n            reject(e);\n          };\n\n          reader.readAsDataURL(file);\n        })\n      );\n    });\n  }\n\n  public uploadBackgrounds() {\n    if (!this.selectedFiles) {\n      return;\n    }\n\n    const formData = new FormData();\n    for (const file of this.selectedFilesArray) {\n      formData.append('files', file);\n    }\n\n    this.backgroundService\n      .uploadBackgrounds(formData)\n      .pipe(\n        tap(() => (this.loading = true)),\n        catchError((e) => throwError(e)),\n        finalize(() => {\n          this.addUploadNotification(this.selectedFilesArray.length);\n          this.loading = false;\n          this.filesEl.nativeElement.value = null;\n        })\n      )\n      .subscribe();\n  }\n\n  public trackFn(_: number, item: File) {\n    return item.name;\n  }\n\n  private addUploadNotification(qty: number) {\n    this.notificationService.addNotification({\n      title: 'Backgrounds Bulk Upload',\n      createdAt: new Date(),\n      body: `${qty} backgrounds have been uploaded.`,\n    });\n  }\n}\n","<button class=\"btn btn-primary btn-add\"\n        (click)=\"isAddingCategory = true\">Add Category</button>\n\n<ng-container *ngIf=\"(categories$ | async)?.length && !loading\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Description</th>\n        <th scope=\"col\">Created At</th>\n        <th scope=\"col\">Updated At</th>\n        <th scope=\"col\"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let category of categoryForms; let i = index\">\n        <tr [formGroup]=\"category\">\n          <td scope=\"row\"\n              class=\"cell-id\"\n              (click)=\"copyId(category.get('id').value)\"><small title=\"Click to copy\">{{ category.get('id').value }}</small></td>\n          <td class=\"cell-name\">\n            <bd-text-input formControlName=\"name\"\n                           [cssClass]=\"getInputCss(category.get('name'))\"></bd-text-input>\n          </td>\n          <td>\n            <bd-text-input formControlName=\"description\"\n                           [cssClass]=\"getInputCss(category.get('description'))\"></bd-text-input>\n          </td>\n          <td>{{ category.get('createdAt').value | date:'short'}}</td>\n          <td>{{ (category.get('updatedAt').value | date:'short') || '-' }}</td>\n          <td class=\"cell-delete\">\n            <button class=\"btn btn-danger btn-icon icon-cross\"\n                    (click)=\"openDeleteModal(category.value)\"></button>\n          </td>\n        </tr>\n      </ng-container>\n    </tbody>\n  </table>\n</ng-container>\n\n<span *ngIf=\"loading\"\n      class=\"spinner\"></span>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>\n\n<bd-modal *ngIf=\"isAddingCategory\"\n          modalTitle=\"Add new category\"\n          (closed)=\"cancelAddingCategory()\"\n          (saved)=\"addCategory()\">\n  <form [formGroup]=\"newCategoryForm\">\n    <div class=\"form-group\">\n      <label for=\"name\">Name</label>\n      <bd-text-input inputId=\"name\"\n                     formControlName=\"name\"\n                     placeholder=\"Category name...\"\n                     [cssClass]=\"getInputCss(newCategoryForm.get('name'))\"></bd-text-input>\n    </div>\n    <div class=\"form-group\">\n      <label for=\"description\">Description</label>\n      <bd-text-input inputId=\"description\"\n                     formControlName=\"description\"\n                     placeholder=\"Category description...\"\n                     [cssClass]=\"getInputCss(newCategoryForm.get('description'))\"></bd-text-input>\n    </div>\n  </form>\n</bd-modal>\n\n<bd-modal *ngIf=\"isDeleting\"\n          modalTitle=\"Delete existing category\"\n          (closed)=\"isDeleting = false\"\n          (saved)=\"deleteCategory()\">\n  <div class=\"container\">\n    <p>Are you sure you want to delete category \"{{deleteCategoryControl.value.name}}\"?</p>\n  </div>\n</bd-modal>","import { Component, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ClipboardService } from 'ngx-clipboard';\nimport { forkJoin, merge, of, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, finalize, map, mergeMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { CategoryService } from '../../../core/services/category.service';\nimport { NotificationService } from '../../../core/services/notification.service';\nimport { CategoryDto } from '../../../models/dto/category-dto';\nimport { ArrayHelper } from '../../../shared/helpers/array.helper';\nimport { TextHelper } from '../../../shared/helpers/text.helper';\n\n@Component({\n  selector: 'bd-category-management',\n  templateUrl: './category-management.component.html',\n  styleUrls: ['./category-management.component.scss'],\n})\nexport class CategoryManagementComponent implements OnDestroy {\n  public loading = false;\n  public form = new FormArray([]);\n  public categories$ = this.fetchCategories();\n  public notifications$ = this.notificationService.notificationsChanged;\n  public get categoryForms() {\n    return this.form.controls as FormGroup[];\n  }\n  public isAddingCategory = false;\n  public isDeleting = false;\n  public newCategoryForm = this.fb.group({\n    name: [null, Validators.required],\n    description: [null],\n  });\n  public deleteCategoryControl = this.fb.control([null, Validators.required]);\n  private destroyed$ = new Subject<void>();\n  private readonly COMPONENT_TITLE = 'Category Management';\n\n  constructor(\n    private readonly categoryService: CategoryService,\n    private readonly notificationService: NotificationService,\n    private readonly fb: FormBuilder,\n    private readonly clipboardService: ClipboardService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public getInputCss(categoryFieldControl: AbstractControl) {\n    const cssClass = 'w-100 text-small';\n    return categoryFieldControl.invalid ? `${cssClass} is-invalid` : cssClass;\n  }\n\n  public cancelAddingCategory() {\n    this.isAddingCategory = false;\n    this.newCategoryForm.reset();\n  }\n\n  public addCategory() {\n    if (this.newCategoryForm.invalid) {\n      return;\n    }\n\n    this.loading = true;\n    this.categoryService\n      .addCategory(this.newCategoryForm.value)\n      .pipe(\n        mergeMap(() => this.fetchCategories()),\n        tap(() => {\n          this.addNotification({ name: this.newCategoryForm.value.name }, 'added');\n          this.newCategoryForm.reset();\n        })\n      )\n      .subscribe();\n\n    this.isAddingCategory = false;\n  }\n\n  public openDeleteModal(category: CategoryDto) {\n    this.deleteCategoryControl.setValue(category);\n    this.isDeleting = true;\n  }\n\n  public deleteCategory() {\n    this.loading = true;\n    this.categoryService\n      .deleteCategory(this.deleteCategoryControl.value.id)\n      .pipe(\n        mergeMap(() => this.fetchCategories()),\n        tap(() => {\n          this.addNotification({ name: this.deleteCategoryControl.value.name }, 'deleted');\n          this.deleteCategoryControl.reset();\n        })\n      )\n      .subscribe();\n\n    this.isDeleting = false;\n  }\n\n  public copyId(id: string) {\n    this.clipboardService.copy(id);\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Id '${id}' has been copied to clipboard.`,\n    });\n  }\n\n  private fetchCategories() {\n    this.loading = true;\n\n    return this.categoryService.getCategories(true).pipe(\n      map((categories) => ArrayHelper.sortAlphaNumeric(categories, 'name')),\n      tap((categories) => this.createForm(categories)),\n      finalize(() => (this.loading = false))\n    );\n  }\n\n  private createForm(categories: CategoryDto[]) {\n    this.form.clear();\n\n    categories.forEach((i) => {\n      const group = this.fb.group({\n        id: [i.id, Validators.required],\n        name: [i.name, Validators.required],\n        description: [i.description, Validators.required],\n        createdAt: [i.createdAt, Validators.required],\n        updatedAt: [i.updatedAt],\n      });\n      merge(\n        group.get('name').valueChanges.pipe(map((val) => ({ name: val }))),\n        group.get('description').valueChanges.pipe(map((val) => ({ description: val })))\n      )\n        .pipe(\n          takeUntil(this.destroyed$),\n          filter(() => {\n            group.updateValueAndValidity();\n            return group.valid;\n          }),\n          debounceTime(TextHelper.DEFAULT_DEBOUNCE_TIME),\n          distinctUntilChanged((x, y) => {\n            const key = Object.keys(y)[0];\n            return (x as any)[key] === (y as any)[key];\n          }),\n          map((changes) => ({ id: i.id, ...changes } as Partial<CategoryDto>)),\n          mergeMap((category) => forkJoin([of(category), this.categoryService.patchCategory(category)])),\n          tap(([updatedCategory]) => {\n            const updatedCategoryFull = categories.find((item) => item.id === updatedCategory.id);\n            if (updatedCategoryFull) {\n              this.addNotification({ ...updatedCategoryFull, ...updatedCategory }, 'updated');\n            }\n\n            this.categories$ = this.fetchCategories();\n          })\n        )\n        .subscribe();\n\n      this.form.push(group);\n    });\n  }\n\n  private addNotification(category: Partial<CategoryDto>, action: 'added' | 'updated' | 'deleted') {\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Category '${category.name}' has been ${action}.`,\n    });\n  }\n}\n","<ng-container *ngIf=\"(icons$ | async)?.length && !loading\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Icon</th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Tags <span>(split with \",\")</span></th>\n        <th scope=\"col\">URL</th>\n        <th scope=\"col\">Type</th>\n        <th scope=\"col\">Premium</th>\n        <th scope=\"col\">Categories</th>\n        <th scope=\"col\">Created At</th>\n        <th scope=\"col\">Updated At</th>\n        <th scope=\"col\"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let icon of iconForms; let i = index\">\n        <tr [formGroup]=\"icon\">\n          <td scope=\"row\"\n              class=\"cell-id\"\n              (click)=\"copyId(icon.get('id').value)\"><small title=\"Click to copy\">{{ icon.get('id').value }}</small></td>\n          <td><img class=\"icon-preview\"\n                 [src]=\"icon.get('url').value\"></td>\n          <td class=\"cell-name\">\n            <bd-text-input formControlName=\"name\"\n                           [cssClass]=\"getInputCss(icon.get('name'))\"></bd-text-input>\n          </td>\n          <td>\n            <textarea formControlName=\"tags\"></textarea>\n          </td>\n          <td>\n            <bd-text-input formControlName=\"url\"\n                           [cssClass]=\"getInputCss(icon.get('url'))\"></bd-text-input>\n          </td>\n          <td class=\"cell-type\">\n            <bd-dropdown formControlName=\"type\"\n                         [items]=\"iconTypes\"\n                         valueProp=\"id\"\n                         labelProp=\"name\"\n                         [cssClass]=\"getInputCss(icon.get('type'))\"></bd-dropdown>\n          </td>\n          <td>\n            <div class=\"d-flex justify-content-center align-items-center checkbox-wrapper\"\n                 *ngIf=\"icon.value.type === IconType.Vector\">\n              <input type=\"checkbox\"\n                     class=\"checkbox mr-2\"\n                     [value]=\"icon.value.isPremium\"\n                     [checked]=\"icon.value.isPremium\"\n                     formControlName=\"isPremium\">\n            </div>\n          </td>\n          <td>\n            <div class=\"d-flex align-items-center checkbox-wrapper\"\n                 *ngFor=\"let category of categories$ | async\">\n              <input type=\"checkbox\"\n                     class=\"checkbox mr-2\"\n                     [value]=\"category\"\n                     [checked]=\"hasCategory(icon.value, category)\"\n                     (change)=\"toggleCategory(icon.value, category, icon)\"\n                     id=\"category-checkbox-{{i}}-{{category.id}}\">\n              <label for=\"category-checkbox-{{i}}-{{category.id}}\">\n                {{category.name}}\n              </label>\n            </div>\n          </td>\n          <td><small>{{ icon.get('createdAt').value | date:'short'}}</small></td>\n          <td><small>{{ (icon.get('updatedAt').value | date:'short') || '-' }}</small></td>\n          <td class=\"cell-delete\">\n            <button class=\"btn btn-danger btn-icon icon-cross\"\n                    (click)=\"openDeleteModal(icon.value)\"></button>\n          </td>\n        </tr>\n      </ng-container>\n    </tbody>\n  </table>\n</ng-container>\n\n<span *ngIf=\"loading\"\n      class=\"spinner\"></span>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>\n\n<bd-modal *ngIf=\"isDeleting\"\n          modalTitle=\"Delete existing icon\"\n          (closed)=\"isDeleting = false\"\n          (saved)=\"deleteIcon()\">\n  <div class=\"container\">\n    <p>Are you sure you want to delete icon \"{{deleteIconControl.value.name}}\"?</p>\n  </div>\n</bd-modal>\n","import { Component, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ClipboardService } from 'ngx-clipboard';\nimport { forkJoin, merge, Observable, of, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, finalize, map, mergeMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { CategoryService } from '../../../core/services/category.service';\nimport { IconService } from '../../../core/services/icon.service';\nimport { NotificationService } from '../../../core/services/notification.service';\nimport { CategoryDto } from '../../../models/dto/category-dto';\nimport { IconDto } from '../../../models/dto/icon-dto';\nimport { IconType } from '../../../models/enums/icon-type';\nimport { ArrayHelper } from '../../../shared/helpers/array.helper';\nimport { DataHelper } from '../../../shared/helpers/data.helper';\nimport { TextHelper } from '../../../shared/helpers/text.helper';\n\n@Component({\n  selector: 'bd-icon-management',\n  templateUrl: './icon-management.component.html',\n  styleUrls: ['./icon-management.component.scss'],\n})\nexport class IconManagementComponent implements OnDestroy {\n  public loading = false;\n  public form = new FormArray([]);\n  public icons$ = this.fetchIcons();\n  public IconType = IconType;\n  public iconTypes = Object.entries(IconType).map(([key, value]) => ({ id: value, name: key }));\n  public categories$ = this.categoryService.getCategories();\n  public notifications$ = this.notificationService.notificationsChanged;\n  public get iconForms() {\n    return this.form.controls as FormGroup[];\n  }\n  public isDeleting = false;\n  public deleteIconControl = this.fb.control([null, Validators.required]);\n  private destroyed$ = new Subject<void>();\n  private readonly COMPONENT_TITLE = 'Icon Management';\n\n  constructor(\n    private readonly iconService: IconService,\n    private readonly categoryService: CategoryService,\n    private readonly notificationService: NotificationService,\n    private readonly fb: FormBuilder,\n    private readonly clipboardService: ClipboardService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public getIconType(type: IconType) {\n    switch (type) {\n      case IconType.Raster:\n        return 'Raster';\n      case IconType.Vector:\n        return 'Vector';\n      default:\n        return '-';\n    }\n  }\n\n  public hasCategory(icon: IconDto, category: CategoryDto) {\n    return icon.categories?.some((cat) => cat.id === category.id);\n  }\n\n  public toggleCategory(icon: IconDto, category: CategoryDto, iconControl: FormGroup) {\n    let updatedIcon: Partial<IconDto>;\n    let obs$: Observable<any>;\n\n    if (this.hasCategory(icon, category)) {\n      updatedIcon = { id: icon.id, categories: icon.categories.filter((cat) => cat.id !== category.id) };\n      obs$ = this.iconService.deleteIconCategory(icon.id, category.id);\n    } else {\n      updatedIcon = { id: icon.id, categories: [...icon.categories, category] };\n      obs$ = this.iconService.addIconCategory(icon.id, category.id);\n    }\n\n    return obs$.pipe(tap(() => iconControl.get('categories').setValue(updatedIcon.categories))).subscribe();\n  }\n\n  public getInputCss(iconFieldControl: AbstractControl) {\n    const cssClass = 'w-100 text-small';\n    return iconFieldControl.invalid ? `${cssClass} is-invalid` : cssClass;\n  }\n\n  public openDeleteModal(icon: IconDto) {\n    this.deleteIconControl.setValue(icon);\n    this.isDeleting = true;\n  }\n\n  public deleteIcon() {\n    this.loading = true;\n    this.iconService\n      .deleteIcon(this.deleteIconControl.value.id)\n      .pipe(\n        mergeMap(() => this.icons$),\n        tap((icons) => {\n          this.localDelete(this.deleteIconControl.value.id, icons);\n          this.addNotification({ name: this.deleteIconControl.value.name }, 'deleted');\n          this.deleteIconControl.reset();\n        }),\n        finalize(() => (this.loading = false))\n      )\n      .subscribe();\n\n    this.isDeleting = false;\n  }\n\n  public copyId(id: string) {\n    this.clipboardService.copy(id);\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Id '${id}' has been copied to clipboard.`,\n    });\n  }\n\n  private fetchIcons() {\n    this.loading = true;\n\n    return this.iconService.getIcons({}, true).pipe(\n      map((icons) => ArrayHelper.sortAlphaNumeric(icons, 'name')),\n      tap((icons) => this.createForm(icons)),\n      finalize(() => (this.loading = false))\n    );\n  }\n\n  private createForm(icons: IconDto[]) {\n    this.form.clear();\n\n    icons.forEach((i) => {\n      const group = this.fb.group({\n        id: [i.id, Validators.required],\n        name: [i.name, Validators.required],\n        tags: [i.tags],\n        url: [i.url, Validators.required],\n        type: [i.type, Validators.required],\n        isPremium: [i.isPremium, Validators.required],\n        categories: [i.categories],\n        createdAt: [i.createdAt, Validators.required],\n        updatedAt: [i.updatedAt],\n      });\n      merge(\n        group.get('name').valueChanges.pipe(map((val) => ({ name: val }))),\n        group.get('tags').valueChanges.pipe(\n          map((val) => ({\n            tags: val\n              .split(',')\n              .map((tag: string) => tag.trim())\n              .filter((tag: string) => !!tag.length),\n          }))\n        ),\n        group.get('url').valueChanges.pipe(map((val) => ({ url: val }))),\n        group.get('type').valueChanges.pipe(map((val) => ({ type: val }))),\n        group.get('isPremium').valueChanges.pipe(map((val) => ({ isPremium: val })))\n      )\n        .pipe(\n          takeUntil(this.destroyed$),\n          filter(() => {\n            group.updateValueAndValidity();\n            return group.valid;\n          }),\n          debounceTime(TextHelper.DEFAULT_DEBOUNCE_TIME),\n          distinctUntilChanged((x, y) => {\n            const key = Object.keys(y)[0];\n            const oldVal = (x as any)[key];\n            const newVal = (y as any)[key];\n            const isArray = Array.isArray(oldVal);\n            return isArray ? DataHelper.isEqual(oldVal, newVal) : oldVal === newVal;\n          }),\n          map((changes) => ({ id: i.id, ...changes } as Partial<IconDto>)),\n          mergeMap((icon) => forkJoin([of(icon), this.iconService.patchIcon(icon)])),\n          tap(([updatedIcon]) => {\n            this.localUpdate(updatedIcon, icons);\n            const updatedIconFull = icons.find((item) => item.id === updatedIcon.id);\n            if (updatedIconFull) {\n              this.addNotification({ ...updatedIconFull, ...updatedIcon }, 'updated');\n            }\n          })\n        )\n        .subscribe();\n\n      group\n        .get('categories')\n        .valueChanges.pipe(map((val) => ({ categories: val })))\n        .pipe(\n          // TODO: reuse shared pipe elements\n          takeUntil(this.destroyed$),\n          map((changes) => ({ id: i.id, ...changes } as Partial<IconDto>)),\n          tap((updatedIcon) => {\n            this.localUpdate(updatedIcon, icons);\n            const updatedIconFull = icons.find((item) => item.id === updatedIcon.id);\n            if (updatedIconFull) {\n              this.addNotification({ ...updatedIconFull, ...updatedIcon }, 'updated');\n            }\n          })\n        )\n        .subscribe();\n\n      this.form.push(group);\n    });\n  }\n\n  private localUpdate(updatedIcon: Partial<IconDto>, icons: IconDto[]) {\n    const clonedIcons = [...icons];\n    const index = clonedIcons.findIndex((icon) => icon.id === updatedIcon.id);\n    clonedIcons[index] = { ...clonedIcons[index], ...updatedIcon };\n    this.icons$ = of(clonedIcons);\n  }\n\n  private localDelete(iconId: string, icons: IconDto[]) {\n    this.icons$ = of([...icons.filter((icon) => icon.id !== iconId)]).pipe(\n      tap(() => {\n        const controlIndex = this.form.controls.findIndex((c) => c.value.id === iconId);\n        if (controlIndex) {\n          this.form.removeAt(controlIndex);\n        }\n      })\n    );\n  }\n\n  private addNotification(icon: Partial<IconDto>, action: 'updated' | 'deleted') {\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Icon '${icon.name}' has been ${action}.`,\n    });\n  }\n}\n","<div class=\"d-flex flex-column\">\n  <input class=\"d-none\"\n         type=\"file\"\n         multiple\n         accept=\"image/*\"\n         #files\n         (change)=\"selectFiles($event)\" />\n  <button class=\"btn btn-menu btn-icon mb-2 icon-collection\"\n          (click)=\"files.click()\">Select Files</button>\n\n  <ng-container *ngIf=\"selectedFilesArray?.length && !loading\">\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">#</th>\n          <th scope=\"col\">File Name</th>\n          <th scope=\"col\">File Size</th>\n          <th scope=\"col\">Preview</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let file of selectedFilesArray; let i = index; trackBy: trackFn\">\n          <th scope=\"row\">{{ i + 1 }}</th>\n          <td>{{ file.name }}</td>\n          <td>{{ file.size | formatBytes }}</td>\n          <td class=\"text-center\"><img class=\"icon-preview\"\n                 [src]=\"filePreviews.get(file.name) | async\" /></td>\n        </tr>\n      </tbody>\n    </table>\n\n    <button class=\"btn\"\n            (click)=\"uploadIcons()\">Upload Icons</button>\n  </ng-container>\n\n  <span *ngIf=\"loading\"\n        class=\"spinner\"></span>\n</div>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { AdminGuard } from '../../core/guards/admin.guard';\nimport { AdminHomeComponent } from './admin-home/admin-home.component';\nimport { AdminComponent } from './admin.component';\nimport { BackgroundManagementComponent } from './background-management/background-management.component';\nimport { BgBulkUploadComponent } from './bg-bulk-upload/bg-bulk-upload.component';\nimport { CategoryManagementComponent } from './category-management/category-management.component';\nimport { IconManagementComponent } from './icon-management/icon-management.component';\nimport { IconsBulkUploadComponent } from './icons-bulk-upload/icons-bulk-upload.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AdminComponent,\n    canActivate: [AdminGuard],\n    children: [\n      { path: '', component: AdminHomeComponent },\n      {\n        path: 'icons',\n        children: [\n          { path: 'upload', component: IconsBulkUploadComponent },\n          { path: '', component: IconManagementComponent },\n        ],\n      },\n      { path: 'categories', component: CategoryManagementComponent },\n      {\n        path: 'backgrounds',\n        children: [\n          { path: 'upload', component: BgBulkUploadComponent },\n          { path: '', component: BackgroundManagementComponent },\n        ],\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AdminRoutingModule {}\n","import { Component, ElementRef, OnDestroy, ViewChild } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Subject, throwError } from 'rxjs';\nimport { catchError, finalize, tap } from 'rxjs/operators';\n\nimport { IconService } from '../../../core/services/icon.service';\nimport { NotificationService } from '../../../core/services/notification.service';\n\n@Component({\n  selector: 'bd-icons-bulk-upload',\n  templateUrl: './icons-bulk-upload.component.html',\n  styleUrls: ['./icons-bulk-upload.component.scss'],\n})\nexport class IconsBulkUploadComponent implements OnDestroy {\n  @ViewChild('files') public filesEl: ElementRef<HTMLInputElement>;\n  public selectedFiles: FileList;\n  public filePreviews = new Map<string, Promise<string>>();\n  public get selectedFilesArray(): File[] {\n    return Array.from(this.selectedFiles || []);\n  }\n  public loading = false;\n  public notifications$ = this.notificationService.notificationsChanged;\n  private destroyed$ = new Subject<void>();\n\n  constructor(\n    private readonly iconService: IconService,\n    private readonly domSanitizer: DomSanitizer,\n    private readonly notificationService: NotificationService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public selectFiles(event: any) {\n    this.selectedFiles = event.target.files || [];\n\n    this.selectedFilesArray.forEach((file) => {\n      this.filePreviews.set(\n        file.name,\n        new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            resolve(this.domSanitizer.bypassSecurityTrustUrl(reader.result as string) as string);\n          };\n          reader.onerror = (e) => {\n            reject(e);\n          };\n\n          reader.readAsDataURL(file);\n        })\n      );\n    });\n  }\n\n  public uploadIcons() {\n    if (!this.selectedFiles) {\n      return;\n    }\n\n    const formData = new FormData();\n    for (const file of this.selectedFilesArray) {\n      formData.append('files', file);\n    }\n\n    this.iconService\n      .uploadIcons(formData)\n      .pipe(\n        tap(() => (this.loading = true)),\n        catchError((e) => throwError(e)),\n        finalize(() => {\n          this.addUploadNotification(this.selectedFilesArray.length);\n          this.loading = false;\n          this.filesEl.nativeElement.value = null;\n        })\n      )\n      .subscribe();\n  }\n\n  public trackFn(_: number, item: File) {\n    return item.name;\n  }\n\n  private addUploadNotification(iconsQty: number) {\n    this.notificationService.addNotification({\n      title: 'Icons Bulk Upload',\n      createdAt: new Date(),\n      body: `${iconsQty} icons have been uploaded.`,\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AdminRoutingModule } from './admin-routing.module';\nimport { AdminComponent } from './admin.component';\nimport { SharedModule } from '../../shared/shared.module';\nimport { IconsBulkUploadComponent } from './icons-bulk-upload/icons-bulk-upload.component';\nimport { IconManagementComponent } from './icon-management/icon-management.component';\nimport { AdminHomeComponent } from './admin-home/admin-home.component';\nimport { CategoryManagementComponent } from './category-management/category-management.component';\nimport { BackgroundManagementComponent } from './background-management/background-management.component';\nimport { BgBulkUploadComponent } from './bg-bulk-upload/bg-bulk-upload.component';\n\n@NgModule({\n  declarations: [\n    AdminComponent,\n    IconsBulkUploadComponent,\n    BgBulkUploadComponent,\n    IconManagementComponent,\n    AdminHomeComponent,\n    CategoryManagementComponent,\n    BackgroundManagementComponent,\n  ],\n  imports: [CommonModule, AdminRoutingModule, SharedModule],\n})\nexport class AdminModule {}\n"]}