(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"13Ib":function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",function(){return Pe});var i=n("ofXK"),c=n("tyNb"),o=n("LRne"),a=n("lJxs"),s=n("JIr8"),r=n("fXoL"),l=n("7dP1");let b=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){const n=this.authService.getSessionData(),i=this.authService.getToken();return n?Object(o.a)(!0):i?this.authService.verifyToken().pipe(Object(a.a)(e=>!!e||this.redirect(t.url)),Object(s.a)(()=>Object(o.a)(this.redirect(t.url)))):Object(o.a)(!1).pipe(Object(a.a)(()=>this.redirect(t.url)))}redirect(e){return this.router.navigate(["login"],{queryParams:{redirectUrl:e}}),!1}}return e.\u0275fac=function(t){return new(t||e)(r.Tb(l.a),r.Tb(c.b))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),d=(()=>{class e{constructor(e,t,n){this.authService=e,this.router=t,this.authGuard=n}canActivate(e,t){return this.authGuard.canActivate(e,t).pipe(Object(a.a)(e=>{var n,i;return e&&!!(null===(i=null===(n=this.authService.getSessionData())||void 0===n?void 0:n.user)||void 0===i?void 0:i.isAdmin)||this.redirect(t.url)}),Object(s.a)(()=>Object(o.a)(this.redirect(t.url))))}redirect(e){return this.router.navigate(["login"],{queryParams:{redirectUrl:e}}),!1}}return e.\u0275fac=function(t){return new(t||e)(r.Tb(l.a),r.Tb(c.b),r.Tb(b))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["bd-admin-home"]],decls:3,vars:0,consts:[[1,"d-flex","justify-content-center","align-items-center","my-5"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.Pb(1,"h5"),r.uc(2,"Please select a tool above"),r.Ob(),r.Ob())},styles:[""]}),e})();var g=n("2P7y"),h=n("FKbk");let p=(()=>{class e{constructor(e,t){this.authService=e,this.router=t,this.adminTabs=[{id:g.a.IconManagement,title:"Icon Management",url:"/admin/icons"},{id:g.a.IconsBulkUpload,title:"Icons Bulk Upload",url:"/admin/icons/upload"},{id:g.a.CategoryManagement,title:"Category Management",url:"/admin/categories"},{id:g.a.BackgroundManagement,title:"Background Management",url:"/admin/backgrounds"},{id:g.a.BgBulkUpload,title:"Backgrounds Bulk Upload",url:"/admin/backgrounds/upload"}],this.TabId=g.a}get username(){return this.authService.username||"ADMIN"}onTabChange(e){const t=this.adminTabs.find(t=>t.id===e);this.router.navigate([t.url])}toWebsite(){this.router.navigate([""])}logout(){this.authService.logout().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(l.a),r.Kb(c.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["bd-admin"]],decls:12,vars:3,consts:[[1,"position-fixed","w-100","header-wrapper"],[1,"d-flex","justify-content-end","align-items-center","p-2","border-bottom"],["routerLink","",1,"mr-auto","app-logo"],[1,"m-0","mr-3"],[1,"btn","btn-primary","mr-3",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"pt-3",3,"tabs","snap","tabChange"],[1,"d-flex","flex-column","content-wrapper"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.Pb(1,"div",1),r.Lb(2,"a",2),r.Pb(3,"h5",3),r.uc(4),r.Ob(),r.Pb(5,"button",4),r.Wb("click",function(){return t.toWebsite()}),r.uc(6,"Go to Website"),r.Ob(),r.Pb(7,"button",5),r.Wb("click",function(){return t.logout()}),r.uc(8,"Logout"),r.Ob(),r.Ob(),r.Pb(9,"bd-tabs",6),r.Wb("tabChange",function(e){return t.onTabChange(e)}),r.Ob(),r.Ob(),r.Pb(10,"div",7),r.Lb(11,"router-outlet"),r.Ob()),2&e&&(r.yb(4),r.wc("Welcome, ",t.username,""),r.yb(5),r.ec("tabs",t.adminTabs)("snap","bottom"))},directives:[c.e,h.a,c.g],styles:[".header-wrapper[_ngcontent-%COMP%]{background-color:#f8f5fe;border-bottom:1px solid #d3d3d3;z-index:10}.content-wrapper[_ngcontent-%COMP%]{padding-top:10rem}"]}),e})();var m=n("3Pt+"),O=n("XNiG"),f=n("VRyK"),y=n("cp0P"),P=n("5+tZ"),C=n("vkgz"),v=n("nYR2"),M=n("1G5W"),w=n("pLZG"),k=n("Kj3r"),_=n("/uUt"),x=n("lPiH"),j=n("CX13"),I=n("rC29"),A=n("jkwp"),F=n("2Vo4");let N=(()=>{class e{constructor(){this.DEFAULT_DURATION=4e3,this.notifications$=new F.a([])}get notificationsChanged(){return this.notifications$.asObservable()}addNotification(e){e.createdAt||(e.createdAt=new Date),this.notifications$.next([...this.notifications$.value,e]),setTimeout(()=>this.notifications$.next(this.notifications$.value.filter(t=>t.createdAt.getTime()!==e.createdAt.getTime())),e.duration||this.DEFAULT_DURATION)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=n("Dvla"),$=n("X2tk"),S=n("gA0Q"),D=n("ajRT");function L(e,t){if(1&e){const e=r.Qb();r.Nb(0),r.Pb(1,"tr",7),r.Pb(2,"td",8),r.Wb("click",function(){r.mc(e);const n=t.$implicit;return r.Yb(2).copyId(n.get("id").value)}),r.Pb(3,"small",9),r.uc(4),r.Ob(),r.Ob(),r.Pb(5,"td"),r.Lb(6,"img",10),r.Ob(),r.Pb(7,"td",11),r.Lb(8,"bd-text-input",12),r.Ob(),r.Pb(9,"td"),r.Lb(10,"textarea",13),r.Ob(),r.Pb(11,"td"),r.Lb(12,"bd-text-input",14),r.Ob(),r.Pb(13,"td"),r.Pb(14,"small"),r.uc(15),r.Zb(16,"date"),r.Ob(),r.Ob(),r.Pb(17,"td"),r.Pb(18,"small"),r.uc(19),r.Zb(20,"date"),r.Ob(),r.Ob(),r.Pb(21,"td",15),r.Pb(22,"button",16),r.Wb("click",function(){r.mc(e);const n=t.$implicit;return r.Yb(2).openDeleteModal(n.value)}),r.Ob(),r.Ob(),r.Ob(),r.Mb()}if(2&e){const e=t.$implicit,n=r.Yb(2);r.yb(1),r.ec("formGroup",e),r.yb(3),r.vc(e.get("id").value),r.yb(2),r.ec("src",e.get("url").value,r.nc),r.yb(2),r.ec("cssClass",n.getInputCss(e.get("name"))),r.yb(4),r.ec("cssClass",n.getInputCss(e.get("url"))),r.yb(3),r.vc(r.bc(16,7,e.get("createdAt").value,"short")),r.yb(4),r.vc(r.bc(20,10,e.get("updatedAt").value,"short")||"-")}}function E(e,t){if(1&e&&(r.Nb(0),r.Pb(1,"table",4),r.Pb(2,"thead"),r.Pb(3,"tr"),r.Pb(4,"th",5),r.uc(5,"#"),r.Ob(),r.Pb(6,"th",5),r.uc(7,"Background"),r.Ob(),r.Pb(8,"th",5),r.uc(9,"Name"),r.Ob(),r.Pb(10,"th",5),r.uc(11,"Tags "),r.Pb(12,"span"),r.uc(13,'(split with ",")'),r.Ob(),r.Ob(),r.Pb(14,"th",5),r.uc(15,"URL"),r.Ob(),r.Pb(16,"th",5),r.uc(17,"Created At"),r.Ob(),r.Pb(18,"th",5),r.uc(19,"Updated At"),r.Ob(),r.Lb(20,"th",5),r.Ob(),r.Ob(),r.Pb(21,"tbody"),r.sc(22,L,23,13,"ng-container",6),r.Ob(),r.Ob(),r.Mb()),2&e){const e=r.Yb();r.yb(22),r.ec("ngForOf",e.backgroundForms)}}function B(e,t){1&e&&r.Lb(0,"span",17)}function U(e,t){if(1&e){const e=r.Qb();r.Pb(0,"bd-modal",18),r.Wb("closed",function(){return r.mc(e),r.Yb().isDeleting=!1})("saved",function(){return r.mc(e),r.Yb().deleteBackground()}),r.Pb(1,"div",19),r.Pb(2,"p"),r.uc(3),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=r.Yb();r.yb(3),r.wc('Are you sure you want to delete background "',e.deleteBackgroundControl.value.name,'"?')}}let Y=(()=>{class e{constructor(e,t,n,i){this.backgroundService=e,this.notificationService=t,this.fb=n,this.clipboardService=i,this.loading=!1,this.form=new m.c([]),this.backgrounds$=this.fetchBackgrounds(),this.notifications$=this.notificationService.notificationsChanged,this.isDeleting=!1,this.deleteBackgroundControl=this.fb.control([null,m.p.required]),this.destroyed$=new O.a,this.COMPONENT_TITLE="Background Management"}get backgroundForms(){return this.form.controls}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getInputCss(e){return e.invalid?"w-100 text-small is-invalid":"w-100 text-small"}openDeleteModal(e){this.deleteBackgroundControl.setValue(e),this.isDeleting=!0}deleteBackground(){this.loading=!0,this.backgroundService.deleteBackground(this.deleteBackgroundControl.value.id).pipe(Object(P.a)(()=>this.backgrounds$),Object(C.a)(e=>{this.localDelete(this.deleteBackgroundControl.value.id,e),this.addNotification({name:this.deleteBackgroundControl.value.name},"deleted"),this.deleteBackgroundControl.reset()}),Object(v.a)(()=>this.loading=!1)).subscribe(),this.isDeleting=!1}copyId(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Id '${e}' has been copied to clipboard.`})}fetchBackgrounds(){return this.loading=!0,this.backgroundService.getBackgrounds(!0).pipe(Object(a.a)(e=>x.a.sortAlphaNumeric(e,"name")),Object(C.a)(e=>this.createForm(e)),Object(v.a)(()=>this.loading=!1))}createForm(e){this.form.clear(),e.forEach(t=>{const n=this.fb.group({id:[t.id,m.p.required],name:[t.name,m.p.required],tags:[t.tags],url:[t.url,m.p.required],createdAt:[t.createdAt,m.p.required],updatedAt:[t.updatedAt]});Object(f.a)(n.get("name").valueChanges.pipe(Object(a.a)(e=>({name:e}))),n.get("tags").valueChanges.pipe(Object(a.a)(e=>({tags:e.split(",").map(e=>e.trim()).filter(e=>!!e.length)}))),n.get("url").valueChanges.pipe(Object(a.a)(e=>({url:e})))).pipe(Object(M.a)(this.destroyed$),Object(w.a)(()=>(n.updateValueAndValidity(),n.valid)),Object(k.a)(I.a.DEFAULT_DEBOUNCE_TIME),Object(_.a)((e,t)=>{const n=Object.keys(t)[0],i=e[n],c=t[n];return Array.isArray(i)?j.a.isEqual(i,c):i===c}),Object(a.a)(e=>Object.assign({id:t.id},e)),Object(P.a)(e=>Object(y.a)([Object(o.a)(e),this.backgroundService.patchBackground(e)])),Object(C.a)(([t])=>{this.localUpdate(t,e);const n=e.find(e=>e.id===t.id);n&&this.addNotification(Object.assign(Object.assign({},n),t),"updated")})).subscribe(),this.form.push(n)})}localUpdate(e,t){const n=[...t],i=n.findIndex(t=>t.id===e.id);n[i]=Object.assign(Object.assign({},n[i]),e),this.backgrounds$=Object(o.a)(n)}localDelete(e,t){this.backgrounds$=Object(o.a)([...t.filter(t=>t.id!==e)]).pipe(Object(C.a)(()=>{const t=this.form.controls.findIndex(t=>t.value.id===e);t&&this.form.removeAt(t)}))}addNotification(e,t){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Background '${e.name}' has been ${t}.`})}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(A.a),r.Kb(N),r.Kb(m.d),r.Kb(T.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["bd-background-management"]],decls:6,vars:8,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Delete existing background",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"background-preview",3,"src"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","tags"],["formControlName","url",3,"cssClass"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"spinner"],["modalTitle","Delete existing background",3,"closed","saved"],[1,"container"]],template:function(e,t){if(1&e&&(r.sc(0,E,23,1,"ng-container",0),r.Zb(1,"async"),r.sc(2,B,1,0,"span",1),r.Lb(3,"bd-notifications",2),r.Zb(4,"async"),r.sc(5,U,4,1,"bd-modal",3)),2&e){let e=null;r.ec("ngIf",(null==(e=r.ac(1,4,t.backgrounds$))?null:e.length)&&!t.loading),r.yb(2),r.ec("ngIf",t.loading),r.yb(1),r.ec("items",r.ac(4,6,t.notifications$)),r.yb(2),r.ec("ngIf",t.isDeleting)}},directives:[i.m,$.a,i.l,m.m,m.h,S.a,m.l,m.g,m.b,D.a],pipes:[i.b,i.e],styles:["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .btn-add[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:-3.8rem;z-index:11}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:200px;max-width:200px;width:200px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),e})();var W=n("z6cu"),K=n("jhN1"),q=n("l5BB");const Z=["files"];function z(e,t){if(1&e&&(r.Pb(0,"tr"),r.Pb(1,"th",11),r.uc(2),r.Ob(),r.Pb(3,"td"),r.uc(4),r.Ob(),r.Pb(5,"td"),r.uc(6),r.Zb(7,"formatBytes"),r.Ob(),r.Pb(8,"td",12),r.Lb(9,"img",13),r.Zb(10,"async"),r.Ob(),r.Ob()),2&e){const e=t.$implicit,n=t.index,i=r.Yb(2);r.yb(2),r.vc(n+1),r.yb(2),r.vc(e.name),r.yb(2),r.vc(r.ac(7,4,e.size)),r.yb(3),r.ec("src",r.ac(10,6,i.filePreviews.get(e.name)),r.nc)}}function G(e,t){if(1&e){const e=r.Qb();r.Nb(0),r.Pb(1,"table",7),r.Pb(2,"thead"),r.Pb(3,"tr"),r.Pb(4,"th",8),r.uc(5,"#"),r.Ob(),r.Pb(6,"th",8),r.uc(7,"File Name"),r.Ob(),r.Pb(8,"th",8),r.uc(9,"File Size"),r.Ob(),r.Pb(10,"th",8),r.uc(11,"Preview"),r.Ob(),r.Ob(),r.Ob(),r.Pb(12,"tbody"),r.sc(13,z,11,8,"tr",9),r.Ob(),r.Ob(),r.Pb(14,"button",10),r.Wb("click",function(){return r.mc(e),r.Yb().uploadBackgrounds()}),r.uc(15,"Upload Backgrounds"),r.Ob(),r.Mb()}if(2&e){const e=r.Yb();r.yb(13),r.ec("ngForOf",e.selectedFilesArray)("ngForTrackBy",e.trackFn)}}function Q(e,t){1&e&&r.Lb(0,"span",14)}let V=(()=>{class e{constructor(e,t,n){this.backgroundService=e,this.domSanitizer=t,this.notificationService=n,this.filePreviews=new Map,this.loading=!1,this.notifications$=this.notificationService.notificationsChanged,this.destroyed$=new O.a}get selectedFilesArray(){return Array.from(this.selectedFiles||[])}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}selectFiles(e){this.selectedFiles=e.target.files||[],this.selectedFilesArray.forEach(e=>{this.filePreviews.set(e.name,new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{t(this.domSanitizer.bypassSecurityTrustUrl(i.result))},i.onerror=e=>{n(e)},i.readAsDataURL(e)}))})}uploadBackgrounds(){if(!this.selectedFiles)return;const e=new FormData;for(const t of this.selectedFilesArray)e.append("files",t);this.backgroundService.uploadBackgrounds(e).pipe(Object(C.a)(()=>this.loading=!0),Object(s.a)(e=>Object(W.a)(e)),Object(v.a)(()=>{this.addUploadNotification(this.selectedFilesArray.length),this.loading=!1,this.filesEl.nativeElement.value=null})).subscribe()}trackFn(e,t){return t.name}addUploadNotification(e){this.notificationService.addNotification({title:"Backgrounds Bulk Upload",createdAt:new Date,body:e+" backgrounds have been uploaded."})}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(A.a),r.Kb(K.b),r.Kb(N))},e.\u0275cmp=r.Eb({type:e,selectors:[["bd-bg-bulk-upload"]],viewQuery:function(e,t){if(1&e&&r.yc(Z,!0),2&e){let e;r.jc(e=r.Xb())&&(t.filesEl=e.first)}},decls:9,vars:5,consts:[[1,"d-flex","flex-column"],["type","file","multiple","","accept","image/*",1,"d-none",3,"change"],["files",""],[1,"btn","btn-menu","btn-icon","mb-2","icon-collection",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn",3,"click"],["scope","row"],[1,"text-center"],[1,"icon-preview",3,"src"],[1,"spinner"]],template:function(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",0),r.Pb(1,"input",1,2),r.Wb("change",function(e){return t.selectFiles(e)}),r.Ob(),r.Pb(3,"button",3),r.Wb("click",function(){return r.mc(e),r.kc(2).click()}),r.uc(4,"Select Files"),r.Ob(),r.sc(5,G,16,2,"ng-container",4),r.sc(6,Q,1,0,"span",5),r.Ob(),r.Lb(7,"bd-notifications",6),r.Zb(8,"async")}2&e&&(r.yb(5),r.ec("ngIf",(null==t.selectedFilesArray?null:t.selectedFilesArray.length)&&!t.loading),r.yb(1),r.ec("ngIf",t.loading),r.yb(1),r.ec("items",r.ac(8,3,t.notifications$)))},directives:[i.m,$.a,i.l],pipes:[i.b,q.a],styles:[".icon-preview[_ngcontent-%COMP%]{height:50px}"]}),e})();var R=n("xv8/");function X(e,t){if(1&e){const e=r.Qb();r.Nb(0),r.Pb(1,"tr",9),r.Pb(2,"td",10),r.Wb("click",function(){r.mc(e);const n=t.$implicit;return r.Yb(2).copyId(n.get("id").value)}),r.Pb(3,"small",11),r.uc(4),r.Ob(),r.Ob(),r.Pb(5,"td",12),r.Lb(6,"bd-text-input",13),r.Ob(),r.Pb(7,"td"),r.Lb(8,"bd-text-input",14),r.Ob(),r.Pb(9,"td"),r.uc(10),r.Zb(11,"date"),r.Ob(),r.Pb(12,"td"),r.uc(13),r.Zb(14,"date"),r.Ob(),r.Pb(15,"td",15),r.Pb(16,"button",16),r.Wb("click",function(){r.mc(e);const n=t.$implicit;return r.Yb(2).openDeleteModal(n.value)}),r.Ob(),r.Ob(),r.Ob(),r.Mb()}if(2&e){const e=t.$implicit,n=r.Yb(2);r.yb(1),r.ec("formGroup",e),r.yb(3),r.vc(e.get("id").value),r.yb(2),r.ec("cssClass",n.getInputCss(e.get("name"))),r.yb(2),r.ec("cssClass",n.getInputCss(e.get("description"))),r.yb(2),r.vc(r.bc(11,6,e.get("createdAt").value,"short")),r.yb(3),r.vc(r.bc(14,9,e.get("updatedAt").value,"short")||"-")}}function J(e,t){if(1&e&&(r.Nb(0),r.Pb(1,"table",6),r.Pb(2,"thead"),r.Pb(3,"tr"),r.Pb(4,"th",7),r.uc(5,"#"),r.Ob(),r.Pb(6,"th",7),r.uc(7,"Name"),r.Ob(),r.Pb(8,"th",7),r.uc(9,"Description"),r.Ob(),r.Pb(10,"th",7),r.uc(11,"Created At"),r.Ob(),r.Pb(12,"th",7),r.uc(13,"Updated At"),r.Ob(),r.Lb(14,"th",7),r.Ob(),r.Ob(),r.Pb(15,"tbody"),r.sc(16,X,17,12,"ng-container",8),r.Ob(),r.Ob(),r.Mb()),2&e){const e=r.Yb();r.yb(16),r.ec("ngForOf",e.categoryForms)}}function H(e,t){1&e&&r.Lb(0,"span",17)}function ee(e,t){if(1&e){const e=r.Qb();r.Pb(0,"bd-modal",18),r.Wb("closed",function(){return r.mc(e),r.Yb().cancelAddingCategory()})("saved",function(){return r.mc(e),r.Yb().addCategory()}),r.Pb(1,"form",9),r.Pb(2,"div",19),r.Pb(3,"label",20),r.uc(4,"Name"),r.Ob(),r.Lb(5,"bd-text-input",21),r.Ob(),r.Pb(6,"div",19),r.Pb(7,"label",22),r.uc(8,"Description"),r.Ob(),r.Lb(9,"bd-text-input",23),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=r.Yb();r.yb(1),r.ec("formGroup",e.newCategoryForm),r.yb(4),r.ec("cssClass",e.getInputCss(e.newCategoryForm.get("name"))),r.yb(4),r.ec("cssClass",e.getInputCss(e.newCategoryForm.get("description")))}}function te(e,t){if(1&e){const e=r.Qb();r.Pb(0,"bd-modal",24),r.Wb("closed",function(){return r.mc(e),r.Yb().isDeleting=!1})("saved",function(){return r.mc(e),r.Yb().deleteCategory()}),r.Pb(1,"div",25),r.Pb(2,"p"),r.uc(3),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=r.Yb();r.yb(3),r.wc('Are you sure you want to delete category "',e.deleteCategoryControl.value.name,'"?')}}let ne=(()=>{class e{constructor(e,t,n,i){this.categoryService=e,this.notificationService=t,this.fb=n,this.clipboardService=i,this.loading=!1,this.form=new m.c([]),this.categories$=this.fetchCategories(),this.notifications$=this.notificationService.notificationsChanged,this.isAddingCategory=!1,this.isDeleting=!1,this.newCategoryForm=this.fb.group({name:[null,m.p.required],description:[null]}),this.deleteCategoryControl=this.fb.control([null,m.p.required]),this.destroyed$=new O.a,this.COMPONENT_TITLE="Category Management"}get categoryForms(){return this.form.controls}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getInputCss(e){return e.invalid?"w-100 text-small is-invalid":"w-100 text-small"}cancelAddingCategory(){this.isAddingCategory=!1,this.newCategoryForm.reset()}addCategory(){this.newCategoryForm.invalid||(this.loading=!0,this.categoryService.addCategory(this.newCategoryForm.value).pipe(Object(P.a)(()=>this.fetchCategories()),Object(C.a)(()=>{this.addNotification({name:this.newCategoryForm.value.name},"added"),this.newCategoryForm.reset()})).subscribe(),this.isAddingCategory=!1)}openDeleteModal(e){this.deleteCategoryControl.setValue(e),this.isDeleting=!0}deleteCategory(){this.loading=!0,this.categoryService.deleteCategory(this.deleteCategoryControl.value.id).pipe(Object(P.a)(()=>this.fetchCategories()),Object(C.a)(()=>{this.addNotification({name:this.deleteCategoryControl.value.name},"deleted"),this.deleteCategoryControl.reset()})).subscribe(),this.isDeleting=!1}copyId(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Id '${e}' has been copied to clipboard.`})}fetchCategories(){return this.loading=!0,this.categoryService.getCategories(!0).pipe(Object(a.a)(e=>x.a.sortAlphaNumeric(e,"name")),Object(C.a)(e=>this.createForm(e)),Object(v.a)(()=>this.loading=!1))}createForm(e){this.form.clear(),e.forEach(t=>{const n=this.fb.group({id:[t.id,m.p.required],name:[t.name,m.p.required],description:[t.description,m.p.required],createdAt:[t.createdAt,m.p.required],updatedAt:[t.updatedAt]});Object(f.a)(n.get("name").valueChanges.pipe(Object(a.a)(e=>({name:e}))),n.get("description").valueChanges.pipe(Object(a.a)(e=>({description:e})))).pipe(Object(M.a)(this.destroyed$),Object(w.a)(()=>(n.updateValueAndValidity(),n.valid)),Object(k.a)(I.a.DEFAULT_DEBOUNCE_TIME),Object(_.a)((e,t)=>{const n=Object.keys(t)[0];return e[n]===t[n]}),Object(a.a)(e=>Object.assign({id:t.id},e)),Object(P.a)(e=>Object(y.a)([Object(o.a)(e),this.categoryService.patchCategory(e)])),Object(C.a)(([t])=>{const n=e.find(e=>e.id===t.id);n&&this.addNotification(Object.assign(Object.assign({},n),t),"updated"),this.categories$=this.fetchCategories()})).subscribe(),this.form.push(n)})}addNotification(e,t){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Category '${e.name}' has been ${t}.`})}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(R.a),r.Kb(N),r.Kb(m.d),r.Kb(T.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["bd-category-management"]],decls:9,vars:9,consts:[[1,"btn","btn-primary","btn-add",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Add new category",3,"closed","saved",4,"ngIf"],["modalTitle","Delete existing category",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","description",3,"cssClass"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"spinner"],["modalTitle","Add new category",3,"closed","saved"],[1,"form-group"],["for","name"],["inputId","name","formControlName","name","placeholder","Category name...",3,"cssClass"],["for","description"],["inputId","description","formControlName","description","placeholder","Category description...",3,"cssClass"],["modalTitle","Delete existing category",3,"closed","saved"],[1,"container"]],template:function(e,t){if(1&e&&(r.Pb(0,"button",0),r.Wb("click",function(){return t.isAddingCategory=!0}),r.uc(1,"Add Category"),r.Ob(),r.sc(2,J,17,1,"ng-container",1),r.Zb(3,"async"),r.sc(4,H,1,0,"span",2),r.Lb(5,"bd-notifications",3),r.Zb(6,"async"),r.sc(7,ee,10,3,"bd-modal",4),r.sc(8,te,4,1,"bd-modal",5)),2&e){let e=null;r.yb(2),r.ec("ngIf",(null==(e=r.ac(3,5,t.categories$))?null:e.length)&&!t.loading),r.yb(2),r.ec("ngIf",t.loading),r.yb(1),r.ec("items",r.ac(6,7,t.notifications$)),r.yb(2),r.ec("ngIf",t.isAddingCategory),r.yb(1),r.ec("ngIf",t.isDeleting)}},directives:[i.m,$.a,i.l,m.m,m.h,S.a,m.l,m.g,D.a,m.q],pipes:[i.b,i.e],styles:["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .btn-add[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:-3.8rem;z-index:11}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:200px;max-width:200px;width:200px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),e})();var ie=n("g2CB"),ce=n("ux41"),oe=n("4yaq");function ae(e,t){if(1&e&&(r.Pb(0,"div",21),r.Lb(1,"input",22),r.Ob()),2&e){const e=r.Yb().$implicit;r.yb(1),r.ec("value",e.value.isPremium)("checked",e.value.isPremium)}}function se(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",23),r.Pb(1,"input",24),r.Wb("change",function(){r.mc(e);const n=t.$implicit,i=r.Yb().$implicit;return r.Yb(2).toggleCategory(i.value,n,i)}),r.Ob(),r.Pb(2,"label",25),r.uc(3),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,n=r.Yb(),i=n.index,c=n.$implicit,o=r.Yb(2);r.yb(1),r.gc("id","category-checkbox-",i,"-",e.id,""),r.ec("value",e)("checked",o.hasCategory(c.value,e)),r.yb(1),r.gc("for","category-checkbox-",i,"-",e.id,""),r.yb(1),r.wc(" ",e.name," ")}}function re(e,t){if(1&e){const e=r.Qb();r.Nb(0),r.Pb(1,"tr",7),r.Pb(2,"td",8),r.Wb("click",function(){r.mc(e);const n=t.$implicit;return r.Yb(2).copyId(n.get("id").value)}),r.Pb(3,"small",9),r.uc(4),r.Ob(),r.Ob(),r.Pb(5,"td"),r.Lb(6,"img",10),r.Ob(),r.Pb(7,"td",11),r.Lb(8,"bd-text-input",12),r.Ob(),r.Pb(9,"td"),r.Lb(10,"textarea",13),r.Ob(),r.Pb(11,"td"),r.Lb(12,"bd-text-input",14),r.Ob(),r.Pb(13,"td",15),r.Lb(14,"bd-dropdown",16),r.Ob(),r.Pb(15,"td"),r.sc(16,ae,2,2,"div",17),r.Ob(),r.Pb(17,"td"),r.sc(18,se,4,7,"div",18),r.Zb(19,"async"),r.Ob(),r.Pb(20,"td"),r.Pb(21,"small"),r.uc(22),r.Zb(23,"date"),r.Ob(),r.Ob(),r.Pb(24,"td"),r.Pb(25,"small"),r.uc(26),r.Zb(27,"date"),r.Ob(),r.Ob(),r.Pb(28,"td",19),r.Pb(29,"button",20),r.Wb("click",function(){r.mc(e);const n=t.$implicit;return r.Yb(2).openDeleteModal(n.value)}),r.Ob(),r.Ob(),r.Ob(),r.Mb()}if(2&e){const e=t.$implicit,n=r.Yb(2);r.yb(1),r.ec("formGroup",e),r.yb(3),r.vc(e.get("id").value),r.yb(2),r.ec("src",e.get("url").value,r.nc),r.yb(2),r.ec("cssClass",n.getInputCss(e.get("name"))),r.yb(4),r.ec("cssClass",n.getInputCss(e.get("url"))),r.yb(2),r.ec("items",n.iconTypes)("cssClass",n.getInputCss(e.get("type"))),r.yb(2),r.ec("ngIf",e.value.type===n.IconType.Vector),r.yb(2),r.ec("ngForOf",r.ac(19,11,n.categories$)),r.yb(4),r.vc(r.bc(23,13,e.get("createdAt").value,"short")),r.yb(4),r.vc(r.bc(27,16,e.get("updatedAt").value,"short")||"-")}}function le(e,t){if(1&e&&(r.Nb(0),r.Pb(1,"table",4),r.Pb(2,"thead"),r.Pb(3,"tr"),r.Pb(4,"th",5),r.uc(5,"#"),r.Ob(),r.Pb(6,"th",5),r.uc(7,"Icon"),r.Ob(),r.Pb(8,"th",5),r.uc(9,"Name"),r.Ob(),r.Pb(10,"th",5),r.uc(11,"Tags "),r.Pb(12,"span"),r.uc(13,'(split with ",")'),r.Ob(),r.Ob(),r.Pb(14,"th",5),r.uc(15,"URL"),r.Ob(),r.Pb(16,"th",5),r.uc(17,"Type"),r.Ob(),r.Pb(18,"th",5),r.uc(19,"Premium"),r.Ob(),r.Pb(20,"th",5),r.uc(21,"Categories"),r.Ob(),r.Pb(22,"th",5),r.uc(23,"Created At"),r.Ob(),r.Pb(24,"th",5),r.uc(25,"Updated At"),r.Ob(),r.Lb(26,"th",5),r.Ob(),r.Ob(),r.Pb(27,"tbody"),r.sc(28,re,30,19,"ng-container",6),r.Ob(),r.Ob(),r.Mb()),2&e){const e=r.Yb();r.yb(28),r.ec("ngForOf",e.iconForms)}}function be(e,t){1&e&&r.Lb(0,"span",26)}function de(e,t){if(1&e){const e=r.Qb();r.Pb(0,"bd-modal",27),r.Wb("closed",function(){return r.mc(e),r.Yb().isDeleting=!1})("saved",function(){return r.mc(e),r.Yb().deleteIcon()}),r.Pb(1,"div",28),r.Pb(2,"p"),r.uc(3),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=r.Yb();r.yb(3),r.wc('Are you sure you want to delete icon "',e.deleteIconControl.value.name,'"?')}}let ue=(()=>{class e{constructor(e,t,n,i,c){this.iconService=e,this.categoryService=t,this.notificationService=n,this.fb=i,this.clipboardService=c,this.loading=!1,this.form=new m.c([]),this.icons$=this.fetchIcons(),this.IconType=ie.a,this.iconTypes=Object.entries(ie.a).map(([e,t])=>({id:t,name:e})),this.categories$=this.categoryService.getCategories(),this.notifications$=this.notificationService.notificationsChanged,this.isDeleting=!1,this.deleteIconControl=this.fb.control([null,m.p.required]),this.destroyed$=new O.a,this.COMPONENT_TITLE="Icon Management"}get iconForms(){return this.form.controls}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getIconType(e){switch(e){case ie.a.Raster:return"Raster";case ie.a.Vector:return"Vector";default:return"-"}}hasCategory(e,t){var n;return null===(n=e.categories)||void 0===n?void 0:n.some(e=>e.id===t.id)}toggleCategory(e,t,n){let i,c;return this.hasCategory(e,t)?(i={id:e.id,categories:e.categories.filter(e=>e.id!==t.id)},c=this.iconService.deleteIconCategory(e.id,t.id)):(i={id:e.id,categories:[...e.categories,t]},c=this.iconService.addIconCategory(e.id,t.id)),c.pipe(Object(C.a)(()=>n.get("categories").setValue(i.categories))).subscribe()}getInputCss(e){return e.invalid?"w-100 text-small is-invalid":"w-100 text-small"}openDeleteModal(e){this.deleteIconControl.setValue(e),this.isDeleting=!0}deleteIcon(){this.loading=!0,this.iconService.deleteIcon(this.deleteIconControl.value.id).pipe(Object(P.a)(()=>this.icons$),Object(C.a)(e=>{this.localDelete(this.deleteIconControl.value.id,e),this.addNotification({name:this.deleteIconControl.value.name},"deleted"),this.deleteIconControl.reset()}),Object(v.a)(()=>this.loading=!1)).subscribe(),this.isDeleting=!1}copyId(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Id '${e}' has been copied to clipboard.`})}fetchIcons(){return this.loading=!0,this.iconService.getIcons({},!0).pipe(Object(a.a)(e=>x.a.sortAlphaNumeric(e,"name")),Object(C.a)(e=>this.createForm(e)),Object(v.a)(()=>this.loading=!1))}createForm(e){this.form.clear(),e.forEach(t=>{const n=this.fb.group({id:[t.id,m.p.required],name:[t.name,m.p.required],tags:[t.tags],url:[t.url,m.p.required],type:[t.type,m.p.required],isPremium:[t.isPremium,m.p.required],categories:[t.categories],createdAt:[t.createdAt,m.p.required],updatedAt:[t.updatedAt]});Object(f.a)(n.get("name").valueChanges.pipe(Object(a.a)(e=>({name:e}))),n.get("tags").valueChanges.pipe(Object(a.a)(e=>({tags:e.split(",").map(e=>e.trim()).filter(e=>!!e.length)}))),n.get("url").valueChanges.pipe(Object(a.a)(e=>({url:e}))),n.get("type").valueChanges.pipe(Object(a.a)(e=>({type:e}))),n.get("isPremium").valueChanges.pipe(Object(a.a)(e=>({isPremium:e})))).pipe(Object(M.a)(this.destroyed$),Object(w.a)(()=>(n.updateValueAndValidity(),n.valid)),Object(k.a)(I.a.DEFAULT_DEBOUNCE_TIME),Object(_.a)((e,t)=>{const n=Object.keys(t)[0],i=e[n],c=t[n];return Array.isArray(i)?j.a.isEqual(i,c):i===c}),Object(a.a)(e=>Object.assign({id:t.id},e)),Object(P.a)(e=>Object(y.a)([Object(o.a)(e),this.iconService.patchIcon(e)])),Object(C.a)(([t])=>{this.localUpdate(t,e);const n=e.find(e=>e.id===t.id);n&&this.addNotification(Object.assign(Object.assign({},n),t),"updated")})).subscribe(),n.get("categories").valueChanges.pipe(Object(a.a)(e=>({categories:e}))).pipe(Object(M.a)(this.destroyed$),Object(a.a)(e=>Object.assign({id:t.id},e)),Object(C.a)(t=>{this.localUpdate(t,e);const n=e.find(e=>e.id===t.id);n&&this.addNotification(Object.assign(Object.assign({},n),t),"updated")})).subscribe(),this.form.push(n)})}localUpdate(e,t){const n=[...t],i=n.findIndex(t=>t.id===e.id);n[i]=Object.assign(Object.assign({},n[i]),e),this.icons$=Object(o.a)(n)}localDelete(e,t){this.icons$=Object(o.a)([...t.filter(t=>t.id!==e)]).pipe(Object(C.a)(()=>{const t=this.form.controls.findIndex(t=>t.value.id===e);t&&this.form.removeAt(t)}))}addNotification(e,t){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Icon '${e.name}' has been ${t}.`})}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(ce.a),r.Kb(R.a),r.Kb(N),r.Kb(m.d),r.Kb(T.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["bd-icon-management"]],decls:6,vars:8,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Delete existing icon",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"icon-preview",3,"src"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","tags"],["formControlName","url",3,"cssClass"],[1,"cell-type"],["formControlName","type","valueProp","id","labelProp","name",3,"items","cssClass"],["class","d-flex justify-content-center align-items-center checkbox-wrapper",4,"ngIf"],["class","d-flex align-items-center checkbox-wrapper",4,"ngFor","ngForOf"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"d-flex","justify-content-center","align-items-center","checkbox-wrapper"],["type","checkbox","formControlName","isPremium",1,"checkbox","mr-2",3,"value","checked"],[1,"d-flex","align-items-center","checkbox-wrapper"],["type","checkbox",1,"checkbox","mr-2",3,"value","checked","id","change"],[3,"for"],[1,"spinner"],["modalTitle","Delete existing icon",3,"closed","saved"],[1,"container"]],template:function(e,t){if(1&e&&(r.sc(0,le,29,1,"ng-container",0),r.Zb(1,"async"),r.sc(2,be,1,0,"span",1),r.Lb(3,"bd-notifications",2),r.Zb(4,"async"),r.sc(5,de,4,1,"bd-modal",3)),2&e){let e=null;r.ec("ngIf",(null==(e=r.ac(1,4,t.icons$))?null:e.length)&&!t.loading),r.yb(2),r.ec("ngIf",t.loading),r.yb(1),r.ec("items",r.ac(4,6,t.notifications$)),r.yb(2),r.ec("ngIf",t.isDeleting)}},directives:[i.m,$.a,i.l,m.m,m.h,S.a,m.l,m.g,m.b,oe.a,m.a,D.a],pipes:[i.b,i.e],styles:[".icon-preview[_ngcontent-%COMP%]{width:100px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{width:1.5rem;min-width:1.5rem;height:2rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#522699}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:60px;max-height:400px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:250px;max-width:250px;width:250px}.table[_ngcontent-%COMP%]   .cell-type[_ngcontent-%COMP%]{min-width:150px;max-width:150px;width:150px}.table[_ngcontent-%COMP%]   .cell-type[_ngcontent-%COMP%]     .dropdown-toggle{min-width:auto}.table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}.table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),e})();const ge=["files"];function he(e,t){if(1&e&&(r.Pb(0,"tr"),r.Pb(1,"th",11),r.uc(2),r.Ob(),r.Pb(3,"td"),r.uc(4),r.Ob(),r.Pb(5,"td"),r.uc(6),r.Zb(7,"formatBytes"),r.Ob(),r.Pb(8,"td",12),r.Lb(9,"img",13),r.Zb(10,"async"),r.Ob(),r.Ob()),2&e){const e=t.$implicit,n=t.index,i=r.Yb(2);r.yb(2),r.vc(n+1),r.yb(2),r.vc(e.name),r.yb(2),r.vc(r.ac(7,4,e.size)),r.yb(3),r.ec("src",r.ac(10,6,i.filePreviews.get(e.name)),r.nc)}}function pe(e,t){if(1&e){const e=r.Qb();r.Nb(0),r.Pb(1,"table",7),r.Pb(2,"thead"),r.Pb(3,"tr"),r.Pb(4,"th",8),r.uc(5,"#"),r.Ob(),r.Pb(6,"th",8),r.uc(7,"File Name"),r.Ob(),r.Pb(8,"th",8),r.uc(9,"File Size"),r.Ob(),r.Pb(10,"th",8),r.uc(11,"Preview"),r.Ob(),r.Ob(),r.Ob(),r.Pb(12,"tbody"),r.sc(13,he,11,8,"tr",9),r.Ob(),r.Ob(),r.Pb(14,"button",10),r.Wb("click",function(){return r.mc(e),r.Yb().uploadIcons()}),r.uc(15,"Upload Icons"),r.Ob(),r.Mb()}if(2&e){const e=r.Yb();r.yb(13),r.ec("ngForOf",e.selectedFilesArray)("ngForTrackBy",e.trackFn)}}function me(e,t){1&e&&r.Lb(0,"span",14)}const Oe=[{path:"",component:p,canActivate:[d],children:[{path:"",component:u},{path:"icons",children:[{path:"upload",component:(()=>{class e{constructor(e,t,n){this.iconService=e,this.domSanitizer=t,this.notificationService=n,this.filePreviews=new Map,this.loading=!1,this.notifications$=this.notificationService.notificationsChanged,this.destroyed$=new O.a}get selectedFilesArray(){return Array.from(this.selectedFiles||[])}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}selectFiles(e){this.selectedFiles=e.target.files||[],this.selectedFilesArray.forEach(e=>{this.filePreviews.set(e.name,new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{t(this.domSanitizer.bypassSecurityTrustUrl(i.result))},i.onerror=e=>{n(e)},i.readAsDataURL(e)}))})}uploadIcons(){if(!this.selectedFiles)return;const e=new FormData;for(const t of this.selectedFilesArray)e.append("files",t);this.iconService.uploadIcons(e).pipe(Object(C.a)(()=>this.loading=!0),Object(s.a)(e=>Object(W.a)(e)),Object(v.a)(()=>{this.addUploadNotification(this.selectedFilesArray.length),this.loading=!1,this.filesEl.nativeElement.value=null})).subscribe()}trackFn(e,t){return t.name}addUploadNotification(e){this.notificationService.addNotification({title:"Icons Bulk Upload",createdAt:new Date,body:e+" icons have been uploaded."})}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(ce.a),r.Kb(K.b),r.Kb(N))},e.\u0275cmp=r.Eb({type:e,selectors:[["bd-icons-bulk-upload"]],viewQuery:function(e,t){if(1&e&&r.yc(ge,!0),2&e){let e;r.jc(e=r.Xb())&&(t.filesEl=e.first)}},decls:9,vars:5,consts:[[1,"d-flex","flex-column"],["type","file","multiple","","accept","image/*",1,"d-none",3,"change"],["files",""],[1,"btn","btn-menu","btn-icon","mb-2","icon-collection",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn",3,"click"],["scope","row"],[1,"text-center"],[1,"icon-preview",3,"src"],[1,"spinner"]],template:function(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",0),r.Pb(1,"input",1,2),r.Wb("change",function(e){return t.selectFiles(e)}),r.Ob(),r.Pb(3,"button",3),r.Wb("click",function(){return r.mc(e),r.kc(2).click()}),r.uc(4,"Select Files"),r.Ob(),r.sc(5,pe,16,2,"ng-container",4),r.sc(6,me,1,0,"span",5),r.Ob(),r.Lb(7,"bd-notifications",6),r.Zb(8,"async")}2&e&&(r.yb(5),r.ec("ngIf",(null==t.selectedFilesArray?null:t.selectedFilesArray.length)&&!t.loading),r.yb(1),r.ec("ngIf",t.loading),r.yb(1),r.ec("items",r.ac(8,3,t.notifications$)))},directives:[i.m,$.a,i.l],pipes:[i.b,q.a],styles:[".icon-preview[_ngcontent-%COMP%]{height:50px}"]}),e})()},{path:"",component:ue}]},{path:"categories",component:ne},{path:"backgrounds",children:[{path:"upload",component:V},{path:"",component:Y}]}]}];let fe=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[c.f.forChild(Oe)],c.f]}),e})();var ye=n("PCNd");let Pe=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[i.c,fe,ye.a]]}),e})()}}]);
//# sourceMappingURL=6-es2015.c50baad57038cde69923.js.map