!function(){function e(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var c=0,o=function(){};return{s:o,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,c=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(s){c=!0,o=s}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"13Ib":function(i,c,a){"use strict";a.r(c),a.d(c,"AdminModule",function(){return Ee});var s,l,b,u,d,f=a("ofXK"),g=a("tyNb"),p=a("LRne"),h=a("lJxs"),m=a("JIr8"),v=a("fXoL"),O=a("7dP1"),y=((b=function(){function e(t,n){o(this,e),this.authService=t,this.router=n}return r(e,[{key:"canActivate",value:function(e,t){var n=this,i=this.authService.getSessionData(),c=this.authService.getToken();return i?Object(p.a)(!0):c?this.authService.verifyToken().pipe(Object(h.a)(function(e){return!!e||n.redirect(t.url)}),Object(m.a)(function(){return Object(p.a)(n.redirect(t.url))})):Object(p.a)(!1).pipe(Object(h.a)(function(){return n.redirect(t.url)}))}},{key:"redirect",value:function(e){return this.router.navigate(["login"],{queryParams:{redirectUrl:e}}),!1}}]),e}()).\u0275fac=function(e){return new(e||b)(v.Tb(O.a),v.Tb(g.b))},b.\u0275prov=v.Gb({token:b,factory:b.\u0275fac,providedIn:"root"}),b),P=((l=function(){function e(t,n,i){o(this,e),this.authService=t,this.router=n,this.authGuard=i}return r(e,[{key:"canActivate",value:function(e,t){var n=this;return this.authGuard.canActivate(e,t).pipe(Object(h.a)(function(e){var i,c;return e&&!!(null===(c=null===(i=n.authService.getSessionData())||void 0===i?void 0:i.user)||void 0===c?void 0:c.isAdmin)||n.redirect(t.url)}),Object(m.a)(function(){return Object(p.a)(n.redirect(t.url))}))}},{key:"redirect",value:function(e){return this.router.navigate(["login"],{queryParams:{redirectUrl:e}}),!1}}]),e}()).\u0275fac=function(e){return new(e||l)(v.Tb(O.a),v.Tb(g.b),v.Tb(y))},l.\u0275prov=v.Gb({token:l,factory:l.\u0275fac,providedIn:"root"}),l),C=((s=function(){function e(){o(this,e)}return r(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=v.Eb({type:s,selectors:[["bd-admin-home"]],decls:3,vars:0,consts:[[1,"d-flex","justify-content-center","align-items-center","my-5"]],template:function(e,t){1&e&&(v.Pb(0,"div",0),v.Pb(1,"h5"),v.uc(2,"Please select a tool above"),v.Ob(),v.Ob())},styles:[""]}),s),k=a("2P7y"),w=a("FKbk"),M=((u=function(){function e(t,n){o(this,e),this.authService=t,this.router=n,this.adminTabs=[{id:k.a.IconManagement,title:"Icon Management",url:"/admin/icons"},{id:k.a.IconsBulkUpload,title:"Icons Bulk Upload",url:"/admin/icons/upload"},{id:k.a.CategoryManagement,title:"Category Management",url:"/admin/categories"},{id:k.a.BackgroundManagement,title:"Background Management",url:"/admin/backgrounds"},{id:k.a.BgBulkUpload,title:"Backgrounds Bulk Upload",url:"/admin/backgrounds/upload"}],this.TabId=k.a}return r(e,[{key:"onTabChange",value:function(e){var t=this.adminTabs.find(function(t){return t.id===e});this.router.navigate([t.url])}},{key:"toWebsite",value:function(){this.router.navigate([""])}},{key:"logout",value:function(){this.authService.logout().subscribe()}},{key:"username",get:function(){return this.authService.username||"ADMIN"}}]),e}()).\u0275fac=function(e){return new(e||u)(v.Kb(O.a),v.Kb(g.b))},u.\u0275cmp=v.Eb({type:u,selectors:[["bd-admin"]],decls:12,vars:3,consts:[[1,"position-fixed","w-100","header-wrapper"],[1,"d-flex","justify-content-end","align-items-center","p-2","border-bottom"],["routerLink","",1,"mr-auto","app-logo"],[1,"m-0","mr-3"],[1,"btn","btn-primary","mr-3",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"pt-3",3,"tabs","snap","tabChange"],[1,"d-flex","flex-column","content-wrapper"]],template:function(e,t){1&e&&(v.Pb(0,"div",0),v.Pb(1,"div",1),v.Lb(2,"a",2),v.Pb(3,"h5",3),v.uc(4),v.Ob(),v.Pb(5,"button",4),v.Wb("click",function(){return t.toWebsite()}),v.uc(6,"Go to Website"),v.Ob(),v.Pb(7,"button",5),v.Wb("click",function(){return t.logout()}),v.uc(8,"Logout"),v.Ob(),v.Ob(),v.Pb(9,"bd-tabs",6),v.Wb("tabChange",function(e){return t.onTabChange(e)}),v.Ob(),v.Ob(),v.Pb(10,"div",7),v.Lb(11,"router-outlet"),v.Ob()),2&e&&(v.yb(4),v.wc("Welcome, ",t.username,""),v.yb(5),v.ec("tabs",t.adminTabs)("snap","bottom"))},directives:[g.e,w.a,g.g],styles:[".header-wrapper[_ngcontent-%COMP%]{background-color:#f8f5fe;border-bottom:1px solid #d3d3d3;z-index:10}.content-wrapper[_ngcontent-%COMP%]{padding-top:10rem}"]}),u),j=a("3Pt+"),x=a("XNiG"),_=a("VRyK"),I=a("cp0P"),A=a("5+tZ"),F=a("vkgz"),N=a("nYR2"),T=a("1G5W"),S=a("pLZG"),$=a("Kj3r"),D=a("/uUt"),E=a("lPiH"),L=a("CX13"),B=a("rC29"),U=a("jkwp"),Y=a("2Vo4"),W=((d=function(){function e(){o(this,e),this.DEFAULT_DURATION=4e3,this.notifications$=new Y.a([])}return r(e,[{key:"addNotification",value:function(e){var t=this;e.createdAt||(e.createdAt=new Date),this.notifications$.next([].concat(n(this.notifications$.value),[e])),setTimeout(function(){return t.notifications$.next(t.notifications$.value.filter(function(t){return t.createdAt.getTime()!==e.createdAt.getTime()}))},e.duration||this.DEFAULT_DURATION)}},{key:"notificationsChanged",get:function(){return this.notifications$.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||d)},d.\u0275prov=v.Gb({token:d,factory:d.\u0275fac,providedIn:"root"}),d),K=a("Dvla"),q=a("X2tk"),Z=a("gA0Q"),z=a("ajRT");function G(e,t){if(1&e){var n=v.Qb();v.Nb(0),v.Pb(1,"tr",7),v.Pb(2,"td",8),v.Wb("click",function(){v.mc(n);var e=t.$implicit;return v.Yb(2).copyId(e.get("id").value)}),v.Pb(3,"small",9),v.uc(4),v.Ob(),v.Ob(),v.Pb(5,"td"),v.Lb(6,"img",10),v.Ob(),v.Pb(7,"td",11),v.Lb(8,"bd-text-input",12),v.Ob(),v.Pb(9,"td"),v.Lb(10,"textarea",13),v.Ob(),v.Pb(11,"td"),v.Lb(12,"bd-text-input",14),v.Ob(),v.Pb(13,"td"),v.Pb(14,"small"),v.uc(15),v.Zb(16,"date"),v.Ob(),v.Ob(),v.Pb(17,"td"),v.Pb(18,"small"),v.uc(19),v.Zb(20,"date"),v.Ob(),v.Ob(),v.Pb(21,"td",15),v.Pb(22,"button",16),v.Wb("click",function(){v.mc(n);var e=t.$implicit;return v.Yb(2).openDeleteModal(e.value)}),v.Ob(),v.Ob(),v.Ob(),v.Mb()}if(2&e){var i=t.$implicit,c=v.Yb(2);v.yb(1),v.ec("formGroup",i),v.yb(3),v.vc(i.get("id").value),v.yb(2),v.ec("src",i.get("url").value,v.nc),v.yb(2),v.ec("cssClass",c.getInputCss(i.get("name"))),v.yb(4),v.ec("cssClass",c.getInputCss(i.get("url"))),v.yb(3),v.vc(v.bc(16,7,i.get("createdAt").value,"short")),v.yb(4),v.vc(v.bc(20,10,i.get("updatedAt").value,"short")||"-")}}function Q(e,t){if(1&e&&(v.Nb(0),v.Pb(1,"table",4),v.Pb(2,"thead"),v.Pb(3,"tr"),v.Pb(4,"th",5),v.uc(5,"#"),v.Ob(),v.Pb(6,"th",5),v.uc(7,"Background"),v.Ob(),v.Pb(8,"th",5),v.uc(9,"Name"),v.Ob(),v.Pb(10,"th",5),v.uc(11,"Tags "),v.Pb(12,"span"),v.uc(13,'(split with ",")'),v.Ob(),v.Ob(),v.Pb(14,"th",5),v.uc(15,"URL"),v.Ob(),v.Pb(16,"th",5),v.uc(17,"Created At"),v.Ob(),v.Pb(18,"th",5),v.uc(19,"Updated At"),v.Ob(),v.Lb(20,"th",5),v.Ob(),v.Ob(),v.Pb(21,"tbody"),v.sc(22,G,23,13,"ng-container",6),v.Ob(),v.Ob(),v.Mb()),2&e){var n=v.Yb();v.yb(22),v.ec("ngForOf",n.backgroundForms)}}function V(e,t){1&e&&v.Lb(0,"span",17)}function R(e,t){if(1&e){var n=v.Qb();v.Pb(0,"bd-modal",18),v.Wb("closed",function(){return v.mc(n),v.Yb().isDeleting=!1})("saved",function(){return v.mc(n),v.Yb().deleteBackground()}),v.Pb(1,"div",19),v.Pb(2,"p"),v.uc(3),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=v.Yb();v.yb(3),v.wc('Are you sure you want to delete background "',i.deleteBackgroundControl.value.name,'"?')}}var X,J=((X=function(){function e(t,n,i,c){o(this,e),this.backgroundService=t,this.notificationService=n,this.fb=i,this.clipboardService=c,this.loading=!1,this.form=new j.c([]),this.backgrounds$=this.fetchBackgrounds(),this.notifications$=this.notificationService.notificationsChanged,this.isDeleting=!1,this.deleteBackgroundControl=this.fb.control([null,j.p.required]),this.destroyed$=new x.a,this.COMPONENT_TITLE="Background Management"}return r(e,[{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"getInputCss",value:function(e){return e.invalid?"w-100 text-small is-invalid":"w-100 text-small"}},{key:"openDeleteModal",value:function(e){this.deleteBackgroundControl.setValue(e),this.isDeleting=!0}},{key:"deleteBackground",value:function(){var e=this;this.loading=!0,this.backgroundService.deleteBackground(this.deleteBackgroundControl.value.id).pipe(Object(A.a)(function(){return e.backgrounds$}),Object(F.a)(function(t){e.localDelete(e.deleteBackgroundControl.value.id,t),e.addNotification({name:e.deleteBackgroundControl.value.name},"deleted"),e.deleteBackgroundControl.reset()}),Object(N.a)(function(){return e.loading=!1})).subscribe(),this.isDeleting=!1}},{key:"copyId",value:function(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:"Id '".concat(e,"' has been copied to clipboard.")})}},{key:"fetchBackgrounds",value:function(){var e=this;return this.loading=!0,this.backgroundService.getBackgrounds(!0).pipe(Object(h.a)(function(e){return E.a.sortAlphaNumeric(e,"name")}),Object(F.a)(function(t){return e.createForm(t)}),Object(N.a)(function(){return e.loading=!1}))}},{key:"createForm",value:function(e){var n=this;this.form.clear(),e.forEach(function(i){var c=n.fb.group({id:[i.id,j.p.required],name:[i.name,j.p.required],tags:[i.tags],url:[i.url,j.p.required],createdAt:[i.createdAt,j.p.required],updatedAt:[i.updatedAt]});Object(_.a)(c.get("name").valueChanges.pipe(Object(h.a)(function(e){return{name:e}})),c.get("tags").valueChanges.pipe(Object(h.a)(function(e){return{tags:e.split(",").map(function(e){return e.trim()}).filter(function(e){return!!e.length})}})),c.get("url").valueChanges.pipe(Object(h.a)(function(e){return{url:e}}))).pipe(Object(T.a)(n.destroyed$),Object(S.a)(function(){return c.updateValueAndValidity(),c.valid}),Object($.a)(B.a.DEFAULT_DEBOUNCE_TIME),Object(D.a)(function(e,t){var n=Object.keys(t)[0],i=e[n],c=t[n];return Array.isArray(i)?L.a.isEqual(i,c):i===c}),Object(h.a)(function(e){return Object.assign({id:i.id},e)}),Object(A.a)(function(e){return Object(I.a)([Object(p.a)(e),n.backgroundService.patchBackground(e)])}),Object(F.a)(function(i){var c=t(i,1)[0];n.localUpdate(c,e);var o=e.find(function(e){return e.id===c.id});o&&n.addNotification(Object.assign(Object.assign({},o),c),"updated")})).subscribe(),n.form.push(c)})}},{key:"localUpdate",value:function(e,t){var i=n(t),c=i.findIndex(function(t){return t.id===e.id});i[c]=Object.assign(Object.assign({},i[c]),e),this.backgrounds$=Object(p.a)(i)}},{key:"localDelete",value:function(e,t){var i=this;this.backgrounds$=Object(p.a)(n(t.filter(function(t){return t.id!==e}))).pipe(Object(F.a)(function(){var t=i.form.controls.findIndex(function(t){return t.value.id===e});t&&i.form.removeAt(t)}))}},{key:"addNotification",value:function(e,t){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:"Background '".concat(e.name,"' has been ").concat(t,".")})}},{key:"backgroundForms",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(e){return new(e||X)(v.Kb(U.a),v.Kb(W),v.Kb(j.d),v.Kb(K.b))},X.\u0275cmp=v.Eb({type:X,selectors:[["bd-background-management"]],decls:6,vars:8,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Delete existing background",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"background-preview",3,"src"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","tags"],["formControlName","url",3,"cssClass"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"spinner"],["modalTitle","Delete existing background",3,"closed","saved"],[1,"container"]],template:function(e,t){var n;(1&e&&(v.sc(0,Q,23,1,"ng-container",0),v.Zb(1,"async"),v.sc(2,V,1,0,"span",1),v.Lb(3,"bd-notifications",2),v.Zb(4,"async"),v.sc(5,R,4,1,"bd-modal",3)),2&e)&&(v.ec("ngIf",(null==(n=v.ac(1,4,t.backgrounds$))?null:n.length)&&!t.loading),v.yb(2),v.ec("ngIf",t.loading),v.yb(1),v.ec("items",v.ac(4,6,t.notifications$)),v.yb(2),v.ec("ngIf",t.isDeleting))},directives:[f.m,q.a,f.l,j.m,j.h,Z.a,j.l,j.g,j.b,z.a],pipes:[f.b,f.e],styles:["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .btn-add[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:-3.8rem;z-index:11}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:200px;max-width:200px;width:200px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),X),H=a("z6cu"),ee=a("jhN1"),te=a("l5BB"),ne=["files"];function ie(e,t){if(1&e&&(v.Pb(0,"tr"),v.Pb(1,"th",11),v.uc(2),v.Ob(),v.Pb(3,"td"),v.uc(4),v.Ob(),v.Pb(5,"td"),v.uc(6),v.Zb(7,"formatBytes"),v.Ob(),v.Pb(8,"td",12),v.Lb(9,"img",13),v.Zb(10,"async"),v.Ob(),v.Ob()),2&e){var n=t.$implicit,i=t.index,c=v.Yb(2);v.yb(2),v.vc(i+1),v.yb(2),v.vc(n.name),v.yb(2),v.vc(v.ac(7,4,n.size)),v.yb(3),v.ec("src",v.ac(10,6,c.filePreviews.get(n.name)),v.nc)}}function ce(e,t){if(1&e){var n=v.Qb();v.Nb(0),v.Pb(1,"table",7),v.Pb(2,"thead"),v.Pb(3,"tr"),v.Pb(4,"th",8),v.uc(5,"#"),v.Ob(),v.Pb(6,"th",8),v.uc(7,"File Name"),v.Ob(),v.Pb(8,"th",8),v.uc(9,"File Size"),v.Ob(),v.Pb(10,"th",8),v.uc(11,"Preview"),v.Ob(),v.Ob(),v.Ob(),v.Pb(12,"tbody"),v.sc(13,ie,11,8,"tr",9),v.Ob(),v.Ob(),v.Pb(14,"button",10),v.Wb("click",function(){return v.mc(n),v.Yb().uploadBackgrounds()}),v.uc(15,"Upload Backgrounds"),v.Ob(),v.Mb()}if(2&e){var i=v.Yb();v.yb(13),v.ec("ngForOf",i.selectedFilesArray)("ngForTrackBy",i.trackFn)}}function oe(e,t){1&e&&v.Lb(0,"span",14)}var ae,re=((ae=function(){function t(e,n,i){o(this,t),this.backgroundService=e,this.domSanitizer=n,this.notificationService=i,this.filePreviews=new Map,this.loading=!1,this.notifications$=this.notificationService.notificationsChanged,this.destroyed$=new x.a}return r(t,[{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"selectFiles",value:function(e){var t=this;this.selectedFiles=e.target.files||[],this.selectedFilesArray.forEach(function(e){t.filePreviews.set(e.name,new Promise(function(n,i){var c=new FileReader;c.onload=function(){n(t.domSanitizer.bypassSecurityTrustUrl(c.result))},c.onerror=function(e){i(e)},c.readAsDataURL(e)}))})}},{key:"uploadBackgrounds",value:function(){var t=this;if(this.selectedFiles){var n,i=new FormData,c=e(this.selectedFilesArray);try{for(c.s();!(n=c.n()).done;){var o=n.value;i.append("files",o)}}catch(a){c.e(a)}finally{c.f()}this.backgroundService.uploadBackgrounds(i).pipe(Object(F.a)(function(){return t.loading=!0}),Object(m.a)(function(e){return Object(H.a)(e)}),Object(N.a)(function(){t.addUploadNotification(t.selectedFilesArray.length),t.loading=!1,t.filesEl.nativeElement.value=null})).subscribe()}}},{key:"trackFn",value:function(e,t){return t.name}},{key:"addUploadNotification",value:function(e){this.notificationService.addNotification({title:"Backgrounds Bulk Upload",createdAt:new Date,body:e+" backgrounds have been uploaded."})}},{key:"selectedFilesArray",get:function(){return Array.from(this.selectedFiles||[])}}]),t}()).\u0275fac=function(e){return new(e||ae)(v.Kb(U.a),v.Kb(ee.b),v.Kb(W))},ae.\u0275cmp=v.Eb({type:ae,selectors:[["bd-bg-bulk-upload"]],viewQuery:function(e,t){var n;1&e&&v.yc(ne,!0),2&e&&v.jc(n=v.Xb())&&(t.filesEl=n.first)},decls:9,vars:5,consts:[[1,"d-flex","flex-column"],["type","file","multiple","","accept","image/*",1,"d-none",3,"change"],["files",""],[1,"btn","btn-menu","btn-icon","mb-2","icon-collection",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn",3,"click"],["scope","row"],[1,"text-center"],[1,"icon-preview",3,"src"],[1,"spinner"]],template:function(e,t){if(1&e){var n=v.Qb();v.Pb(0,"div",0),v.Pb(1,"input",1,2),v.Wb("change",function(e){return t.selectFiles(e)}),v.Ob(),v.Pb(3,"button",3),v.Wb("click",function(){return v.mc(n),v.kc(2).click()}),v.uc(4,"Select Files"),v.Ob(),v.sc(5,ce,16,2,"ng-container",4),v.sc(6,oe,1,0,"span",5),v.Ob(),v.Lb(7,"bd-notifications",6),v.Zb(8,"async")}2&e&&(v.yb(5),v.ec("ngIf",(null==t.selectedFilesArray?null:t.selectedFilesArray.length)&&!t.loading),v.yb(1),v.ec("ngIf",t.loading),v.yb(1),v.ec("items",v.ac(8,3,t.notifications$)))},directives:[f.m,q.a,f.l],pipes:[f.b,te.a],styles:[".icon-preview[_ngcontent-%COMP%]{height:50px}"]}),ae),se=a("xv8/");function le(e,t){if(1&e){var n=v.Qb();v.Nb(0),v.Pb(1,"tr",9),v.Pb(2,"td",10),v.Wb("click",function(){v.mc(n);var e=t.$implicit;return v.Yb(2).copyId(e.get("id").value)}),v.Pb(3,"small",11),v.uc(4),v.Ob(),v.Ob(),v.Pb(5,"td",12),v.Lb(6,"bd-text-input",13),v.Ob(),v.Pb(7,"td"),v.Lb(8,"bd-text-input",14),v.Ob(),v.Pb(9,"td"),v.uc(10),v.Zb(11,"date"),v.Ob(),v.Pb(12,"td"),v.uc(13),v.Zb(14,"date"),v.Ob(),v.Pb(15,"td",15),v.Pb(16,"button",16),v.Wb("click",function(){v.mc(n);var e=t.$implicit;return v.Yb(2).openDeleteModal(e.value)}),v.Ob(),v.Ob(),v.Ob(),v.Mb()}if(2&e){var i=t.$implicit,c=v.Yb(2);v.yb(1),v.ec("formGroup",i),v.yb(3),v.vc(i.get("id").value),v.yb(2),v.ec("cssClass",c.getInputCss(i.get("name"))),v.yb(2),v.ec("cssClass",c.getInputCss(i.get("description"))),v.yb(2),v.vc(v.bc(11,6,i.get("createdAt").value,"short")),v.yb(3),v.vc(v.bc(14,9,i.get("updatedAt").value,"short")||"-")}}function be(e,t){if(1&e&&(v.Nb(0),v.Pb(1,"table",6),v.Pb(2,"thead"),v.Pb(3,"tr"),v.Pb(4,"th",7),v.uc(5,"#"),v.Ob(),v.Pb(6,"th",7),v.uc(7,"Name"),v.Ob(),v.Pb(8,"th",7),v.uc(9,"Description"),v.Ob(),v.Pb(10,"th",7),v.uc(11,"Created At"),v.Ob(),v.Pb(12,"th",7),v.uc(13,"Updated At"),v.Ob(),v.Lb(14,"th",7),v.Ob(),v.Ob(),v.Pb(15,"tbody"),v.sc(16,le,17,12,"ng-container",8),v.Ob(),v.Ob(),v.Mb()),2&e){var n=v.Yb();v.yb(16),v.ec("ngForOf",n.categoryForms)}}function ue(e,t){1&e&&v.Lb(0,"span",17)}function de(e,t){if(1&e){var n=v.Qb();v.Pb(0,"bd-modal",18),v.Wb("closed",function(){return v.mc(n),v.Yb().cancelAddingCategory()})("saved",function(){return v.mc(n),v.Yb().addCategory()}),v.Pb(1,"form",9),v.Pb(2,"div",19),v.Pb(3,"label",20),v.uc(4,"Name"),v.Ob(),v.Lb(5,"bd-text-input",21),v.Ob(),v.Pb(6,"div",19),v.Pb(7,"label",22),v.uc(8,"Description"),v.Ob(),v.Lb(9,"bd-text-input",23),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=v.Yb();v.yb(1),v.ec("formGroup",i.newCategoryForm),v.yb(4),v.ec("cssClass",i.getInputCss(i.newCategoryForm.get("name"))),v.yb(4),v.ec("cssClass",i.getInputCss(i.newCategoryForm.get("description")))}}function fe(e,t){if(1&e){var n=v.Qb();v.Pb(0,"bd-modal",24),v.Wb("closed",function(){return v.mc(n),v.Yb().isDeleting=!1})("saved",function(){return v.mc(n),v.Yb().deleteCategory()}),v.Pb(1,"div",25),v.Pb(2,"p"),v.uc(3),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=v.Yb();v.yb(3),v.wc('Are you sure you want to delete category "',i.deleteCategoryControl.value.name,'"?')}}var ge,pe=((ge=function(){function e(t,n,i,c){o(this,e),this.categoryService=t,this.notificationService=n,this.fb=i,this.clipboardService=c,this.loading=!1,this.form=new j.c([]),this.categories$=this.fetchCategories(),this.notifications$=this.notificationService.notificationsChanged,this.isAddingCategory=!1,this.isDeleting=!1,this.newCategoryForm=this.fb.group({name:[null,j.p.required],description:[null]}),this.deleteCategoryControl=this.fb.control([null,j.p.required]),this.destroyed$=new x.a,this.COMPONENT_TITLE="Category Management"}return r(e,[{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"getInputCss",value:function(e){return e.invalid?"w-100 text-small is-invalid":"w-100 text-small"}},{key:"cancelAddingCategory",value:function(){this.isAddingCategory=!1,this.newCategoryForm.reset()}},{key:"addCategory",value:function(){var e=this;this.newCategoryForm.invalid||(this.loading=!0,this.categoryService.addCategory(this.newCategoryForm.value).pipe(Object(A.a)(function(){return e.fetchCategories()}),Object(F.a)(function(){e.addNotification({name:e.newCategoryForm.value.name},"added"),e.newCategoryForm.reset()})).subscribe(),this.isAddingCategory=!1)}},{key:"openDeleteModal",value:function(e){this.deleteCategoryControl.setValue(e),this.isDeleting=!0}},{key:"deleteCategory",value:function(){var e=this;this.loading=!0,this.categoryService.deleteCategory(this.deleteCategoryControl.value.id).pipe(Object(A.a)(function(){return e.fetchCategories()}),Object(F.a)(function(){e.addNotification({name:e.deleteCategoryControl.value.name},"deleted"),e.deleteCategoryControl.reset()})).subscribe(),this.isDeleting=!1}},{key:"copyId",value:function(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:"Id '".concat(e,"' has been copied to clipboard.")})}},{key:"fetchCategories",value:function(){var e=this;return this.loading=!0,this.categoryService.getCategories(!0).pipe(Object(h.a)(function(e){return E.a.sortAlphaNumeric(e,"name")}),Object(F.a)(function(t){return e.createForm(t)}),Object(N.a)(function(){return e.loading=!1}))}},{key:"createForm",value:function(e){var n=this;this.form.clear(),e.forEach(function(i){var c=n.fb.group({id:[i.id,j.p.required],name:[i.name,j.p.required],description:[i.description,j.p.required],createdAt:[i.createdAt,j.p.required],updatedAt:[i.updatedAt]});Object(_.a)(c.get("name").valueChanges.pipe(Object(h.a)(function(e){return{name:e}})),c.get("description").valueChanges.pipe(Object(h.a)(function(e){return{description:e}}))).pipe(Object(T.a)(n.destroyed$),Object(S.a)(function(){return c.updateValueAndValidity(),c.valid}),Object($.a)(B.a.DEFAULT_DEBOUNCE_TIME),Object(D.a)(function(e,t){var n=Object.keys(t)[0];return e[n]===t[n]}),Object(h.a)(function(e){return Object.assign({id:i.id},e)}),Object(A.a)(function(e){return Object(I.a)([Object(p.a)(e),n.categoryService.patchCategory(e)])}),Object(F.a)(function(i){var c=t(i,1)[0],o=e.find(function(e){return e.id===c.id});o&&n.addNotification(Object.assign(Object.assign({},o),c),"updated"),n.categories$=n.fetchCategories()})).subscribe(),n.form.push(c)})}},{key:"addNotification",value:function(e,t){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:"Category '".concat(e.name,"' has been ").concat(t,".")})}},{key:"categoryForms",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(e){return new(e||ge)(v.Kb(se.a),v.Kb(W),v.Kb(j.d),v.Kb(K.b))},ge.\u0275cmp=v.Eb({type:ge,selectors:[["bd-category-management"]],decls:9,vars:9,consts:[[1,"btn","btn-primary","btn-add",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Add new category",3,"closed","saved",4,"ngIf"],["modalTitle","Delete existing category",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","description",3,"cssClass"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"spinner"],["modalTitle","Add new category",3,"closed","saved"],[1,"form-group"],["for","name"],["inputId","name","formControlName","name","placeholder","Category name...",3,"cssClass"],["for","description"],["inputId","description","formControlName","description","placeholder","Category description...",3,"cssClass"],["modalTitle","Delete existing category",3,"closed","saved"],[1,"container"]],template:function(e,t){var n;(1&e&&(v.Pb(0,"button",0),v.Wb("click",function(){return t.isAddingCategory=!0}),v.uc(1,"Add Category"),v.Ob(),v.sc(2,be,17,1,"ng-container",1),v.Zb(3,"async"),v.sc(4,ue,1,0,"span",2),v.Lb(5,"bd-notifications",3),v.Zb(6,"async"),v.sc(7,de,10,3,"bd-modal",4),v.sc(8,fe,4,1,"bd-modal",5)),2&e)&&(v.yb(2),v.ec("ngIf",(null==(n=v.ac(3,5,t.categories$))?null:n.length)&&!t.loading),v.yb(2),v.ec("ngIf",t.loading),v.yb(1),v.ec("items",v.ac(6,7,t.notifications$)),v.yb(2),v.ec("ngIf",t.isAddingCategory),v.yb(1),v.ec("ngIf",t.isDeleting))},directives:[f.m,q.a,f.l,j.m,j.h,Z.a,j.l,j.g,z.a,j.q],pipes:[f.b,f.e],styles:["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .btn-add[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:-3.8rem;z-index:11}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:200px;max-width:200px;width:200px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),ge),he=a("g2CB"),me=a("ux41"),ve=a("4yaq");function Oe(e,t){if(1&e&&(v.Pb(0,"div",21),v.Lb(1,"input",22),v.Ob()),2&e){var n=v.Yb().$implicit;v.yb(1),v.ec("value",n.value.isPremium)("checked",n.value.isPremium)}}function ye(e,t){if(1&e){var n=v.Qb();v.Pb(0,"div",23),v.Pb(1,"input",24),v.Wb("change",function(){v.mc(n);var e=t.$implicit,i=v.Yb().$implicit;return v.Yb(2).toggleCategory(i.value,e,i)}),v.Ob(),v.Pb(2,"label",25),v.uc(3),v.Ob(),v.Ob()}if(2&e){var i=t.$implicit,c=v.Yb(),o=c.index,a=c.$implicit,r=v.Yb(2);v.yb(1),v.gc("id","category-checkbox-",o,"-",i.id,""),v.ec("value",i)("checked",r.hasCategory(a.value,i)),v.yb(1),v.gc("for","category-checkbox-",o,"-",i.id,""),v.yb(1),v.wc(" ",i.name," ")}}function Pe(e,t){if(1&e){var n=v.Qb();v.Nb(0),v.Pb(1,"tr",7),v.Pb(2,"td",8),v.Wb("click",function(){v.mc(n);var e=t.$implicit;return v.Yb(2).copyId(e.get("id").value)}),v.Pb(3,"small",9),v.uc(4),v.Ob(),v.Ob(),v.Pb(5,"td"),v.Lb(6,"img",10),v.Ob(),v.Pb(7,"td",11),v.Lb(8,"bd-text-input",12),v.Ob(),v.Pb(9,"td"),v.Lb(10,"textarea",13),v.Ob(),v.Pb(11,"td"),v.Lb(12,"bd-text-input",14),v.Ob(),v.Pb(13,"td",15),v.Lb(14,"bd-dropdown",16),v.Ob(),v.Pb(15,"td"),v.sc(16,Oe,2,2,"div",17),v.Ob(),v.Pb(17,"td"),v.sc(18,ye,4,7,"div",18),v.Zb(19,"async"),v.Ob(),v.Pb(20,"td"),v.Pb(21,"small"),v.uc(22),v.Zb(23,"date"),v.Ob(),v.Ob(),v.Pb(24,"td"),v.Pb(25,"small"),v.uc(26),v.Zb(27,"date"),v.Ob(),v.Ob(),v.Pb(28,"td",19),v.Pb(29,"button",20),v.Wb("click",function(){v.mc(n);var e=t.$implicit;return v.Yb(2).openDeleteModal(e.value)}),v.Ob(),v.Ob(),v.Ob(),v.Mb()}if(2&e){var i=t.$implicit,c=v.Yb(2);v.yb(1),v.ec("formGroup",i),v.yb(3),v.vc(i.get("id").value),v.yb(2),v.ec("src",i.get("url").value,v.nc),v.yb(2),v.ec("cssClass",c.getInputCss(i.get("name"))),v.yb(4),v.ec("cssClass",c.getInputCss(i.get("url"))),v.yb(2),v.ec("items",c.iconTypes)("cssClass",c.getInputCss(i.get("type"))),v.yb(2),v.ec("ngIf",i.value.type===c.IconType.Vector),v.yb(2),v.ec("ngForOf",v.ac(19,11,c.categories$)),v.yb(4),v.vc(v.bc(23,13,i.get("createdAt").value,"short")),v.yb(4),v.vc(v.bc(27,16,i.get("updatedAt").value,"short")||"-")}}function Ce(e,t){if(1&e&&(v.Nb(0),v.Pb(1,"table",4),v.Pb(2,"thead"),v.Pb(3,"tr"),v.Pb(4,"th",5),v.uc(5,"#"),v.Ob(),v.Pb(6,"th",5),v.uc(7,"Icon"),v.Ob(),v.Pb(8,"th",5),v.uc(9,"Name"),v.Ob(),v.Pb(10,"th",5),v.uc(11,"Tags "),v.Pb(12,"span"),v.uc(13,'(split with ",")'),v.Ob(),v.Ob(),v.Pb(14,"th",5),v.uc(15,"URL"),v.Ob(),v.Pb(16,"th",5),v.uc(17,"Type"),v.Ob(),v.Pb(18,"th",5),v.uc(19,"Premium"),v.Ob(),v.Pb(20,"th",5),v.uc(21,"Categories"),v.Ob(),v.Pb(22,"th",5),v.uc(23,"Created At"),v.Ob(),v.Pb(24,"th",5),v.uc(25,"Updated At"),v.Ob(),v.Lb(26,"th",5),v.Ob(),v.Ob(),v.Pb(27,"tbody"),v.sc(28,Pe,30,19,"ng-container",6),v.Ob(),v.Ob(),v.Mb()),2&e){var n=v.Yb();v.yb(28),v.ec("ngForOf",n.iconForms)}}function ke(e,t){1&e&&v.Lb(0,"span",26)}function we(e,t){if(1&e){var n=v.Qb();v.Pb(0,"bd-modal",27),v.Wb("closed",function(){return v.mc(n),v.Yb().isDeleting=!1})("saved",function(){return v.mc(n),v.Yb().deleteIcon()}),v.Pb(1,"div",28),v.Pb(2,"p"),v.uc(3),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=v.Yb();v.yb(3),v.wc('Are you sure you want to delete icon "',i.deleteIconControl.value.name,'"?')}}var Me,je=((Me=function(){function e(n,i,c,a,r){o(this,e),this.iconService=n,this.categoryService=i,this.notificationService=c,this.fb=a,this.clipboardService=r,this.loading=!1,this.form=new j.c([]),this.icons$=this.fetchIcons(),this.IconType=he.a,this.iconTypes=Object.entries(he.a).map(function(e){var n=t(e,2),i=n[0];return{id:n[1],name:i}}),this.categories$=this.categoryService.getCategories(),this.notifications$=this.notificationService.notificationsChanged,this.isDeleting=!1,this.deleteIconControl=this.fb.control([null,j.p.required]),this.destroyed$=new x.a,this.COMPONENT_TITLE="Icon Management"}return r(e,[{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"getIconType",value:function(e){switch(e){case he.a.Raster:return"Raster";case he.a.Vector:return"Vector";default:return"-"}}},{key:"hasCategory",value:function(e,t){var n;return null===(n=e.categories)||void 0===n?void 0:n.some(function(e){return e.id===t.id})}},{key:"toggleCategory",value:function(e,t,i){var c,o;return this.hasCategory(e,t)?(c={id:e.id,categories:e.categories.filter(function(e){return e.id!==t.id})},o=this.iconService.deleteIconCategory(e.id,t.id)):(c={id:e.id,categories:[].concat(n(e.categories),[t])},o=this.iconService.addIconCategory(e.id,t.id)),o.pipe(Object(F.a)(function(){return i.get("categories").setValue(c.categories)})).subscribe()}},{key:"getInputCss",value:function(e){return e.invalid?"w-100 text-small is-invalid":"w-100 text-small"}},{key:"openDeleteModal",value:function(e){this.deleteIconControl.setValue(e),this.isDeleting=!0}},{key:"deleteIcon",value:function(){var e=this;this.loading=!0,this.iconService.deleteIcon(this.deleteIconControl.value.id).pipe(Object(A.a)(function(){return e.icons$}),Object(F.a)(function(t){e.localDelete(e.deleteIconControl.value.id,t),e.addNotification({name:e.deleteIconControl.value.name},"deleted"),e.deleteIconControl.reset()}),Object(N.a)(function(){return e.loading=!1})).subscribe(),this.isDeleting=!1}},{key:"copyId",value:function(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:"Id '".concat(e,"' has been copied to clipboard.")})}},{key:"fetchIcons",value:function(){var e=this;return this.loading=!0,this.iconService.getIcons({},!0).pipe(Object(h.a)(function(e){return E.a.sortAlphaNumeric(e,"name")}),Object(F.a)(function(t){return e.createForm(t)}),Object(N.a)(function(){return e.loading=!1}))}},{key:"createForm",value:function(e){var n=this;this.form.clear(),e.forEach(function(i){var c=n.fb.group({id:[i.id,j.p.required],name:[i.name,j.p.required],tags:[i.tags],url:[i.url,j.p.required],type:[i.type,j.p.required],isPremium:[i.isPremium,j.p.required],categories:[i.categories],createdAt:[i.createdAt,j.p.required],updatedAt:[i.updatedAt]});Object(_.a)(c.get("name").valueChanges.pipe(Object(h.a)(function(e){return{name:e}})),c.get("tags").valueChanges.pipe(Object(h.a)(function(e){return{tags:e.split(",").map(function(e){return e.trim()}).filter(function(e){return!!e.length})}})),c.get("url").valueChanges.pipe(Object(h.a)(function(e){return{url:e}})),c.get("type").valueChanges.pipe(Object(h.a)(function(e){return{type:e}})),c.get("isPremium").valueChanges.pipe(Object(h.a)(function(e){return{isPremium:e}}))).pipe(Object(T.a)(n.destroyed$),Object(S.a)(function(){return c.updateValueAndValidity(),c.valid}),Object($.a)(B.a.DEFAULT_DEBOUNCE_TIME),Object(D.a)(function(e,t){var n=Object.keys(t)[0],i=e[n],c=t[n];return Array.isArray(i)?L.a.isEqual(i,c):i===c}),Object(h.a)(function(e){return Object.assign({id:i.id},e)}),Object(A.a)(function(e){return Object(I.a)([Object(p.a)(e),n.iconService.patchIcon(e)])}),Object(F.a)(function(i){var c=t(i,1)[0];n.localUpdate(c,e);var o=e.find(function(e){return e.id===c.id});o&&n.addNotification(Object.assign(Object.assign({},o),c),"updated")})).subscribe(),c.get("categories").valueChanges.pipe(Object(h.a)(function(e){return{categories:e}})).pipe(Object(T.a)(n.destroyed$),Object(h.a)(function(e){return Object.assign({id:i.id},e)}),Object(F.a)(function(t){n.localUpdate(t,e);var i=e.find(function(e){return e.id===t.id});i&&n.addNotification(Object.assign(Object.assign({},i),t),"updated")})).subscribe(),n.form.push(c)})}},{key:"localUpdate",value:function(e,t){var i=n(t),c=i.findIndex(function(t){return t.id===e.id});i[c]=Object.assign(Object.assign({},i[c]),e),this.icons$=Object(p.a)(i)}},{key:"localDelete",value:function(e,t){var i=this;this.icons$=Object(p.a)(n(t.filter(function(t){return t.id!==e}))).pipe(Object(F.a)(function(){var t=i.form.controls.findIndex(function(t){return t.value.id===e});t&&i.form.removeAt(t)}))}},{key:"addNotification",value:function(e,t){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:"Icon '".concat(e.name,"' has been ").concat(t,".")})}},{key:"iconForms",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(e){return new(e||Me)(v.Kb(me.a),v.Kb(se.a),v.Kb(W),v.Kb(j.d),v.Kb(K.b))},Me.\u0275cmp=v.Eb({type:Me,selectors:[["bd-icon-management"]],decls:6,vars:8,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Delete existing icon",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"icon-preview",3,"src"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","tags"],["formControlName","url",3,"cssClass"],[1,"cell-type"],["formControlName","type","valueProp","id","labelProp","name",3,"items","cssClass"],["class","d-flex justify-content-center align-items-center checkbox-wrapper",4,"ngIf"],["class","d-flex align-items-center checkbox-wrapper",4,"ngFor","ngForOf"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"d-flex","justify-content-center","align-items-center","checkbox-wrapper"],["type","checkbox","formControlName","isPremium",1,"checkbox","mr-2",3,"value","checked"],[1,"d-flex","align-items-center","checkbox-wrapper"],["type","checkbox",1,"checkbox","mr-2",3,"value","checked","id","change"],[3,"for"],[1,"spinner"],["modalTitle","Delete existing icon",3,"closed","saved"],[1,"container"]],template:function(e,t){var n;(1&e&&(v.sc(0,Ce,29,1,"ng-container",0),v.Zb(1,"async"),v.sc(2,ke,1,0,"span",1),v.Lb(3,"bd-notifications",2),v.Zb(4,"async"),v.sc(5,we,4,1,"bd-modal",3)),2&e)&&(v.ec("ngIf",(null==(n=v.ac(1,4,t.icons$))?null:n.length)&&!t.loading),v.yb(2),v.ec("ngIf",t.loading),v.yb(1),v.ec("items",v.ac(4,6,t.notifications$)),v.yb(2),v.ec("ngIf",t.isDeleting))},directives:[f.m,q.a,f.l,j.m,j.h,Z.a,j.l,j.g,j.b,ve.a,j.a,z.a],pipes:[f.b,f.e],styles:[".icon-preview[_ngcontent-%COMP%]{width:100px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{width:1.5rem;min-width:1.5rem;height:2rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#522699}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:60px;max-height:400px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:250px;max-width:250px;width:250px}.table[_ngcontent-%COMP%]   .cell-type[_ngcontent-%COMP%]{min-width:150px;max-width:150px;width:150px}.table[_ngcontent-%COMP%]   .cell-type[_ngcontent-%COMP%]     .dropdown-toggle{min-width:auto}.table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}.table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),Me),xe=["files"];function _e(e,t){if(1&e&&(v.Pb(0,"tr"),v.Pb(1,"th",11),v.uc(2),v.Ob(),v.Pb(3,"td"),v.uc(4),v.Ob(),v.Pb(5,"td"),v.uc(6),v.Zb(7,"formatBytes"),v.Ob(),v.Pb(8,"td",12),v.Lb(9,"img",13),v.Zb(10,"async"),v.Ob(),v.Ob()),2&e){var n=t.$implicit,i=t.index,c=v.Yb(2);v.yb(2),v.vc(i+1),v.yb(2),v.vc(n.name),v.yb(2),v.vc(v.ac(7,4,n.size)),v.yb(3),v.ec("src",v.ac(10,6,c.filePreviews.get(n.name)),v.nc)}}function Ie(e,t){if(1&e){var n=v.Qb();v.Nb(0),v.Pb(1,"table",7),v.Pb(2,"thead"),v.Pb(3,"tr"),v.Pb(4,"th",8),v.uc(5,"#"),v.Ob(),v.Pb(6,"th",8),v.uc(7,"File Name"),v.Ob(),v.Pb(8,"th",8),v.uc(9,"File Size"),v.Ob(),v.Pb(10,"th",8),v.uc(11,"Preview"),v.Ob(),v.Ob(),v.Ob(),v.Pb(12,"tbody"),v.sc(13,_e,11,8,"tr",9),v.Ob(),v.Ob(),v.Pb(14,"button",10),v.Wb("click",function(){return v.mc(n),v.Yb().uploadIcons()}),v.uc(15,"Upload Icons"),v.Ob(),v.Mb()}if(2&e){var i=v.Yb();v.yb(13),v.ec("ngForOf",i.selectedFilesArray)("ngForTrackBy",i.trackFn)}}function Ae(e,t){1&e&&v.Lb(0,"span",14)}var Fe,Ne,Te,Se=[{path:"",component:M,canActivate:[P],children:[{path:"",component:C},{path:"icons",children:[{path:"upload",component:(Fe=function(){function t(e,n,i){o(this,t),this.iconService=e,this.domSanitizer=n,this.notificationService=i,this.filePreviews=new Map,this.loading=!1,this.notifications$=this.notificationService.notificationsChanged,this.destroyed$=new x.a}return r(t,[{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"selectFiles",value:function(e){var t=this;this.selectedFiles=e.target.files||[],this.selectedFilesArray.forEach(function(e){t.filePreviews.set(e.name,new Promise(function(n,i){var c=new FileReader;c.onload=function(){n(t.domSanitizer.bypassSecurityTrustUrl(c.result))},c.onerror=function(e){i(e)},c.readAsDataURL(e)}))})}},{key:"uploadIcons",value:function(){var t=this;if(this.selectedFiles){var n,i=new FormData,c=e(this.selectedFilesArray);try{for(c.s();!(n=c.n()).done;){var o=n.value;i.append("files",o)}}catch(a){c.e(a)}finally{c.f()}this.iconService.uploadIcons(i).pipe(Object(F.a)(function(){return t.loading=!0}),Object(m.a)(function(e){return Object(H.a)(e)}),Object(N.a)(function(){t.addUploadNotification(t.selectedFilesArray.length),t.loading=!1,t.filesEl.nativeElement.value=null})).subscribe()}}},{key:"trackFn",value:function(e,t){return t.name}},{key:"addUploadNotification",value:function(e){this.notificationService.addNotification({title:"Icons Bulk Upload",createdAt:new Date,body:e+" icons have been uploaded."})}},{key:"selectedFilesArray",get:function(){return Array.from(this.selectedFiles||[])}}]),t}(),Fe.\u0275fac=function(e){return new(e||Fe)(v.Kb(me.a),v.Kb(ee.b),v.Kb(W))},Fe.\u0275cmp=v.Eb({type:Fe,selectors:[["bd-icons-bulk-upload"]],viewQuery:function(e,t){var n;1&e&&v.yc(xe,!0),2&e&&v.jc(n=v.Xb())&&(t.filesEl=n.first)},decls:9,vars:5,consts:[[1,"d-flex","flex-column"],["type","file","multiple","","accept","image/*",1,"d-none",3,"change"],["files",""],[1,"btn","btn-menu","btn-icon","mb-2","icon-collection",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn",3,"click"],["scope","row"],[1,"text-center"],[1,"icon-preview",3,"src"],[1,"spinner"]],template:function(e,t){if(1&e){var n=v.Qb();v.Pb(0,"div",0),v.Pb(1,"input",1,2),v.Wb("change",function(e){return t.selectFiles(e)}),v.Ob(),v.Pb(3,"button",3),v.Wb("click",function(){return v.mc(n),v.kc(2).click()}),v.uc(4,"Select Files"),v.Ob(),v.sc(5,Ie,16,2,"ng-container",4),v.sc(6,Ae,1,0,"span",5),v.Ob(),v.Lb(7,"bd-notifications",6),v.Zb(8,"async")}2&e&&(v.yb(5),v.ec("ngIf",(null==t.selectedFilesArray?null:t.selectedFilesArray.length)&&!t.loading),v.yb(1),v.ec("ngIf",t.loading),v.yb(1),v.ec("items",v.ac(8,3,t.notifications$)))},directives:[f.m,q.a,f.l],pipes:[f.b,te.a],styles:[".icon-preview[_ngcontent-%COMP%]{height:50px}"]}),Fe)},{path:"",component:je}]},{path:"categories",component:pe},{path:"backgrounds",children:[{path:"upload",component:re},{path:"",component:J}]}]}],$e=((Ne=function e(){o(this,e)}).\u0275mod=v.Ib({type:Ne}),Ne.\u0275inj=v.Hb({factory:function(e){return new(e||Ne)},imports:[[g.f.forChild(Se)],g.f]}),Ne),De=a("PCNd"),Ee=((Te=function e(){o(this,e)}).\u0275mod=v.Ib({type:Te}),Te.\u0275inj=v.Hb({factory:function(e){return new(e||Te)},imports:[[f.c,$e,De.a]]}),Te)}}])}();