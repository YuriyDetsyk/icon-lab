"use strict";(self.webpackChunkbd_client=self.webpackChunkbd_client||[]).push([[702],{4702:(Pt,J,l)=>{l.r(J),l.d(J,{AdminModule:()=>kt});var p=l(6362),_=l(1119),m=l(4139),g=l(6942),T=l(7418),t=l(2311),O=l(604);let z=(()=>{class o{constructor(e,n){this.authService=e,this.router=n}canActivate(e,n){const i=this.authService.getSessionData(),a=this.authService.getToken();return i?(0,m.of)(!0):a?this.authService.verifyToken().pipe((0,g.U)(r=>!!r||this.redirect(n.url)),(0,T.K)(()=>(0,m.of)(this.redirect(n.url)))):(0,m.of)(!1).pipe((0,g.U)(()=>this.redirect(n.url)))}redirect(e){return this.router.navigate(["login"],{queryParams:{redirectUrl:e}}),!1}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(O.e),t.LFG(_.F0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),H=(()=>{class o{constructor(e,n,i){this.authService=e,this.router=n,this.authGuard=i}canActivate(e,n){return this.authGuard.canActivate(e,n).pipe((0,g.U)(a=>{var r,d;return a&&!!(null===(d=null===(r=this.authService.getSessionData())||void 0===r?void 0:r.user)||void 0===d?void 0:d.isAdmin)||this.redirect(n.url)}),(0,T.K)(()=>(0,m.of)(this.redirect(n.url))))}redirect(e){return this.router.navigate(["login"],{queryParams:{redirectUrl:e}}),!1}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(O.e),t.LFG(_.F0),t.LFG(z))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),G=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bd-admin-home"]],decls:3,vars:0,consts:[[1,"d-flex","justify-content-center","align-items-center","my-5"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h5"),t._uU(2,"Please select a tool above"),t.qZA()())},styles:[""]}),o})();var b=l(9288),R=l(4336);let V=(()=>{class o{constructor(e,n){this.authService=e,this.router=n,this.adminTabs=[{id:b.T.IconManagement,title:"Icon Management",url:"/admin/icons"},{id:b.T.IconsBulkUpload,title:"Icons Bulk Upload",url:"/admin/icons/upload"},{id:b.T.CategoryManagement,title:"Category Management",url:"/admin/categories"},{id:b.T.BackgroundManagement,title:"Background Management",url:"/admin/backgrounds"},{id:b.T.BgBulkUpload,title:"Backgrounds Bulk Upload",url:"/admin/backgrounds/upload"}],this.TabId=b.T}get username(){return this.authService.username||"ADMIN"}onTabChange(e){const n=this.adminTabs.find(i=>i.id===e);this.router.navigate([n.url])}toWebsite(){this.router.navigate([""])}logout(){this.authService.logout().subscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O.e),t.Y36(_.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bd-admin"]],decls:12,vars:3,consts:[[1,"position-fixed","w-100","header-wrapper"],[1,"d-flex","justify-content-end","align-items-center","p-2","border-bottom"],["routerLink","",1,"mr-auto","app-logo"],[1,"m-0","mr-3"],[1,"btn","btn-primary","mr-3",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"pt-3",3,"tabs","snap","tabChange"],[1,"d-flex","flex-column","content-wrapper"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"a",2),t.TgZ(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.toWebsite()}),t._uU(6,"Go to Website"),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.logout()}),t._uU(8,"Logout"),t.qZA()(),t.TgZ(9,"bd-tabs",6),t.NdJ("tabChange",function(a){return n.onTabChange(a)}),t.qZA()(),t.TgZ(10,"div",7),t._UZ(11,"router-outlet"),t.qZA()),2&e&&(t.xp6(4),t.hij("Welcome, ",n.username,""),t.xp6(5),t.Q6J("tabs",n.adminTabs)("snap","bottom"))},directives:[_.yS,R.n,_.lC],styles:[".header-wrapper[_ngcontent-%COMP%]{background-color:#f8f5fe;border-bottom:1px solid #d3d3d3;z-index:10}.content-wrapper[_ngcontent-%COMP%]{padding-top:10rem}"]}),o})();var s=l(587),x=l(2218),U=l(8623),k=l(4350),f=l(522),u=l(2692),C=l(4661),A=l(5921),I=l(9151),P=l(823),w=l(3298),F=l(3121),S=l(284),N=l(2276),D=l(4978),X=l(4505);let v=(()=>{class o{constructor(){this.DEFAULT_DURATION=4e3,this.notifications$=new X.X([])}get notificationsChanged(){return this.notifications$.asObservable()}addNotification(e){e.createdAt||(e.createdAt=new Date),this.notifications$.next([...this.notifications$.value,e]),setTimeout(()=>this.notifications$.next(this.notifications$.value.filter(n=>n.createdAt.getTime()!==e.createdAt.getTime())),e.duration||this.DEFAULT_DURATION)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var B=l(9843),q=l(4015),y=l(3293),$=l(312);function W(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",7)(2,"td",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).copyId(a.get("id").value)}),t.TgZ(3,"small",9),t._uU(4),t.qZA()(),t.TgZ(5,"td"),t._UZ(6,"img",10),t.qZA(),t.TgZ(7,"td",11),t._UZ(8,"bd-text-input",12),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"textarea",13),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"bd-text-input",14),t.qZA(),t.TgZ(13,"td")(14,"small"),t._uU(15),t.ALo(16,"date"),t.qZA()(),t.TgZ(17,"td")(18,"small"),t._uU(19),t.ALo(20,"date"),t.qZA()(),t.TgZ(21,"td",15)(22,"button",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).openDeleteModal(a.value)}),t.qZA()()(),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.Oqu(e.get("id").value),t.xp6(2),t.Q6J("src",e.get("url").value,t.LSH),t.xp6(2),t.Q6J("cssClass",n.getInputCss(e.get("name"))),t.xp6(4),t.Q6J("cssClass",n.getInputCss(e.get("url"))),t.xp6(3),t.Oqu(t.xi3(16,7,e.get("createdAt").value,"short")),t.xp6(4),t.Oqu(t.xi3(20,10,e.get("updatedAt").value,"short")||"-")}}function K(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"table",4)(2,"thead")(3,"tr")(4,"th",5),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th",5),t._uU(7,"Background"),t.qZA(),t.TgZ(8,"th",5),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th",5),t._uU(11,"Tags "),t.TgZ(12,"span"),t._uU(13,'(split with ",")'),t.qZA()(),t.TgZ(14,"th",5),t._uU(15,"URL"),t.qZA(),t.TgZ(16,"th",5),t._uU(17,"Created At"),t.qZA(),t.TgZ(18,"th",5),t._uU(19,"Updated At"),t.qZA(),t._UZ(20,"th",5),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,W,23,13,"ng-container",6),t.qZA()(),t.BQk()),2&o){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",e.backgroundForms)}}function tt(o,c){1&o&&t._UZ(0,"span",17)}function et(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"bd-modal",18),t.NdJ("closed",function(){return t.CHM(e),t.oxw().isDeleting=!1})("saved",function(){return t.CHM(e),t.oxw().deleteBackground()}),t.TgZ(1,"div",19)(2,"p"),t._uU(3),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.hij('Are you sure you want to delete background "',e.deleteBackgroundControl.value.name,'"?')}}let nt=(()=>{class o{constructor(e,n,i,a){this.backgroundService=e,this.notificationService=n,this.fb=i,this.clipboardService=a,this.loading=!1,this.form=new s.Oe([]),this.backgrounds$=this.fetchBackgrounds(),this.notifications$=this.notificationService.notificationsChanged,this.isDeleting=!1,this.deleteBackgroundControl=this.fb.control([null,s.kI.required]),this.destroyed$=new x.xQ,this.COMPONENT_TITLE="Background Management"}get backgroundForms(){return this.form.controls}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getInputCss(e){const n="w-100 text-small";return e.invalid?`${n} is-invalid`:n}openDeleteModal(e){this.deleteBackgroundControl.setValue(e),this.isDeleting=!0}deleteBackground(){this.loading=!0,this.backgroundService.deleteBackground(this.deleteBackgroundControl.value.id).pipe((0,f.zg)(()=>this.backgrounds$),(0,u.b)(e=>{this.localDelete(this.deleteBackgroundControl.value.id,e),this.addNotification({name:this.deleteBackgroundControl.value.name},"deleted"),this.deleteBackgroundControl.reset()}),(0,C.x)(()=>this.loading=!1)).subscribe(),this.isDeleting=!1}copyId(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Id '${e}' has been copied to clipboard.`})}fetchBackgrounds(){return this.loading=!0,this.backgroundService.getBackgrounds(!0).pipe((0,g.U)(e=>F.m.sortAlphaNumeric(e,"name")),(0,u.b)(e=>this.createForm(e)),(0,C.x)(()=>this.loading=!1))}createForm(e){this.form.clear(),e.forEach(n=>{const i=this.fb.group({id:[n.id,s.kI.required],name:[n.name,s.kI.required],tags:[n.tags],url:[n.url,s.kI.required],createdAt:[n.createdAt,s.kI.required],updatedAt:[n.updatedAt]});(0,U.T)(i.get("name").valueChanges.pipe((0,g.U)(a=>({name:a}))),i.get("tags").valueChanges.pipe((0,g.U)(a=>({tags:a.split(",").map(r=>r.trim()).filter(r=>!!r.length)}))),i.get("url").valueChanges.pipe((0,g.U)(a=>({url:a})))).pipe((0,A.R)(this.destroyed$),(0,I.h)(()=>(i.updateValueAndValidity(),i.valid)),(0,P.b)(N.m.DEFAULT_DEBOUNCE_TIME),(0,w.x)((a,r)=>{const d=Object.keys(r)[0],h=a[d],Z=r[d];return Array.isArray(h)?S.i.isEqual(h,Z):h===Z}),(0,g.U)(a=>Object.assign({id:n.id},a)),(0,f.zg)(a=>(0,k.D)([(0,m.of)(a),this.backgroundService.patchBackground(a)])),(0,u.b)(([a])=>{this.localUpdate(a,e);const r=e.find(d=>d.id===a.id);r&&this.addNotification(Object.assign(Object.assign({},r),a),"updated")})).subscribe(),this.form.push(i)})}localUpdate(e,n){const i=[...n],a=i.findIndex(r=>r.id===e.id);i[a]=Object.assign(Object.assign({},i[a]),e),this.backgrounds$=(0,m.of)(i)}localDelete(e,n){this.backgrounds$=(0,m.of)([...n.filter(i=>i.id!==e)]).pipe((0,u.b)(()=>{const i=this.form.controls.findIndex(a=>a.value.id===e);i&&this.form.removeAt(i)}))}addNotification(e,n){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Background '${e.name}' has been ${n}.`})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(D.J),t.Y36(v),t.Y36(s.qu),t.Y36(B.Yv))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bd-background-management"]],decls:6,vars:8,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Delete existing background",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"background-preview",3,"src"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","tags"],["formControlName","url",3,"cssClass"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"spinner"],["modalTitle","Delete existing background",3,"closed","saved"],[1,"container"]],template:function(e,n){if(1&e&&(t.YNc(0,K,23,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,tt,1,0,"span",1),t._UZ(3,"bd-notifications",2),t.ALo(4,"async"),t.YNc(5,et,4,1,"bd-modal",3)),2&e){let i;t.Q6J("ngIf",(null==(i=t.lcZ(1,4,n.backgrounds$))?null:i.length)&&!n.loading),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("items",t.lcZ(4,6,n.notifications$)),t.xp6(2),t.Q6J("ngIf",n.isDeleting)}},directives:[p.O5,p.sg,s.JL,s.sg,q.t,s.JJ,s.u,s.Fj,y.t,$.z],pipes:[p.Ov,p.uU],styles:["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .btn-add[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:-3.8rem;z-index:11}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:200px;max-width:200px;width:200px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),o})();var Q=l(6587),E=l(318),L=l(7675);const ot=["files"];function it(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"th",11),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"formatBytes"),t.qZA(),t.TgZ(8,"td",12),t._UZ(9,"img",13),t.ALo(10,"async"),t.qZA()()),2&o){const e=c.$implicit,n=c.index,i=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(t.lcZ(7,4,e.size)),t.xp6(3),t.Q6J("src",t.lcZ(10,6,i.filePreviews.get(e.name)),t.LSH)}}function at(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",7)(2,"thead")(3,"tr")(4,"th",8),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th",8),t._uU(7,"File Name"),t.qZA(),t.TgZ(8,"th",8),t._uU(9,"File Size"),t.qZA(),t.TgZ(10,"th",8),t._uU(11,"Preview"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,it,11,8,"tr",9),t.qZA()(),t.TgZ(14,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploadBackgrounds()}),t._uU(15,"Upload Backgrounds"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.selectedFilesArray)("ngForTrackBy",e.trackFn)}}function rt(o,c){1&o&&t._UZ(0,"span",14)}let ct=(()=>{class o{constructor(e,n,i){this.backgroundService=e,this.domSanitizer=n,this.notificationService=i,this.filePreviews=new Map,this.loading=!1,this.notifications$=this.notificationService.notificationsChanged,this.destroyed$=new x.xQ}get selectedFilesArray(){return Array.from(this.selectedFiles||[])}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}selectFiles(e){this.selectedFiles=e.target.files||[],this.selectedFilesArray.forEach(n=>{this.filePreviews.set(n.name,new Promise((i,a)=>{const r=new FileReader;r.onload=()=>{i(this.domSanitizer.bypassSecurityTrustUrl(r.result))},r.onerror=d=>{a(d)},r.readAsDataURL(n)}))})}uploadBackgrounds(){if(!this.selectedFiles)return;const e=new FormData;for(const n of this.selectedFilesArray)e.append("files",n);this.backgroundService.uploadBackgrounds(e).pipe((0,u.b)(()=>this.loading=!0),(0,T.K)(n=>(0,Q._)(n)),(0,C.x)(()=>{this.addUploadNotification(this.selectedFilesArray.length),this.loading=!1,this.filesEl.nativeElement.value=null})).subscribe()}trackFn(e,n){return n.name}addUploadNotification(e){this.notificationService.addNotification({title:"Backgrounds Bulk Upload",createdAt:new Date,body:`${e} backgrounds have been uploaded.`})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(D.J),t.Y36(E.H7),t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bd-bg-bulk-upload"]],viewQuery:function(e,n){if(1&e&&t.Gf(ot,5),2&e){let i;t.iGM(i=t.CRH())&&(n.filesEl=i.first)}},decls:9,vars:5,consts:[[1,"d-flex","flex-column"],["type","file","multiple","","accept","image/*",1,"d-none",3,"change"],["files",""],[1,"btn","btn-menu","btn-icon","mb-2","icon-collection",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn",3,"click"],["scope","row"],[1,"text-center"],[1,"icon-preview",3,"src"],[1,"spinner"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"input",1,2),t.NdJ("change",function(r){return n.selectFiles(r)}),t.qZA(),t.TgZ(3,"button",3),t.NdJ("click",function(){return t.CHM(i),t.MAs(2).click()}),t._uU(4,"Select Files"),t.qZA(),t.YNc(5,at,16,2,"ng-container",4),t.YNc(6,rt,1,0,"span",5),t.qZA(),t._UZ(7,"bd-notifications",6),t.ALo(8,"async")}2&e&&(t.xp6(5),t.Q6J("ngIf",(null==n.selectedFilesArray?null:n.selectedFilesArray.length)&&!n.loading),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("items",t.lcZ(8,3,n.notifications$)))},directives:[p.O5,p.sg,y.t],pipes:[L.b,p.Ov],styles:[".icon-preview[_ngcontent-%COMP%]{height:50px}"]}),o})();var Y=l(6943);function st(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",9)(2,"td",10),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).copyId(a.get("id").value)}),t.TgZ(3,"small",11),t._uU(4),t.qZA()(),t.TgZ(5,"td",12),t._UZ(6,"bd-text-input",13),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"bd-text-input",14),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"td",15)(16,"button",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).openDeleteModal(a.value)}),t.qZA()()(),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.Oqu(e.get("id").value),t.xp6(2),t.Q6J("cssClass",n.getInputCss(e.get("name"))),t.xp6(2),t.Q6J("cssClass",n.getInputCss(e.get("description"))),t.xp6(2),t.Oqu(t.xi3(11,6,e.get("createdAt").value,"short")),t.xp6(3),t.Oqu(t.xi3(14,9,e.get("updatedAt").value,"short")||"-")}}function lt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"table",6)(2,"thead")(3,"tr")(4,"th",7),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th",7),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"th",7),t._uU(9,"Description"),t.qZA(),t.TgZ(10,"th",7),t._uU(11,"Created At"),t.qZA(),t.TgZ(12,"th",7),t._uU(13,"Updated At"),t.qZA(),t._UZ(14,"th",7),t.qZA()(),t.TgZ(15,"tbody"),t.YNc(16,st,17,12,"ng-container",8),t.qZA()(),t.BQk()),2&o){const e=t.oxw();t.xp6(16),t.Q6J("ngForOf",e.categoryForms)}}function dt(o,c){1&o&&t._UZ(0,"span",17)}function gt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"bd-modal",18),t.NdJ("closed",function(){return t.CHM(e),t.oxw().cancelAddingCategory()})("saved",function(){return t.CHM(e),t.oxw().addCategory()}),t.TgZ(1,"form",9)(2,"div",19)(3,"label",20),t._uU(4,"Name"),t.qZA(),t._UZ(5,"bd-text-input",21),t.qZA(),t.TgZ(6,"div",19)(7,"label",22),t._uU(8,"Description"),t.qZA(),t._UZ(9,"bd-text-input",23),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.newCategoryForm),t.xp6(4),t.Q6J("cssClass",e.getInputCss(e.newCategoryForm.get("name"))),t.xp6(4),t.Q6J("cssClass",e.getInputCss(e.newCategoryForm.get("description")))}}function pt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"bd-modal",24),t.NdJ("closed",function(){return t.CHM(e),t.oxw().isDeleting=!1})("saved",function(){return t.CHM(e),t.oxw().deleteCategory()}),t.TgZ(1,"div",25)(2,"p"),t._uU(3),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.hij('Are you sure you want to delete category "',e.deleteCategoryControl.value.name,'"?')}}let ut=(()=>{class o{constructor(e,n,i,a){this.categoryService=e,this.notificationService=n,this.fb=i,this.clipboardService=a,this.loading=!1,this.form=new s.Oe([]),this.categories$=this.fetchCategories(),this.notifications$=this.notificationService.notificationsChanged,this.isAddingCategory=!1,this.isDeleting=!1,this.newCategoryForm=this.fb.group({name:[null,s.kI.required],description:[null]}),this.deleteCategoryControl=this.fb.control([null,s.kI.required]),this.destroyed$=new x.xQ,this.COMPONENT_TITLE="Category Management"}get categoryForms(){return this.form.controls}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getInputCss(e){const n="w-100 text-small";return e.invalid?`${n} is-invalid`:n}cancelAddingCategory(){this.isAddingCategory=!1,this.newCategoryForm.reset()}addCategory(){this.newCategoryForm.invalid||(this.loading=!0,this.categoryService.addCategory(this.newCategoryForm.value).pipe((0,f.zg)(()=>this.fetchCategories()),(0,u.b)(()=>{this.addNotification({name:this.newCategoryForm.value.name},"added"),this.newCategoryForm.reset()})).subscribe(),this.isAddingCategory=!1)}openDeleteModal(e){this.deleteCategoryControl.setValue(e),this.isDeleting=!0}deleteCategory(){this.loading=!0,this.categoryService.deleteCategory(this.deleteCategoryControl.value.id).pipe((0,f.zg)(()=>this.fetchCategories()),(0,u.b)(()=>{this.addNotification({name:this.deleteCategoryControl.value.name},"deleted"),this.deleteCategoryControl.reset()})).subscribe(),this.isDeleting=!1}copyId(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Id '${e}' has been copied to clipboard.`})}fetchCategories(){return this.loading=!0,this.categoryService.getCategories(!0).pipe((0,g.U)(e=>F.m.sortAlphaNumeric(e,"name")),(0,u.b)(e=>this.createForm(e)),(0,C.x)(()=>this.loading=!1))}createForm(e){this.form.clear(),e.forEach(n=>{const i=this.fb.group({id:[n.id,s.kI.required],name:[n.name,s.kI.required],description:[n.description,s.kI.required],createdAt:[n.createdAt,s.kI.required],updatedAt:[n.updatedAt]});(0,U.T)(i.get("name").valueChanges.pipe((0,g.U)(a=>({name:a}))),i.get("description").valueChanges.pipe((0,g.U)(a=>({description:a})))).pipe((0,A.R)(this.destroyed$),(0,I.h)(()=>(i.updateValueAndValidity(),i.valid)),(0,P.b)(N.m.DEFAULT_DEBOUNCE_TIME),(0,w.x)((a,r)=>{const d=Object.keys(r)[0];return a[d]===r[d]}),(0,g.U)(a=>Object.assign({id:n.id},a)),(0,f.zg)(a=>(0,k.D)([(0,m.of)(a),this.categoryService.patchCategory(a)])),(0,u.b)(([a])=>{const r=e.find(d=>d.id===a.id);r&&this.addNotification(Object.assign(Object.assign({},r),a),"updated"),this.categories$=this.fetchCategories()})).subscribe(),this.form.push(i)})}addNotification(e,n){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Category '${e.name}' has been ${n}.`})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Y.H),t.Y36(v),t.Y36(s.qu),t.Y36(B.Yv))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bd-category-management"]],decls:9,vars:9,consts:[[1,"btn","btn-primary","btn-add",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Add new category",3,"closed","saved",4,"ngIf"],["modalTitle","Delete existing category",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","description",3,"cssClass"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"spinner"],["modalTitle","Add new category",3,"closed","saved"],[1,"form-group"],["for","name"],["inputId","name","formControlName","name","placeholder","Category name...",3,"cssClass"],["for","description"],["inputId","description","formControlName","description","placeholder","Category description...",3,"cssClass"],["modalTitle","Delete existing category",3,"closed","saved"],[1,"container"]],template:function(e,n){if(1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.isAddingCategory=!0}),t._uU(1,"Add Category"),t.qZA(),t.YNc(2,lt,17,1,"ng-container",1),t.ALo(3,"async"),t.YNc(4,dt,1,0,"span",2),t._UZ(5,"bd-notifications",3),t.ALo(6,"async"),t.YNc(7,gt,10,3,"bd-modal",4),t.YNc(8,pt,4,1,"bd-modal",5)),2&e){let i;t.xp6(2),t.Q6J("ngIf",(null==(i=t.lcZ(3,5,n.categories$))?null:i.length)&&!n.loading),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("items",t.lcZ(6,7,n.notifications$)),t.xp6(2),t.Q6J("ngIf",n.isAddingCategory),t.xp6(1),t.Q6J("ngIf",n.isDeleting)}},directives:[p.O5,p.sg,s.JL,s.sg,q.t,s.JJ,s.u,y.t,$.z,s._Y],pipes:[p.Ov,p.uU],styles:["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .btn-add[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:-3.8rem;z-index:11}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:200px;max-width:200px;width:200px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),o})();var M=l(8642),j=l(5758),mt=l(1875);function ht(o,c){if(1&o&&(t.TgZ(0,"div",21),t._UZ(1,"input",22),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("value",e.value.isPremium)("checked",e.value.isPremium)}}function _t(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",23)(1,"input",24),t.NdJ("change",function(){const a=t.CHM(e).$implicit,r=t.oxw().$implicit;return t.oxw(2).toggleCategory(r.value,a,r)}),t.qZA(),t.TgZ(2,"label",25),t._uU(3),t.qZA()()}if(2&o){const e=c.$implicit,n=t.oxw(),i=n.index,a=n.$implicit,r=t.oxw(2);t.xp6(1),t.hYB("id","category-checkbox-",i,"-",e.id,""),t.Q6J("value",e)("checked",r.hasCategory(a.value,e)),t.xp6(1),t.hYB("for","category-checkbox-",i,"-",e.id,""),t.xp6(1),t.hij(" ",e.name," ")}}function ft(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",7)(2,"td",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).copyId(a.get("id").value)}),t.TgZ(3,"small",9),t._uU(4),t.qZA()(),t.TgZ(5,"td"),t._UZ(6,"img",10),t.qZA(),t.TgZ(7,"td",11),t._UZ(8,"bd-text-input",12),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"textarea",13),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"bd-text-input",14),t.qZA(),t.TgZ(13,"td",15),t._UZ(14,"bd-dropdown",16),t.qZA(),t.TgZ(15,"td"),t.YNc(16,ht,2,2,"div",17),t.qZA(),t.TgZ(17,"td"),t.YNc(18,_t,4,7,"div",18),t.ALo(19,"async"),t.qZA(),t.TgZ(20,"td")(21,"small"),t._uU(22),t.ALo(23,"date"),t.qZA()(),t.TgZ(24,"td")(25,"small"),t._uU(26),t.ALo(27,"date"),t.qZA()(),t.TgZ(28,"td",19)(29,"button",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).openDeleteModal(a.value)}),t.qZA()()(),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.Oqu(e.get("id").value),t.xp6(2),t.Q6J("src",e.get("url").value,t.LSH),t.xp6(2),t.Q6J("cssClass",n.getInputCss(e.get("name"))),t.xp6(4),t.Q6J("cssClass",n.getInputCss(e.get("url"))),t.xp6(2),t.Q6J("items",n.iconTypes)("cssClass",n.getInputCss(e.get("type"))),t.xp6(2),t.Q6J("ngIf",e.value.type===n.IconType.Vector),t.xp6(2),t.Q6J("ngForOf",t.lcZ(19,11,n.categories$)),t.xp6(4),t.Oqu(t.xi3(23,13,e.get("createdAt").value,"short")),t.xp6(4),t.Oqu(t.xi3(27,16,e.get("updatedAt").value,"short")||"-")}}function Ct(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"table",4)(2,"thead")(3,"tr")(4,"th",5),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th",5),t._uU(7,"Icon"),t.qZA(),t.TgZ(8,"th",5),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th",5),t._uU(11,"Tags "),t.TgZ(12,"span"),t._uU(13,'(split with ",")'),t.qZA()(),t.TgZ(14,"th",5),t._uU(15,"URL"),t.qZA(),t.TgZ(16,"th",5),t._uU(17,"Type"),t.qZA(),t.TgZ(18,"th",5),t._uU(19,"Premium"),t.qZA(),t.TgZ(20,"th",5),t._uU(21,"Categories"),t.qZA(),t.TgZ(22,"th",5),t._uU(23,"Created At"),t.qZA(),t.TgZ(24,"th",5),t._uU(25,"Updated At"),t.qZA(),t._UZ(26,"th",5),t.qZA()(),t.TgZ(27,"tbody"),t.YNc(28,ft,30,19,"ng-container",6),t.qZA()(),t.BQk()),2&o){const e=t.oxw();t.xp6(28),t.Q6J("ngForOf",e.iconForms)}}function bt(o,c){1&o&&t._UZ(0,"span",26)}function xt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"bd-modal",27),t.NdJ("closed",function(){return t.CHM(e),t.oxw().isDeleting=!1})("saved",function(){return t.CHM(e),t.oxw().deleteIcon()}),t.TgZ(1,"div",28)(2,"p"),t._uU(3),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.hij('Are you sure you want to delete icon "',e.deleteIconControl.value.name,'"?')}}let vt=(()=>{class o{constructor(e,n,i,a,r){this.iconService=e,this.categoryService=n,this.notificationService=i,this.fb=a,this.clipboardService=r,this.loading=!1,this.form=new s.Oe([]),this.icons$=this.fetchIcons(),this.IconType=M.T,this.iconTypes=Object.entries(M.T).map(([d,h])=>({id:h,name:d})),this.categories$=this.categoryService.getCategories(),this.notifications$=this.notificationService.notificationsChanged,this.isDeleting=!1,this.deleteIconControl=this.fb.control([null,s.kI.required]),this.destroyed$=new x.xQ,this.COMPONENT_TITLE="Icon Management"}get iconForms(){return this.form.controls}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getIconType(e){switch(e){case M.T.Raster:return"Raster";case M.T.Vector:return"Vector";default:return"-"}}hasCategory(e,n){var i;return null===(i=e.categories)||void 0===i?void 0:i.some(a=>a.id===n.id)}toggleCategory(e,n,i){let a,r;return this.hasCategory(e,n)?(a={id:e.id,categories:e.categories.filter(d=>d.id!==n.id)},r=this.iconService.deleteIconCategory(e.id,n.id)):(a={id:e.id,categories:[...e.categories,n]},r=this.iconService.addIconCategory(e.id,n.id)),r.pipe((0,u.b)(()=>i.get("categories").setValue(a.categories))).subscribe()}getInputCss(e){const n="w-100 text-small";return e.invalid?`${n} is-invalid`:n}openDeleteModal(e){this.deleteIconControl.setValue(e),this.isDeleting=!0}deleteIcon(){this.loading=!0,this.iconService.deleteIcon(this.deleteIconControl.value.id).pipe((0,f.zg)(()=>this.icons$),(0,u.b)(e=>{this.localDelete(this.deleteIconControl.value.id,e),this.addNotification({name:this.deleteIconControl.value.name},"deleted"),this.deleteIconControl.reset()}),(0,C.x)(()=>this.loading=!1)).subscribe(),this.isDeleting=!1}copyId(e){this.clipboardService.copy(e),this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Id '${e}' has been copied to clipboard.`})}fetchIcons(){return this.loading=!0,this.iconService.getIcons({},!0).pipe((0,g.U)(e=>F.m.sortAlphaNumeric(e,"name")),(0,u.b)(e=>this.createForm(e)),(0,C.x)(()=>this.loading=!1))}createForm(e){this.form.clear(),e.forEach(n=>{const i=this.fb.group({id:[n.id,s.kI.required],name:[n.name,s.kI.required],tags:[n.tags],url:[n.url,s.kI.required],type:[n.type,s.kI.required],isPremium:[n.isPremium,s.kI.required],categories:[n.categories],createdAt:[n.createdAt,s.kI.required],updatedAt:[n.updatedAt]});(0,U.T)(i.get("name").valueChanges.pipe((0,g.U)(a=>({name:a}))),i.get("tags").valueChanges.pipe((0,g.U)(a=>({tags:a.split(",").map(r=>r.trim()).filter(r=>!!r.length)}))),i.get("url").valueChanges.pipe((0,g.U)(a=>({url:a}))),i.get("type").valueChanges.pipe((0,g.U)(a=>({type:a}))),i.get("isPremium").valueChanges.pipe((0,g.U)(a=>({isPremium:a})))).pipe((0,A.R)(this.destroyed$),(0,I.h)(()=>(i.updateValueAndValidity(),i.valid)),(0,P.b)(N.m.DEFAULT_DEBOUNCE_TIME),(0,w.x)((a,r)=>{const d=Object.keys(r)[0],h=a[d],Z=r[d];return Array.isArray(h)?S.i.isEqual(h,Z):h===Z}),(0,g.U)(a=>Object.assign({id:n.id},a)),(0,f.zg)(a=>(0,k.D)([(0,m.of)(a),this.iconService.patchIcon(a)])),(0,u.b)(([a])=>{this.localUpdate(a,e);const r=e.find(d=>d.id===a.id);r&&this.addNotification(Object.assign(Object.assign({},r),a),"updated")})).subscribe(),i.get("categories").valueChanges.pipe((0,g.U)(a=>({categories:a}))).pipe((0,A.R)(this.destroyed$),(0,g.U)(a=>Object.assign({id:n.id},a)),(0,u.b)(a=>{this.localUpdate(a,e);const r=e.find(d=>d.id===a.id);r&&this.addNotification(Object.assign(Object.assign({},r),a),"updated")})).subscribe(),this.form.push(i)})}localUpdate(e,n){const i=[...n],a=i.findIndex(r=>r.id===e.id);i[a]=Object.assign(Object.assign({},i[a]),e),this.icons$=(0,m.of)(i)}localDelete(e,n){this.icons$=(0,m.of)([...n.filter(i=>i.id!==e)]).pipe((0,u.b)(()=>{const i=this.form.controls.findIndex(a=>a.value.id===e);i&&this.form.removeAt(i)}))}addNotification(e,n){this.notificationService.addNotification({title:this.COMPONENT_TITLE,body:`Icon '${e.name}' has been ${n}.`})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(j.C),t.Y36(Y.H),t.Y36(v),t.Y36(s.qu),t.Y36(B.Yv))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bd-icon-management"]],decls:6,vars:8,consts:[[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],["modalTitle","Delete existing icon",3,"closed","saved",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"formGroup"],["scope","row",1,"cell-id",3,"click"],["title","Click to copy"],[1,"icon-preview",3,"src"],[1,"cell-name"],["formControlName","name",3,"cssClass"],["formControlName","tags"],["formControlName","url",3,"cssClass"],[1,"cell-type"],["formControlName","type","valueProp","id","labelProp","name",3,"items","cssClass"],["class","d-flex justify-content-center align-items-center checkbox-wrapper",4,"ngIf"],["class","d-flex align-items-center checkbox-wrapper",4,"ngFor","ngForOf"],[1,"cell-delete"],[1,"btn","btn-danger","btn-icon","icon-cross",3,"click"],[1,"d-flex","justify-content-center","align-items-center","checkbox-wrapper"],["type","checkbox","formControlName","isPremium",1,"checkbox","mr-2",3,"value","checked"],[1,"d-flex","align-items-center","checkbox-wrapper"],["type","checkbox",1,"checkbox","mr-2",3,"value","checked","id","change"],[3,"for"],[1,"spinner"],["modalTitle","Delete existing icon",3,"closed","saved"],[1,"container"]],template:function(e,n){if(1&e&&(t.YNc(0,Ct,29,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,bt,1,0,"span",1),t._UZ(3,"bd-notifications",2),t.ALo(4,"async"),t.YNc(5,xt,4,1,"bd-modal",3)),2&e){let i;t.Q6J("ngIf",(null==(i=t.lcZ(1,4,n.icons$))?null:i.length)&&!n.loading),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("items",t.lcZ(4,6,n.notifications$)),t.xp6(2),t.Q6J("ngIf",n.isDeleting)}},directives:[p.O5,p.sg,s.JL,s.sg,q.t,s.JJ,s.u,s.Fj,mt.J,s.Wl,y.t,$.z],pipes:[p.Ov,p.uU],styles:[".icon-preview[_ngcontent-%COMP%]{width:100px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{width:1.5rem;min-width:1.5rem;height:2rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#522699}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:60px;max-height:400px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.table[_ngcontent-%COMP%]   .cell-id[_ngcontent-%COMP%]{cursor:pointer;min-width:80px;max-width:80px;width:80px;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{min-width:250px;max-width:250px;width:250px}.table[_ngcontent-%COMP%]   .cell-type[_ngcontent-%COMP%]{min-width:150px;max-width:150px;width:150px}.table[_ngcontent-%COMP%]   .cell-type[_ngcontent-%COMP%]     .dropdown-toggle{min-width:auto}.table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]{opacity:0}.table[_ngcontent-%COMP%]   .cell-delete[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;padding:.25rem}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .cell-delete[_ngcontent-%COMP%]{opacity:1}"]}),o})();const yt=["files"];function Zt(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"th",11),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"formatBytes"),t.qZA(),t.TgZ(8,"td",12),t._UZ(9,"img",13),t.ALo(10,"async"),t.qZA()()),2&o){const e=c.$implicit,n=c.index,i=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(t.lcZ(7,4,e.size)),t.xp6(3),t.Q6J("src",t.lcZ(10,6,i.filePreviews.get(e.name)),t.LSH)}}function Tt(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",7)(2,"thead")(3,"tr")(4,"th",8),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th",8),t._uU(7,"File Name"),t.qZA(),t.TgZ(8,"th",8),t._uU(9,"File Size"),t.qZA(),t.TgZ(10,"th",8),t._uU(11,"Preview"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,Zt,11,8,"tr",9),t.qZA()(),t.TgZ(14,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploadIcons()}),t._uU(15,"Upload Icons"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.selectedFilesArray)("ngForTrackBy",e.trackFn)}}function At(o,c){1&o&&t._UZ(0,"span",14)}const Mt=[{path:"",component:V,canActivate:[H],children:[{path:"",component:G},{path:"icons",children:[{path:"upload",component:(()=>{class o{constructor(e,n,i){this.iconService=e,this.domSanitizer=n,this.notificationService=i,this.filePreviews=new Map,this.loading=!1,this.notifications$=this.notificationService.notificationsChanged,this.destroyed$=new x.xQ}get selectedFilesArray(){return Array.from(this.selectedFiles||[])}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}selectFiles(e){this.selectedFiles=e.target.files||[],this.selectedFilesArray.forEach(n=>{this.filePreviews.set(n.name,new Promise((i,a)=>{const r=new FileReader;r.onload=()=>{i(this.domSanitizer.bypassSecurityTrustUrl(r.result))},r.onerror=d=>{a(d)},r.readAsDataURL(n)}))})}uploadIcons(){if(!this.selectedFiles)return;const e=new FormData;for(const n of this.selectedFilesArray)e.append("files",n);this.iconService.uploadIcons(e).pipe((0,u.b)(()=>this.loading=!0),(0,T.K)(n=>(0,Q._)(n)),(0,C.x)(()=>{this.addUploadNotification(this.selectedFilesArray.length),this.loading=!1,this.filesEl.nativeElement.value=null})).subscribe()}trackFn(e,n){return n.name}addUploadNotification(e){this.notificationService.addNotification({title:"Icons Bulk Upload",createdAt:new Date,body:`${e} icons have been uploaded.`})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(j.C),t.Y36(E.H7),t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bd-icons-bulk-upload"]],viewQuery:function(e,n){if(1&e&&t.Gf(yt,5),2&e){let i;t.iGM(i=t.CRH())&&(n.filesEl=i.first)}},decls:9,vars:5,consts:[[1,"d-flex","flex-column"],["type","file","multiple","","accept","image/*",1,"d-none",3,"change"],["files",""],[1,"btn","btn-menu","btn-icon","mb-2","icon-collection",3,"click"],[4,"ngIf"],["class","spinner",4,"ngIf"],[3,"items"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn",3,"click"],["scope","row"],[1,"text-center"],[1,"icon-preview",3,"src"],[1,"spinner"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"input",1,2),t.NdJ("change",function(r){return n.selectFiles(r)}),t.qZA(),t.TgZ(3,"button",3),t.NdJ("click",function(){return t.CHM(i),t.MAs(2).click()}),t._uU(4,"Select Files"),t.qZA(),t.YNc(5,Tt,16,2,"ng-container",4),t.YNc(6,At,1,0,"span",5),t.qZA(),t._UZ(7,"bd-notifications",6),t.ALo(8,"async")}2&e&&(t.xp6(5),t.Q6J("ngIf",(null==n.selectedFilesArray?null:n.selectedFilesArray.length)&&!n.loading),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("items",t.lcZ(8,3,n.notifications$)))},directives:[p.O5,p.sg,y.t],pipes:[L.b,p.Ov],styles:[".icon-preview[_ngcontent-%COMP%]{height:50px}"]}),o})()},{path:"",component:vt}]},{path:"categories",component:ut},{path:"backgrounds",children:[{path:"upload",component:ct},{path:"",component:nt}]}]}];let Ot=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[_.Bz.forChild(Mt)],_.Bz]}),o})();var Ut=l(8408);let kt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,Ot,Ut.m]]}),o})()}}]);
//# sourceMappingURL=702.f2b93f9db1dfcaf3.js.map