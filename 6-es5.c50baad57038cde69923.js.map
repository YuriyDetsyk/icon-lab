{"version":3,"sources":["webpack:///src/app/modules/admin/admin-home/admin-home.component.ts","webpack:///src/app/core/guards/admin.guard.ts","webpack:///src/app/core/guards/auth.guard.ts","webpack:///src/app/modules/admin/admin.component.ts","webpack:///src/app/core/services/notification.service.ts","webpack:///src/app/modules/admin/admin-home/admin-home.component.html","webpack:///src/app/modules/admin/admin.component.html","webpack:///src/app/modules/admin/background-management/background-management.component.html","webpack:///src/app/modules/admin/background-management/background-management.component.ts","webpack:///src/app/modules/admin/bg-bulk-upload/bg-bulk-upload.component.html","webpack:///src/app/modules/admin/bg-bulk-upload/bg-bulk-upload.component.ts","webpack:///src/app/modules/admin/category-management/category-management.component.html","webpack:///src/app/modules/admin/category-management/category-management.component.ts","webpack:///src/app/modules/admin/icon-management/icon-management.component.html","webpack:///src/app/modules/admin/icon-management/icon-management.component.ts","webpack:///src/app/modules/admin/icons-bulk-upload/icons-bulk-upload.component.html","webpack:///src/app/modules/admin/admin-routing.module.ts","webpack:///src/app/modules/admin/icons-bulk-upload/icons-bulk-upload.component.ts","webpack:///src/app/modules/admin/admin.module.ts"],"names":["AdminHomeComponent","AdminGuard","AuthGuard","AdminComponent","NotificationService","authService","router","_","state","sessionData","this","getSessionData","existingToken","getToken","of","verifyToken","pipe","map","data","redirect","url","catchError","navigate","queryParams","redirectUrl","authGuard","route","canActivate","isAuthorized","user","isAdmin","adminTabs","id","IconManagement","title","IconsBulkUpload","CategoryManagement","BackgroundManagement","BgBulkUpload","TabId","tabId","tab","find","t","logout","subscribe","username","toWebsite","onTabChange","DEFAULT_DURATION","notifications$","BehaviorSubject","notification","createdAt","Date","next","value","setTimeout","filter","n","getTime","duration","asObservable","BackgroundManagementComponent","backgroundService","notificationService","fb","clipboardService","loading","form","backgrounds$","fetchBackgrounds","notificationsChanged","isDeleting","deleteBackgroundControl","control","required","destroyed$","Subject","COMPONENT_TITLE","complete","backgroundFieldControl","invalid","background","setValue","deleteBackground","mergeMap","tap","backgrounds","localDelete","addNotification","name","reset","finalize","copy","body","getBackgrounds","sortAlphaNumeric","createForm","clear","forEach","i","group","tags","updatedAt","merge","get","valueChanges","val","split","tag","trim","length","takeUntil","updateValueAndValidity","valid","debounceTime","DEFAULT_DEBOUNCE_TIME","distinctUntilChanged","x","y","key","Object","keys","oldVal","newVal","Array","isArray","isEqual","changes","forkJoin","patchBackground","updatedBackground","localUpdate","updatedBackgroundFull","item","push","clonedBackgrounds","index","findIndex","backgroundId","controlIndex","controls","c","removeAt","action","BgBulkUploadComponent","domSanitizer","filePreviews","Map","event","selectedFiles","target","files","selectedFilesArray","file","set","Promise","resolve","reject","reader","FileReader","onload","bypassSecurityTrustUrl","result","onerror","e","readAsDataURL","formData","FormData","append","uploadBackgrounds","throwError","addUploadNotification","filesEl","nativeElement","qty","from","selectFiles","CategoryManagementComponent","categoryService","categories$","fetchCategories","isAddingCategory","newCategoryForm","description","deleteCategoryControl","categoryFieldControl","addCategory","category","deleteCategory","getCategories","categories","patchCategory","updatedCategory","updatedCategoryFull","IconManagementComponent","iconService","icons$","fetchIcons","IconType","iconTypes","entries","deleteIconControl","type","Raster","Vector","icon","some","cat","iconControl","updatedIcon","obs$","hasCategory","deleteIconCategory","addIconCategory","iconFieldControl","deleteIcon","icons","getIcons","isPremium","patchIcon","updatedIconFull","clonedIcons","iconId","IconsBulkUploadComponent","AdminRoutingModule","AdminModule","routes","path","component","children","uploadIcons","iconsQty","forChild"],"mappings":"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","file":"x","sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'bd-admin-home',\n  templateUrl: './admin-home.component.html',\n  styleUrls: ['./admin-home.component.scss'],\n})\nexport class AdminHomeComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit(): void {}\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { AuthService } from '../services/auth.service';\nimport { AuthGuard } from './auth.guard';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AdminGuard implements CanActivate {\n  constructor(\n    private readonly authService: AuthService,\n    private readonly router: Router,\n    private readonly authGuard: AuthGuard\n  ) {}\n\n  public canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n    const isAuthorized$ = this.authGuard.canActivate(route, state);\n    return isAuthorized$.pipe(\n      map((isAuthorized) => {\n        if (!isAuthorized) {\n          return this.redirect(state.url);\n        }\n\n        const res = this.authService.getSessionData()?.user?.isAdmin;\n        if (!res) {\n          return this.redirect(state.url);\n        } else {\n          return true;\n        }\n      }),\n      catchError(() => of(this.redirect(state.url)))\n    );\n  }\n  private redirect(url: string) {\n    this.router.navigate(['login'], { queryParams: { redirectUrl: url } });\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { AuthService } from '../services/auth.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthGuard implements CanActivate {\n  constructor(private readonly authService: AuthService, private readonly router: Router) {}\n\n  public canActivate(_: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n    const sessionData = this.authService.getSessionData();\n    const existingToken = this.authService.getToken();\n\n    if (!sessionData) {\n      if (!existingToken) {\n        return of(false).pipe(map(() => this.redirect(state.url)));\n      }\n\n      return this.authService.verifyToken().pipe(\n        map((data) => {\n          if (!data) {\n            return this.redirect(state.url);\n          } else {\n            return true;\n          }\n        }),\n        catchError(() => of(this.redirect(state.url)))\n      );\n    } else {\n      return of(true);\n    }\n  }\n\n  private redirect(url: string) {\n    this.router.navigate(['login'], { queryParams: { redirectUrl: url } });\n    return false;\n  }\n}\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { AuthService } from '../../core/services/auth.service';\nimport { TabId } from '../../models/enums/tab-id';\nimport { NavTab } from '../../models/interfaces/nav-tab';\n\n@Component({\n  selector: 'bd-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.scss'],\n})\nexport class AdminComponent {\n  public adminTabs: NavTab[] = [\n    {\n      id: TabId.IconManagement,\n      title: 'Icon Management',\n      url: '/admin/icons',\n    },\n    {\n      id: TabId.IconsBulkUpload,\n      title: 'Icons Bulk Upload',\n      url: '/admin/icons/upload',\n    },\n    {\n      id: TabId.CategoryManagement,\n      title: 'Category Management',\n      url: '/admin/categories',\n    },\n    {\n      id: TabId.BackgroundManagement,\n      title: 'Background Management',\n      url: '/admin/backgrounds',\n    },\n    {\n      id: TabId.BgBulkUpload,\n      title: 'Backgrounds Bulk Upload',\n      url: '/admin/backgrounds/upload',\n    },\n  ];\n  // public activeTabId: TabId;\n  public TabId = TabId;\n  public get username() {\n    return this.authService.username || 'ADMIN';\n  }\n\n  constructor(private readonly authService: AuthService, private readonly router: Router) {}\n\n  public onTabChange(tabId: TabId) {\n    const tab = this.adminTabs.find((t) => t.id === tabId);\n    this.router.navigate([tab.url]);\n  }\n\n  public toWebsite() {\n    this.router.navigate(['']);\n  }\n\n  public logout() {\n    this.authService.logout().subscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { Notification } from '../../models/interfaces/notification';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NotificationService {\n  public readonly DEFAULT_DURATION = 4000;\n  public get notificationsChanged() {\n    return this.notifications$.asObservable();\n  }\n  private notifications$ = new BehaviorSubject<Notification[]>([]);\n\n  public addNotification(notification: Notification) {\n    if (!notification.createdAt) {\n      notification.createdAt = new Date();\n    }\n\n    this.notifications$.next([...this.notifications$.value, notification]);\n\n    setTimeout(\n      () =>\n        this.notifications$.next(\n          this.notifications$.value.filter((n) => n.createdAt.getTime() !== notification.createdAt.getTime())\n        ),\n      notification.duration || this.DEFAULT_DURATION\n    );\n  }\n}\n","<div class=\"d-flex justify-content-center align-items-center my-5\">\n  <h5>Please select a tool above</h5>\n</div>","<div class=\"position-fixed w-100 header-wrapper\">\n  <div class=\"d-flex justify-content-end align-items-center p-2 border-bottom\">\n    <a class=\"mr-auto app-logo\"\n       routerLink=\"\"></a>\n    <h5 class=\"m-0 mr-3\">Welcome, {{ username }}</h5>\n    <button class=\"btn btn-primary mr-3\"\n            (click)=\"toWebsite()\">Go to Website</button>\n    <button class=\"btn btn-primary\"\n            (click)=\"logout()\">Logout</button>\n  </div>\n\n  <bd-tabs [tabs]=\"adminTabs\"\n           [snap]=\"'bottom'\"\n           (tabChange)=\"onTabChange($event)\"\n           class=\"pt-3\"></bd-tabs>\n</div>\n\n<div class=\"d-flex flex-column content-wrapper\">\n  <router-outlet></router-outlet>\n</div>","<ng-container *ngIf=\"(backgrounds$ | async)?.length && !loading\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Background</th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Tags <span>(split with \",\")</span></th>\n        <th scope=\"col\">URL</th>\n        <th scope=\"col\">Created At</th>\n        <th scope=\"col\">Updated At</th>\n        <th scope=\"col\"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let background of backgroundForms; let i = index\">\n        <tr [formGroup]=\"background\">\n          <td scope=\"row\"\n              class=\"cell-id\"\n              (click)=\"copyId(background.get('id').value)\"><small title=\"Click to copy\">{{ background.get('id').value }}</small></td>\n          <td><img class=\"background-preview\"\n                 [src]=\"background.get('url').value\"></td>\n          <td class=\"cell-name\">\n            <bd-text-input formControlName=\"name\"\n                           [cssClass]=\"getInputCss(background.get('name'))\"></bd-text-input>\n          </td>\n          <td>\n            <textarea formControlName=\"tags\"></textarea>\n          </td>\n          <td>\n            <bd-text-input formControlName=\"url\"\n                           [cssClass]=\"getInputCss(background.get('url'))\"></bd-text-input>\n          </td>\n          <td><small>{{ background.get('createdAt').value | date:'short'}}</small></td>\n          <td><small>{{ (background.get('updatedAt').value | date:'short') || '-' }}</small></td>\n          <td class=\"cell-delete\">\n            <button class=\"btn btn-danger btn-icon icon-cross\"\n                    (click)=\"openDeleteModal(background.value)\"></button>\n          </td>\n        </tr>\n      </ng-container>\n    </tbody>\n  </table>\n</ng-container>\n\n<span *ngIf=\"loading\"\n      class=\"spinner\"></span>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>\n\n<bd-modal *ngIf=\"isDeleting\"\n          modalTitle=\"Delete existing background\"\n          (closed)=\"isDeleting = false\"\n          (saved)=\"deleteBackground()\">\n  <div class=\"container\">\n    <p>Are you sure you want to delete background \"{{deleteBackgroundControl.value.name}}\"?</p>\n  </div>\n</bd-modal>\n","import { Component, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ClipboardService } from 'ngx-clipboard';\nimport { forkJoin, merge, of, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, finalize, map, mergeMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { BackgroundService } from '../../../core/services/background.service';\nimport { NotificationService } from '../../../core/services/notification.service';\nimport { BackgroundDto } from '../../../models/dto/background-dto';\nimport { ArrayHelper } from '../../../shared/helpers/array.helper';\nimport { DataHelper } from '../../../shared/helpers/data.helper';\nimport { TextHelper } from '../../../shared/helpers/text.helper';\n\n@Component({\n  selector: 'bd-background-management',\n  templateUrl: './background-management.component.html',\n  styleUrls: ['./background-management.component.scss'],\n})\nexport class BackgroundManagementComponent implements OnDestroy {\n  public loading = false;\n  public form = new FormArray([]);\n  public backgrounds$ = this.fetchBackgrounds();\n  public notifications$ = this.notificationService.notificationsChanged;\n  public get backgroundForms() {\n    return this.form.controls as FormGroup[];\n  }\n  public isDeleting = false;\n  public deleteBackgroundControl = this.fb.control([null, Validators.required]);\n  private destroyed$ = new Subject<void>();\n  private readonly COMPONENT_TITLE = 'Background Management';\n\n  constructor(\n    private readonly backgroundService: BackgroundService,\n    private readonly notificationService: NotificationService,\n    private readonly fb: FormBuilder,\n    private readonly clipboardService: ClipboardService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public getInputCss(backgroundFieldControl: AbstractControl) {\n    const cssClass = 'w-100 text-small';\n    return backgroundFieldControl.invalid ? `${cssClass} is-invalid` : cssClass;\n  }\n\n  public openDeleteModal(background: BackgroundDto) {\n    this.deleteBackgroundControl.setValue(background);\n    this.isDeleting = true;\n  }\n\n  public deleteBackground() {\n    this.loading = true;\n    this.backgroundService\n      .deleteBackground(this.deleteBackgroundControl.value.id)\n      .pipe(\n        mergeMap(() => this.backgrounds$),\n        tap((backgrounds) => {\n          this.localDelete(this.deleteBackgroundControl.value.id, backgrounds);\n          this.addNotification({ name: this.deleteBackgroundControl.value.name }, 'deleted');\n          this.deleteBackgroundControl.reset();\n        }),\n        finalize(() => (this.loading = false))\n      )\n      .subscribe();\n\n    this.isDeleting = false;\n  }\n\n  public copyId(id: string) {\n    this.clipboardService.copy(id);\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Id '${id}' has been copied to clipboard.`,\n    });\n  }\n\n  private fetchBackgrounds() {\n    this.loading = true;\n\n    return this.backgroundService.getBackgrounds(true).pipe(\n      map((backgrounds) => ArrayHelper.sortAlphaNumeric(backgrounds, 'name')),\n      tap((backgrounds) => this.createForm(backgrounds)),\n      finalize(() => (this.loading = false))\n    );\n  }\n\n  private createForm(backgrounds: BackgroundDto[]) {\n    this.form.clear();\n\n    backgrounds.forEach((i) => {\n      const group = this.fb.group({\n        id: [i.id, Validators.required],\n        name: [i.name, Validators.required],\n        tags: [i.tags],\n        url: [i.url, Validators.required],\n        createdAt: [i.createdAt, Validators.required],\n        updatedAt: [i.updatedAt],\n      });\n      merge(\n        group.get('name').valueChanges.pipe(map((val) => ({ name: val }))),\n        group.get('tags').valueChanges.pipe(\n          map((val) => ({\n            tags: val\n              .split(',')\n              .map((tag: string) => tag.trim())\n              .filter((tag: string) => !!tag.length),\n          }))\n        ),\n        group.get('url').valueChanges.pipe(map((val) => ({ url: val })))\n      )\n        .pipe(\n          takeUntil(this.destroyed$),\n          filter(() => {\n            group.updateValueAndValidity();\n            return group.valid;\n          }),\n          debounceTime(TextHelper.DEFAULT_DEBOUNCE_TIME),\n          distinctUntilChanged((x, y) => {\n            const key = Object.keys(y)[0];\n            const oldVal = (x as any)[key];\n            const newVal = (y as any)[key];\n            const isArray = Array.isArray(oldVal);\n            return isArray ? DataHelper.isEqual(oldVal, newVal) : oldVal === newVal;\n          }),\n          map((changes) => ({ id: i.id, ...changes } as Partial<BackgroundDto>)),\n          mergeMap((background) => forkJoin([of(background), this.backgroundService.patchBackground(background)])),\n          tap(([updatedBackground]) => {\n            this.localUpdate(updatedBackground, backgrounds);\n            const updatedBackgroundFull = backgrounds.find((item) => item.id === updatedBackground.id);\n            if (updatedBackgroundFull) {\n              this.addNotification({ ...updatedBackgroundFull, ...updatedBackground }, 'updated');\n            }\n          })\n        )\n        .subscribe();\n\n      this.form.push(group);\n    });\n  }\n\n  private localUpdate(updatedBackground: Partial<BackgroundDto>, backgrounds: BackgroundDto[]) {\n    const clonedBackgrounds = [...backgrounds];\n    const index = clonedBackgrounds.findIndex((background) => background.id === updatedBackground.id);\n    clonedBackgrounds[index] = { ...clonedBackgrounds[index], ...updatedBackground };\n    this.backgrounds$ = of(clonedBackgrounds);\n  }\n\n  private localDelete(backgroundId: string, backgrounds: BackgroundDto[]) {\n    this.backgrounds$ = of([...backgrounds.filter((background) => background.id !== backgroundId)]).pipe(\n      tap(() => {\n        const controlIndex = this.form.controls.findIndex((c) => c.value.id === backgroundId);\n        if (controlIndex) {\n          this.form.removeAt(controlIndex);\n        }\n      })\n    );\n  }\n\n  private addNotification(background: Partial<BackgroundDto>, action: 'updated' | 'deleted') {\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Background '${background.name}' has been ${action}.`,\n    });\n  }\n}\n","<div class=\"d-flex flex-column\">\n  <input class=\"d-none\"\n         type=\"file\"\n         multiple\n         accept=\"image/*\"\n         #files\n         (change)=\"selectFiles($event)\" />\n  <button class=\"btn btn-menu btn-icon mb-2 icon-collection\"\n          (click)=\"files.click()\">Select Files</button>\n\n  <ng-container *ngIf=\"selectedFilesArray?.length && !loading\">\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">#</th>\n          <th scope=\"col\">File Name</th>\n          <th scope=\"col\">File Size</th>\n          <th scope=\"col\">Preview</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let file of selectedFilesArray; let i = index; trackBy: trackFn\">\n          <th scope=\"row\">{{ i + 1 }}</th>\n          <td>{{ file.name }}</td>\n          <td>{{ file.size | formatBytes }}</td>\n          <td class=\"text-center\"><img class=\"icon-preview\"\n                 [src]=\"filePreviews.get(file.name) | async\" /></td>\n        </tr>\n      </tbody>\n    </table>\n\n    <button class=\"btn\"\n            (click)=\"uploadBackgrounds()\">Upload Backgrounds</button>\n  </ng-container>\n\n  <span *ngIf=\"loading\"\n        class=\"spinner\"></span>\n</div>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>\n","import { Component, ElementRef, OnDestroy, ViewChild } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Subject, throwError } from 'rxjs';\nimport { catchError, finalize, tap } from 'rxjs/operators';\nimport { BackgroundService } from '../../../core/services/background.service';\n\nimport { NotificationService } from '../../../core/services/notification.service';\n\n@Component({\n  selector: 'bd-bg-bulk-upload',\n  templateUrl: './bg-bulk-upload.component.html',\n  styleUrls: ['./bg-bulk-upload.component.scss'],\n})\nexport class BgBulkUploadComponent implements OnDestroy {\n  @ViewChild('files') public filesEl: ElementRef<HTMLInputElement>;\n  public selectedFiles: FileList;\n  public filePreviews = new Map<string, Promise<string>>();\n  public get selectedFilesArray(): File[] {\n    return Array.from(this.selectedFiles || []);\n  }\n  public loading = false;\n  public notifications$ = this.notificationService.notificationsChanged;\n  private destroyed$ = new Subject<void>();\n\n  constructor(\n    private readonly backgroundService: BackgroundService,\n    private readonly domSanitizer: DomSanitizer,\n    private readonly notificationService: NotificationService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public selectFiles(event: any) {\n    this.selectedFiles = event.target.files || [];\n\n    this.selectedFilesArray.forEach((file) => {\n      this.filePreviews.set(\n        file.name,\n        new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            resolve(this.domSanitizer.bypassSecurityTrustUrl(reader.result as string) as string);\n          };\n          reader.onerror = (e) => {\n            reject(e);\n          };\n\n          reader.readAsDataURL(file);\n        })\n      );\n    });\n  }\n\n  public uploadBackgrounds() {\n    if (!this.selectedFiles) {\n      return;\n    }\n\n    const formData = new FormData();\n    for (const file of this.selectedFilesArray) {\n      formData.append('files', file);\n    }\n\n    this.backgroundService\n      .uploadBackgrounds(formData)\n      .pipe(\n        tap(() => (this.loading = true)),\n        catchError((e) => throwError(e)),\n        finalize(() => {\n          this.addUploadNotification(this.selectedFilesArray.length);\n          this.loading = false;\n          this.filesEl.nativeElement.value = null;\n        })\n      )\n      .subscribe();\n  }\n\n  public trackFn(_: number, item: File) {\n    return item.name;\n  }\n\n  private addUploadNotification(qty: number) {\n    this.notificationService.addNotification({\n      title: 'Backgrounds Bulk Upload',\n      createdAt: new Date(),\n      body: `${qty} backgrounds have been uploaded.`,\n    });\n  }\n}\n","<button class=\"btn btn-primary btn-add\"\n        (click)=\"isAddingCategory = true\">Add Category</button>\n\n<ng-container *ngIf=\"(categories$ | async)?.length && !loading\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Description</th>\n        <th scope=\"col\">Created At</th>\n        <th scope=\"col\">Updated At</th>\n        <th scope=\"col\"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let category of categoryForms; let i = index\">\n        <tr [formGroup]=\"category\">\n          <td scope=\"row\"\n              class=\"cell-id\"\n              (click)=\"copyId(category.get('id').value)\"><small title=\"Click to copy\">{{ category.get('id').value }}</small></td>\n          <td class=\"cell-name\">\n            <bd-text-input formControlName=\"name\"\n                           [cssClass]=\"getInputCss(category.get('name'))\"></bd-text-input>\n          </td>\n          <td>\n            <bd-text-input formControlName=\"description\"\n                           [cssClass]=\"getInputCss(category.get('description'))\"></bd-text-input>\n          </td>\n          <td>{{ category.get('createdAt').value | date:'short'}}</td>\n          <td>{{ (category.get('updatedAt').value | date:'short') || '-' }}</td>\n          <td class=\"cell-delete\">\n            <button class=\"btn btn-danger btn-icon icon-cross\"\n                    (click)=\"openDeleteModal(category.value)\"></button>\n          </td>\n        </tr>\n      </ng-container>\n    </tbody>\n  </table>\n</ng-container>\n\n<span *ngIf=\"loading\"\n      class=\"spinner\"></span>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>\n\n<bd-modal *ngIf=\"isAddingCategory\"\n          modalTitle=\"Add new category\"\n          (closed)=\"cancelAddingCategory()\"\n          (saved)=\"addCategory()\">\n  <form [formGroup]=\"newCategoryForm\">\n    <div class=\"form-group\">\n      <label for=\"name\">Name</label>\n      <bd-text-input inputId=\"name\"\n                     formControlName=\"name\"\n                     placeholder=\"Category name...\"\n                     [cssClass]=\"getInputCss(newCategoryForm.get('name'))\"></bd-text-input>\n    </div>\n    <div class=\"form-group\">\n      <label for=\"description\">Description</label>\n      <bd-text-input inputId=\"description\"\n                     formControlName=\"description\"\n                     placeholder=\"Category description...\"\n                     [cssClass]=\"getInputCss(newCategoryForm.get('description'))\"></bd-text-input>\n    </div>\n  </form>\n</bd-modal>\n\n<bd-modal *ngIf=\"isDeleting\"\n          modalTitle=\"Delete existing category\"\n          (closed)=\"isDeleting = false\"\n          (saved)=\"deleteCategory()\">\n  <div class=\"container\">\n    <p>Are you sure you want to delete category \"{{deleteCategoryControl.value.name}}\"?</p>\n  </div>\n</bd-modal>","import { Component, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ClipboardService } from 'ngx-clipboard';\nimport { forkJoin, merge, of, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, finalize, map, mergeMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { CategoryService } from '../../../core/services/category.service';\nimport { NotificationService } from '../../../core/services/notification.service';\nimport { CategoryDto } from '../../../models/dto/category-dto';\nimport { ArrayHelper } from '../../../shared/helpers/array.helper';\nimport { TextHelper } from '../../../shared/helpers/text.helper';\n\n@Component({\n  selector: 'bd-category-management',\n  templateUrl: './category-management.component.html',\n  styleUrls: ['./category-management.component.scss'],\n})\nexport class CategoryManagementComponent implements OnDestroy {\n  public loading = false;\n  public form = new FormArray([]);\n  public categories$ = this.fetchCategories();\n  public notifications$ = this.notificationService.notificationsChanged;\n  public get categoryForms() {\n    return this.form.controls as FormGroup[];\n  }\n  public isAddingCategory = false;\n  public isDeleting = false;\n  public newCategoryForm = this.fb.group({\n    name: [null, Validators.required],\n    description: [null],\n  });\n  public deleteCategoryControl = this.fb.control([null, Validators.required]);\n  private destroyed$ = new Subject<void>();\n  private readonly COMPONENT_TITLE = 'Category Management';\n\n  constructor(\n    private readonly categoryService: CategoryService,\n    private readonly notificationService: NotificationService,\n    private readonly fb: FormBuilder,\n    private readonly clipboardService: ClipboardService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public getInputCss(categoryFieldControl: AbstractControl) {\n    const cssClass = 'w-100 text-small';\n    return categoryFieldControl.invalid ? `${cssClass} is-invalid` : cssClass;\n  }\n\n  public cancelAddingCategory() {\n    this.isAddingCategory = false;\n    this.newCategoryForm.reset();\n  }\n\n  public addCategory() {\n    if (this.newCategoryForm.invalid) {\n      return;\n    }\n\n    this.loading = true;\n    this.categoryService\n      .addCategory(this.newCategoryForm.value)\n      .pipe(\n        mergeMap(() => this.fetchCategories()),\n        tap(() => {\n          this.addNotification({ name: this.newCategoryForm.value.name }, 'added');\n          this.newCategoryForm.reset();\n        })\n      )\n      .subscribe();\n\n    this.isAddingCategory = false;\n  }\n\n  public openDeleteModal(category: CategoryDto) {\n    this.deleteCategoryControl.setValue(category);\n    this.isDeleting = true;\n  }\n\n  public deleteCategory() {\n    this.loading = true;\n    this.categoryService\n      .deleteCategory(this.deleteCategoryControl.value.id)\n      .pipe(\n        mergeMap(() => this.fetchCategories()),\n        tap(() => {\n          this.addNotification({ name: this.deleteCategoryControl.value.name }, 'deleted');\n          this.deleteCategoryControl.reset();\n        })\n      )\n      .subscribe();\n\n    this.isDeleting = false;\n  }\n\n  public copyId(id: string) {\n    this.clipboardService.copy(id);\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Id '${id}' has been copied to clipboard.`,\n    });\n  }\n\n  private fetchCategories() {\n    this.loading = true;\n\n    return this.categoryService.getCategories(true).pipe(\n      map((categories) => ArrayHelper.sortAlphaNumeric(categories, 'name')),\n      tap((categories) => this.createForm(categories)),\n      finalize(() => (this.loading = false))\n    );\n  }\n\n  private createForm(categories: CategoryDto[]) {\n    this.form.clear();\n\n    categories.forEach((i) => {\n      const group = this.fb.group({\n        id: [i.id, Validators.required],\n        name: [i.name, Validators.required],\n        description: [i.description, Validators.required],\n        createdAt: [i.createdAt, Validators.required],\n        updatedAt: [i.updatedAt],\n      });\n      merge(\n        group.get('name').valueChanges.pipe(map((val) => ({ name: val }))),\n        group.get('description').valueChanges.pipe(map((val) => ({ description: val })))\n      )\n        .pipe(\n          takeUntil(this.destroyed$),\n          filter(() => {\n            group.updateValueAndValidity();\n            return group.valid;\n          }),\n          debounceTime(TextHelper.DEFAULT_DEBOUNCE_TIME),\n          distinctUntilChanged((x, y) => {\n            const key = Object.keys(y)[0];\n            return (x as any)[key] === (y as any)[key];\n          }),\n          map((changes) => ({ id: i.id, ...changes } as Partial<CategoryDto>)),\n          mergeMap((category) => forkJoin([of(category), this.categoryService.patchCategory(category)])),\n          tap(([updatedCategory]) => {\n            const updatedCategoryFull = categories.find((item) => item.id === updatedCategory.id);\n            if (updatedCategoryFull) {\n              this.addNotification({ ...updatedCategoryFull, ...updatedCategory }, 'updated');\n            }\n\n            this.categories$ = this.fetchCategories();\n          })\n        )\n        .subscribe();\n\n      this.form.push(group);\n    });\n  }\n\n  private addNotification(category: Partial<CategoryDto>, action: 'added' | 'updated' | 'deleted') {\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Category '${category.name}' has been ${action}.`,\n    });\n  }\n}\n","<ng-container *ngIf=\"(icons$ | async)?.length && !loading\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Icon</th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Tags <span>(split with \",\")</span></th>\n        <th scope=\"col\">URL</th>\n        <th scope=\"col\">Type</th>\n        <th scope=\"col\">Premium</th>\n        <th scope=\"col\">Categories</th>\n        <th scope=\"col\">Created At</th>\n        <th scope=\"col\">Updated At</th>\n        <th scope=\"col\"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <ng-container *ngFor=\"let icon of iconForms; let i = index\">\n        <tr [formGroup]=\"icon\">\n          <td scope=\"row\"\n              class=\"cell-id\"\n              (click)=\"copyId(icon.get('id').value)\"><small title=\"Click to copy\">{{ icon.get('id').value }}</small></td>\n          <td><img class=\"icon-preview\"\n                 [src]=\"icon.get('url').value\"></td>\n          <td class=\"cell-name\">\n            <bd-text-input formControlName=\"name\"\n                           [cssClass]=\"getInputCss(icon.get('name'))\"></bd-text-input>\n          </td>\n          <td>\n            <textarea formControlName=\"tags\"></textarea>\n          </td>\n          <td>\n            <bd-text-input formControlName=\"url\"\n                           [cssClass]=\"getInputCss(icon.get('url'))\"></bd-text-input>\n          </td>\n          <td class=\"cell-type\">\n            <bd-dropdown formControlName=\"type\"\n                         [items]=\"iconTypes\"\n                         valueProp=\"id\"\n                         labelProp=\"name\"\n                         [cssClass]=\"getInputCss(icon.get('type'))\"></bd-dropdown>\n          </td>\n          <td>\n            <div class=\"d-flex justify-content-center align-items-center checkbox-wrapper\"\n                 *ngIf=\"icon.value.type === IconType.Vector\">\n              <input type=\"checkbox\"\n                     class=\"checkbox mr-2\"\n                     [value]=\"icon.value.isPremium\"\n                     [checked]=\"icon.value.isPremium\"\n                     formControlName=\"isPremium\">\n            </div>\n          </td>\n          <td>\n            <div class=\"d-flex align-items-center checkbox-wrapper\"\n                 *ngFor=\"let category of categories$ | async\">\n              <input type=\"checkbox\"\n                     class=\"checkbox mr-2\"\n                     [value]=\"category\"\n                     [checked]=\"hasCategory(icon.value, category)\"\n                     (change)=\"toggleCategory(icon.value, category, icon)\"\n                     id=\"category-checkbox-{{i}}-{{category.id}}\">\n              <label for=\"category-checkbox-{{i}}-{{category.id}}\">\n                {{category.name}}\n              </label>\n            </div>\n          </td>\n          <td><small>{{ icon.get('createdAt').value | date:'short'}}</small></td>\n          <td><small>{{ (icon.get('updatedAt').value | date:'short') || '-' }}</small></td>\n          <td class=\"cell-delete\">\n            <button class=\"btn btn-danger btn-icon icon-cross\"\n                    (click)=\"openDeleteModal(icon.value)\"></button>\n          </td>\n        </tr>\n      </ng-container>\n    </tbody>\n  </table>\n</ng-container>\n\n<span *ngIf=\"loading\"\n      class=\"spinner\"></span>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>\n\n<bd-modal *ngIf=\"isDeleting\"\n          modalTitle=\"Delete existing icon\"\n          (closed)=\"isDeleting = false\"\n          (saved)=\"deleteIcon()\">\n  <div class=\"container\">\n    <p>Are you sure you want to delete icon \"{{deleteIconControl.value.name}}\"?</p>\n  </div>\n</bd-modal>\n","import { Component, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ClipboardService } from 'ngx-clipboard';\nimport { forkJoin, merge, Observable, of, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, finalize, map, mergeMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { CategoryService } from '../../../core/services/category.service';\nimport { IconService } from '../../../core/services/icon.service';\nimport { NotificationService } from '../../../core/services/notification.service';\nimport { CategoryDto } from '../../../models/dto/category-dto';\nimport { IconDto } from '../../../models/dto/icon-dto';\nimport { IconType } from '../../../models/enums/icon-type';\nimport { ArrayHelper } from '../../../shared/helpers/array.helper';\nimport { DataHelper } from '../../../shared/helpers/data.helper';\nimport { TextHelper } from '../../../shared/helpers/text.helper';\n\n@Component({\n  selector: 'bd-icon-management',\n  templateUrl: './icon-management.component.html',\n  styleUrls: ['./icon-management.component.scss'],\n})\nexport class IconManagementComponent implements OnDestroy {\n  public loading = false;\n  public form = new FormArray([]);\n  public icons$ = this.fetchIcons();\n  public IconType = IconType;\n  public iconTypes = Object.entries(IconType).map(([key, value]) => ({ id: value, name: key }));\n  public categories$ = this.categoryService.getCategories();\n  public notifications$ = this.notificationService.notificationsChanged;\n  public get iconForms() {\n    return this.form.controls as FormGroup[];\n  }\n  public isDeleting = false;\n  public deleteIconControl = this.fb.control([null, Validators.required]);\n  private destroyed$ = new Subject<void>();\n  private readonly COMPONENT_TITLE = 'Icon Management';\n\n  constructor(\n    private readonly iconService: IconService,\n    private readonly categoryService: CategoryService,\n    private readonly notificationService: NotificationService,\n    private readonly fb: FormBuilder,\n    private readonly clipboardService: ClipboardService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public getIconType(type: IconType) {\n    switch (type) {\n      case IconType.Raster:\n        return 'Raster';\n      case IconType.Vector:\n        return 'Vector';\n      default:\n        return '-';\n    }\n  }\n\n  public hasCategory(icon: IconDto, category: CategoryDto) {\n    return icon.categories?.some((cat) => cat.id === category.id);\n  }\n\n  public toggleCategory(icon: IconDto, category: CategoryDto, iconControl: FormGroup) {\n    let updatedIcon: Partial<IconDto>;\n    let obs$: Observable<any>;\n\n    if (this.hasCategory(icon, category)) {\n      updatedIcon = { id: icon.id, categories: icon.categories.filter((cat) => cat.id !== category.id) };\n      obs$ = this.iconService.deleteIconCategory(icon.id, category.id);\n    } else {\n      updatedIcon = { id: icon.id, categories: [...icon.categories, category] };\n      obs$ = this.iconService.addIconCategory(icon.id, category.id);\n    }\n\n    return obs$.pipe(tap(() => iconControl.get('categories').setValue(updatedIcon.categories))).subscribe();\n  }\n\n  public getInputCss(iconFieldControl: AbstractControl) {\n    const cssClass = 'w-100 text-small';\n    return iconFieldControl.invalid ? `${cssClass} is-invalid` : cssClass;\n  }\n\n  public openDeleteModal(icon: IconDto) {\n    this.deleteIconControl.setValue(icon);\n    this.isDeleting = true;\n  }\n\n  public deleteIcon() {\n    this.loading = true;\n    this.iconService\n      .deleteIcon(this.deleteIconControl.value.id)\n      .pipe(\n        mergeMap(() => this.icons$),\n        tap((icons) => {\n          this.localDelete(this.deleteIconControl.value.id, icons);\n          this.addNotification({ name: this.deleteIconControl.value.name }, 'deleted');\n          this.deleteIconControl.reset();\n        }),\n        finalize(() => (this.loading = false))\n      )\n      .subscribe();\n\n    this.isDeleting = false;\n  }\n\n  public copyId(id: string) {\n    this.clipboardService.copy(id);\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Id '${id}' has been copied to clipboard.`,\n    });\n  }\n\n  private fetchIcons() {\n    this.loading = true;\n\n    return this.iconService.getIcons({}, true).pipe(\n      map((icons) => ArrayHelper.sortAlphaNumeric(icons, 'name')),\n      tap((icons) => this.createForm(icons)),\n      finalize(() => (this.loading = false))\n    );\n  }\n\n  private createForm(icons: IconDto[]) {\n    this.form.clear();\n\n    icons.forEach((i) => {\n      const group = this.fb.group({\n        id: [i.id, Validators.required],\n        name: [i.name, Validators.required],\n        tags: [i.tags],\n        url: [i.url, Validators.required],\n        type: [i.type, Validators.required],\n        isPremium: [i.isPremium, Validators.required],\n        categories: [i.categories],\n        createdAt: [i.createdAt, Validators.required],\n        updatedAt: [i.updatedAt],\n      });\n      merge(\n        group.get('name').valueChanges.pipe(map((val) => ({ name: val }))),\n        group.get('tags').valueChanges.pipe(\n          map((val) => ({\n            tags: val\n              .split(',')\n              .map((tag: string) => tag.trim())\n              .filter((tag: string) => !!tag.length),\n          }))\n        ),\n        group.get('url').valueChanges.pipe(map((val) => ({ url: val }))),\n        group.get('type').valueChanges.pipe(map((val) => ({ type: val }))),\n        group.get('isPremium').valueChanges.pipe(map((val) => ({ isPremium: val })))\n      )\n        .pipe(\n          takeUntil(this.destroyed$),\n          filter(() => {\n            group.updateValueAndValidity();\n            return group.valid;\n          }),\n          debounceTime(TextHelper.DEFAULT_DEBOUNCE_TIME),\n          distinctUntilChanged((x, y) => {\n            const key = Object.keys(y)[0];\n            const oldVal = (x as any)[key];\n            const newVal = (y as any)[key];\n            const isArray = Array.isArray(oldVal);\n            return isArray ? DataHelper.isEqual(oldVal, newVal) : oldVal === newVal;\n          }),\n          map((changes) => ({ id: i.id, ...changes } as Partial<IconDto>)),\n          mergeMap((icon) => forkJoin([of(icon), this.iconService.patchIcon(icon)])),\n          tap(([updatedIcon]) => {\n            this.localUpdate(updatedIcon, icons);\n            const updatedIconFull = icons.find((item) => item.id === updatedIcon.id);\n            if (updatedIconFull) {\n              this.addNotification({ ...updatedIconFull, ...updatedIcon }, 'updated');\n            }\n          })\n        )\n        .subscribe();\n\n      group\n        .get('categories')\n        .valueChanges.pipe(map((val) => ({ categories: val })))\n        .pipe(\n          // TODO: reuse shared pipe elements\n          takeUntil(this.destroyed$),\n          map((changes) => ({ id: i.id, ...changes } as Partial<IconDto>)),\n          tap((updatedIcon) => {\n            this.localUpdate(updatedIcon, icons);\n            const updatedIconFull = icons.find((item) => item.id === updatedIcon.id);\n            if (updatedIconFull) {\n              this.addNotification({ ...updatedIconFull, ...updatedIcon }, 'updated');\n            }\n          })\n        )\n        .subscribe();\n\n      this.form.push(group);\n    });\n  }\n\n  private localUpdate(updatedIcon: Partial<IconDto>, icons: IconDto[]) {\n    const clonedIcons = [...icons];\n    const index = clonedIcons.findIndex((icon) => icon.id === updatedIcon.id);\n    clonedIcons[index] = { ...clonedIcons[index], ...updatedIcon };\n    this.icons$ = of(clonedIcons);\n  }\n\n  private localDelete(iconId: string, icons: IconDto[]) {\n    this.icons$ = of([...icons.filter((icon) => icon.id !== iconId)]).pipe(\n      tap(() => {\n        const controlIndex = this.form.controls.findIndex((c) => c.value.id === iconId);\n        if (controlIndex) {\n          this.form.removeAt(controlIndex);\n        }\n      })\n    );\n  }\n\n  private addNotification(icon: Partial<IconDto>, action: 'updated' | 'deleted') {\n    this.notificationService.addNotification({\n      title: this.COMPONENT_TITLE,\n      body: `Icon '${icon.name}' has been ${action}.`,\n    });\n  }\n}\n","<div class=\"d-flex flex-column\">\n  <input class=\"d-none\"\n         type=\"file\"\n         multiple\n         accept=\"image/*\"\n         #files\n         (change)=\"selectFiles($event)\" />\n  <button class=\"btn btn-menu btn-icon mb-2 icon-collection\"\n          (click)=\"files.click()\">Select Files</button>\n\n  <ng-container *ngIf=\"selectedFilesArray?.length && !loading\">\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">#</th>\n          <th scope=\"col\">File Name</th>\n          <th scope=\"col\">File Size</th>\n          <th scope=\"col\">Preview</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let file of selectedFilesArray; let i = index; trackBy: trackFn\">\n          <th scope=\"row\">{{ i + 1 }}</th>\n          <td>{{ file.name }}</td>\n          <td>{{ file.size | formatBytes }}</td>\n          <td class=\"text-center\"><img class=\"icon-preview\"\n                 [src]=\"filePreviews.get(file.name) | async\" /></td>\n        </tr>\n      </tbody>\n    </table>\n\n    <button class=\"btn\"\n            (click)=\"uploadIcons()\">Upload Icons</button>\n  </ng-container>\n\n  <span *ngIf=\"loading\"\n        class=\"spinner\"></span>\n</div>\n\n<bd-notifications [items]=\"notifications$ | async\"></bd-notifications>","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { AdminGuard } from '../../core/guards/admin.guard';\nimport { AdminHomeComponent } from './admin-home/admin-home.component';\nimport { AdminComponent } from './admin.component';\nimport { BackgroundManagementComponent } from './background-management/background-management.component';\nimport { BgBulkUploadComponent } from './bg-bulk-upload/bg-bulk-upload.component';\nimport { CategoryManagementComponent } from './category-management/category-management.component';\nimport { IconManagementComponent } from './icon-management/icon-management.component';\nimport { IconsBulkUploadComponent } from './icons-bulk-upload/icons-bulk-upload.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AdminComponent,\n    canActivate: [AdminGuard],\n    children: [\n      { path: '', component: AdminHomeComponent },\n      {\n        path: 'icons',\n        children: [\n          { path: 'upload', component: IconsBulkUploadComponent },\n          { path: '', component: IconManagementComponent },\n        ],\n      },\n      { path: 'categories', component: CategoryManagementComponent },\n      {\n        path: 'backgrounds',\n        children: [\n          { path: 'upload', component: BgBulkUploadComponent },\n          { path: '', component: BackgroundManagementComponent },\n        ],\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AdminRoutingModule {}\n","import { Component, ElementRef, OnDestroy, ViewChild } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Subject, throwError } from 'rxjs';\nimport { catchError, finalize, tap } from 'rxjs/operators';\n\nimport { IconService } from '../../../core/services/icon.service';\nimport { NotificationService } from '../../../core/services/notification.service';\n\n@Component({\n  selector: 'bd-icons-bulk-upload',\n  templateUrl: './icons-bulk-upload.component.html',\n  styleUrls: ['./icons-bulk-upload.component.scss'],\n})\nexport class IconsBulkUploadComponent implements OnDestroy {\n  @ViewChild('files') public filesEl: ElementRef<HTMLInputElement>;\n  public selectedFiles: FileList;\n  public filePreviews = new Map<string, Promise<string>>();\n  public get selectedFilesArray(): File[] {\n    return Array.from(this.selectedFiles || []);\n  }\n  public loading = false;\n  public notifications$ = this.notificationService.notificationsChanged;\n  private destroyed$ = new Subject<void>();\n\n  constructor(\n    private readonly iconService: IconService,\n    private readonly domSanitizer: DomSanitizer,\n    private readonly notificationService: NotificationService\n  ) {}\n\n  public ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  public selectFiles(event: any) {\n    this.selectedFiles = event.target.files || [];\n\n    this.selectedFilesArray.forEach((file) => {\n      this.filePreviews.set(\n        file.name,\n        new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            resolve(this.domSanitizer.bypassSecurityTrustUrl(reader.result as string) as string);\n          };\n          reader.onerror = (e) => {\n            reject(e);\n          };\n\n          reader.readAsDataURL(file);\n        })\n      );\n    });\n  }\n\n  public uploadIcons() {\n    if (!this.selectedFiles) {\n      return;\n    }\n\n    const formData = new FormData();\n    for (const file of this.selectedFilesArray) {\n      formData.append('files', file);\n    }\n\n    this.iconService\n      .uploadIcons(formData)\n      .pipe(\n        tap(() => (this.loading = true)),\n        catchError((e) => throwError(e)),\n        finalize(() => {\n          this.addUploadNotification(this.selectedFilesArray.length);\n          this.loading = false;\n          this.filesEl.nativeElement.value = null;\n        })\n      )\n      .subscribe();\n  }\n\n  public trackFn(_: number, item: File) {\n    return item.name;\n  }\n\n  private addUploadNotification(iconsQty: number) {\n    this.notificationService.addNotification({\n      title: 'Icons Bulk Upload',\n      createdAt: new Date(),\n      body: `${iconsQty} icons have been uploaded.`,\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AdminRoutingModule } from './admin-routing.module';\nimport { AdminComponent } from './admin.component';\nimport { SharedModule } from '../../shared/shared.module';\nimport { IconsBulkUploadComponent } from './icons-bulk-upload/icons-bulk-upload.component';\nimport { IconManagementComponent } from './icon-management/icon-management.component';\nimport { AdminHomeComponent } from './admin-home/admin-home.component';\nimport { CategoryManagementComponent } from './category-management/category-management.component';\nimport { BackgroundManagementComponent } from './background-management/background-management.component';\nimport { BgBulkUploadComponent } from './bg-bulk-upload/bg-bulk-upload.component';\n\n@NgModule({\n  declarations: [\n    AdminComponent,\n    IconsBulkUploadComponent,\n    BgBulkUploadComponent,\n    IconManagementComponent,\n    AdminHomeComponent,\n    CategoryManagementComponent,\n    BackgroundManagementComponent,\n  ],\n  imports: [CommonModule, AdminRoutingModule, SharedModule],\n})\nexport class AdminModule {}\n"]}